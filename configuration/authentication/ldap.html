<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>LDAP - Authelia</title> <link rel="shortcut icon" href="/docs/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124926127-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-124926127-1"); </script> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>LDAP | Authelia</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="LDAP" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Authelia is an open source multi-factor single sign-on portal for web applications" /> <meta property="og:description" content="Authelia is an open source multi-factor single sign-on portal for web applications" /> <meta property="og:site_name" content="Authelia" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/docs/configuration/authentication/ldap.html","headline":"LDAP","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/images/authelia-title.png"}},"description":"Authelia is an open source multi-factor single sign-on portal for web applications","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> </head> <body> <a class="github-fork-ribbon" href="https://github.com/authelia/authelia" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"> </path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="/docs/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="/docs/" class="navigation-list-link">Home</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/home/architecture.html" class="navigation-list-link">Architecture</a></li></ul></li><li class="navigation-list-item"><a href="/docs/getting-started.html" class="navigation-list-link">Getting Started</a></li><li class="navigation-list-item"><a href="/docs/features/" class="navigation-list-link">Features</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/features/first-factor.html" class="navigation-list-link">First Factor</a></li><li class="navigation-list-item "><a href="/docs/features/2fa/" class="navigation-list-link">Second Factor</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="/docs/features/2fa/one-time-password.html" class="navigation-list-link">One-Time Password</a> </li><li class="navigation-list-item "> <a href="/docs/features/2fa/security-key.html" class="navigation-list-link">Security Keys</a> </li><li class="navigation-list-item "> <a href="/docs/features/2fa/push-notifications.html" class="navigation-list-link">Push Notification</a> </li></ul></li><li class="navigation-list-item "><a href="/docs/features/single-factor.html" class="navigation-list-link">Single Factor</a></li><li class="navigation-list-item "><a href="/docs/features/password-reset.html" class="navigation-list-link">Password Reset</a></li><li class="navigation-list-item "><a href="/docs/features/access-control.html" class="navigation-list-link">Access Control</a></li><li class="navigation-list-item "><a href="/docs/features/regulation.html" class="navigation-list-link">Regulation</a></li></ul></li><li class="navigation-list-item active"><a href="/docs/configuration/" class="navigation-list-link">Configuration</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/configuration/access-control.html" class="navigation-list-link">Access Control</a></li><li class="navigation-list-item active"><a href="/docs/configuration/authentication/" class="navigation-list-link">Authentication backends</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="/docs/configuration/authentication/file.html" class="navigation-list-link">File</a> </li><li class="navigation-list-item active"> <a href="/docs/configuration/authentication/ldap.html" class="navigation-list-link active">LDAP</a> </li></ul></li><li class="navigation-list-item "><a href="/docs/configuration/duo-push-notifications.html" class="navigation-list-link">Duo Push Notifications</a></li><li class="navigation-list-item "><a href="/docs/configuration/miscellaneous.html" class="navigation-list-link">Miscellaneous</a></li><li class="navigation-list-item "><a href="/docs/configuration/one-time-password.html" class="navigation-list-link">One-Time Password</a></li><li class="navigation-list-item "><a href="/docs/configuration/regulation.html" class="navigation-list-link">Regulation</a></li><li class="navigation-list-item "><a href="/docs/configuration/notifier/" class="navigation-list-link">Notifier</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="/docs/configuration/notifier/filesystem.html" class="navigation-list-link">Filesystem</a> </li><li class="navigation-list-item "> <a href="/docs/configuration/notifier/smtp.html" class="navigation-list-link">SMTP</a> </li></ul></li><li class="navigation-list-item "><a href="/docs/configuration/secrets.html" class="navigation-list-link">Secrets</a></li><li class="navigation-list-item "><a href="/docs/configuration/server.html" class="navigation-list-link">Server</a></li><li class="navigation-list-item "><a href="/docs/configuration/session.html" class="navigation-list-link">Session</a></li><li class="navigation-list-item "><a href="/docs/configuration/storage/" class="navigation-list-link">Storage backends</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="/docs/configuration/storage/mariadb.html" class="navigation-list-link">MariaDB</a> </li><li class="navigation-list-item "> <a href="/docs/configuration/storage/mysql.html" class="navigation-list-link">MySQL</a> </li><li class="navigation-list-item "> <a href="/docs/configuration/storage/postgres.html" class="navigation-list-link">PostgreSQL</a> </li><li class="navigation-list-item "> <a href="/docs/configuration/storage/sqlite.html" class="navigation-list-link">SQLite</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="/docs/deployment/" class="navigation-list-link">Deployment</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/deployment/deployment-lite.html" class="navigation-list-link">Deployment - Lite</a></li><li class="navigation-list-item "><a href="/docs/deployment/deployment-ha.html" class="navigation-list-link">Deployment - Highly-Available</a></li><li class="navigation-list-item "><a href="/docs/deployment/deployment-kubernetes.html" class="navigation-list-link">Deployment - Kubernetes</a></li><li class="navigation-list-item "><a href="/docs/deployment/supported-proxies/" class="navigation-list-link">Proxy Integration</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="/docs/deployment/supported-proxies/haproxy.html" class="navigation-list-link">HAProxy</a> </li><li class="navigation-list-item "> <a href="/docs/deployment/supported-proxies/nginx.html" class="navigation-list-link">Nginx</a> </li><li class="navigation-list-item "> <a href="/docs/deployment/supported-proxies/traefik1.x.html" class="navigation-list-link">Traefik 1.x</a> </li><li class="navigation-list-item "> <a href="/docs/deployment/supported-proxies/traefik2.x.html" class="navigation-list-link">Traefik 2.x</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="/docs/security/" class="navigation-list-link">Security</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/security/measures.html" class="navigation-list-link">Security Measures</a></li><li class="navigation-list-item "><a href="/docs/security/threat-model.html" class="navigation-list-link">Threat Model</a></li></ul></li><li class="navigation-list-item"><a href="/docs/contributing/" class="navigation-list-link">Contributing</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/contributing/authelia-scripts.html" class="navigation-list-link">Authelia Scripts</a></li><li class="navigation-list-item "><a href="/docs/contributing/build-and-dev.html" class="navigation-list-link">Build & Dev</a></li><li class="navigation-list-item "><a href="/docs/contributing/suites.html" class="navigation-list-link">Suites</a></li></ul></li><li class="navigation-list-item"><a href="/docs/faq.html" class="navigation-list-link">FAQ</a></li><li class="navigation-list-item"><a href="/docs/roadmap.html" class="navigation-list-link">Roadmap</a></li><li class="navigation-list-item"><a href="/docs/community/" class="navigation-list-link">Community</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/community/two-factor-basic-auth.html" class="navigation-list-link">2FA through basic auth</a></li><li class="navigation-list-item "><a href="/docs/community/using-remote-user-header-for-sso-with-jira.html" class="navigation-list-link">Using Remote-User header for SSO with Jira</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Authelia" aria-label="Search Authelia" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"> <title>Search</title> <g fill-rule="nonzero"> <path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z" /> <path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z" /> </g> </svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/configuration/">Configuration</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/configuration/authentication/">Authentication backends</a> </li> <li class="breadcrumb-nav-list-item"><span>LDAP</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 id="ldap"> <a href="#ldap" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> LDAP </h1> <p><strong>Authelia</strong> supports using a LDAP server as the users database.</p> <h2 id="configuration"> <a href="#configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Configuration </h2> <p>Configuration of the LDAP backend is done as follows</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">authentication_backend</span><span class="pi">:</span>
  <span class="c1"># Disable both the HTML element and the API for reset password functionality</span>
  <span class="na">disable_reset_password</span><span class="pi">:</span> <span class="no">false</span>

  <span class="c1"># The amount of time to wait before we refresh data from the authentication backend. Uses duration notation.</span>
  <span class="c1"># To disable this feature set it to 'disable', this will slightly reduce security because for Authelia, users</span>
  <span class="c1"># will always belong to groups they belonged to at the time of login even if they have been removed from them in LDAP.</span>
  <span class="c1"># To force update on every request you can set this to '0' or 'always', this will increase processor demand.</span>
  <span class="c1"># See the below documentation for more information.</span>
  <span class="c1"># Duration Notation docs:  https://docs.authelia.com/configuration/index.html#duration-notation-format</span>
  <span class="c1"># Refresh Interval docs: https://docs.authelia.com/configuration/authentication/ldap.html#refresh-interval</span>
  <span class="na">refresh_interval</span><span class="pi">:</span> <span class="s">5m</span>

  <span class="na">ldap</span><span class="pi">:</span>
    <span class="c1"># The url to the ldap server. Scheme can be ldap:// or ldaps://</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">ldap://127.0.0.1</span>

    <span class="c1"># Skip verifying the server certificate (to allow self-signed certificate).</span>
    <span class="na">skip_verify</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1"># The base dn for every entries</span>
    <span class="na">base_dn</span><span class="pi">:</span> <span class="s">dc=example,dc=com</span>

    <span class="c1"># The attribute holding the username of the user. This attribute is used to populate</span>
    <span class="c1"># the username in the session information. It was introduced due to #561 to handle case</span>
    <span class="c1"># insensitive search queries.</span>
    <span class="c1"># For you information, Microsoft Active Directory usually uses 'sAMAccountName' and OpenLDAP</span>
    <span class="c1"># usually uses 'uid'</span>
    <span class="c1"># Beware that this attribute holds the unique identifiers for the users binding the user and the configuration</span>
    <span class="c1"># stored in database. Therefore only single value attributes are allowed and the value</span>
    <span class="c1"># must never be changed once attributed to a user otherwise it would break the configuration</span>
    <span class="c1"># for that user. Technically, non-unique attributes like 'mail' can also be used but we don't recommend using</span>
    <span class="c1"># them, we instead advise to use the attributes mentioned above (sAMAccountName and uid) to follow</span>
    <span class="c1"># https://www.ietf.org/rfc/rfc2307.txt.</span>
    <span class="na">username_attribute</span><span class="pi">:</span> <span class="s">uid</span>
    
    <span class="c1"># An additional dn to define the scope to all users</span>
    <span class="na">additional_users_dn</span><span class="pi">:</span> <span class="s">ou=users</span>
    
    <span class="c1"># The users filter used in search queries to find the user profile based on input filled in login form.</span>
    <span class="c1"># Various placeholders are available to represent the user input and back reference other options of the configuration:</span>
    <span class="c1"># - {input} is a placeholder replaced by what the user inputs in the login form. </span>
    <span class="c1"># - {username_attribute} is a placeholder replaced by what is configured in `username_attribute`.</span>
    <span class="c1"># - {mail_attribute} is a placeholder replaced by what is configured in `mail_attribute`.</span>
    <span class="c1"># - DON'T USE - {0} is an alias for {input} supported for backward compatibility but it will be deprecated in later versions, so please don't use it.</span>
    <span class="c1">#</span>
    <span class="c1"># Recommended settings are as follows:</span>
    <span class="c1"># - Microsoft Active Directory: (&amp;({username_attribute}={input})(objectCategory=person)(objectClass=user))</span>
    <span class="c1"># - OpenLDAP: (&amp;({username_attribute}={input})(objectClass=person))' or '(&amp;({username_attribute}={input})(objectClass=inetOrgPerson))</span>
    <span class="c1">#</span>
    <span class="c1"># To allow sign in both with username and email, one can use a filter like</span>
    <span class="c1"># (&amp;(|({username_attribute}={input})({mail_attribute}={input}))(objectClass=person))</span>
    <span class="na">users_filter</span><span class="pi">:</span> <span class="s">(&amp;({username_attribute}={input})(objectClass=person))</span>
    
    <span class="c1"># An additional dn to define the scope of groups</span>
    <span class="na">additional_groups_dn</span><span class="pi">:</span> <span class="s">ou=groups</span>
    
    <span class="c1"># The groups filter used in search queries to find the groups of the user.</span>
    <span class="c1"># - {input} is a placeholder replaced by what the user inputs in the login form.</span>
    <span class="c1"># - {username} is a placeholder replace by the username stored in LDAP (based on `username_attribute`).</span>
    <span class="c1"># - {dn} is a matcher replaced by the user distinguished name, aka, user DN.</span>
    <span class="c1"># - {username_attribute} is a placeholder replaced by what is configured in `username_attribute`.</span>
    <span class="c1"># - {mail_attribute} is a placeholder replaced by what is configured in `mail_attribute`.</span>
    <span class="c1"># - DON'T USE - {0} is an alias for {input} supported for backward compatibility but it will be deprecated in later versions, so please don't use it.</span>
    <span class="c1"># - DON'T USE - {1} is an alias for {username} supported for backward compatibility but it will be deprecated in later version, so please don't use it.</span>
    <span class="na">groups_filter</span><span class="pi">:</span> <span class="s">(&amp;(member={dn})(objectclass=groupOfNames))</span>
    
    <span class="c1"># The attribute holding the name of the group</span>
    <span class="na">group_name_attribute</span><span class="pi">:</span> <span class="s">cn</span>
    
    <span class="c1"># The attribute holding the mail address of the user</span>
    <span class="na">mail_attribute</span><span class="pi">:</span> <span class="s">mail</span>
    
    <span class="c1"># The username and password of the admin user. If multiple email addresses are defined for a user, only the first</span>
    <span class="c1"># one returned by the LDAP server is used.</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">cn=admin,dc=example,dc=com</span>
    
    <span class="c1"># Password can also be set using a secret: https://docs.authelia.com/configuration/secrets.html</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">password</span>
</code></pre></div></div> <p>The user must have an email address in order for Authelia to perform identity verification when a user attempts to reset their password or register a second factor device.</p> <h2 id="refresh-interval"> <a href="#refresh-interval" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Refresh Interval </h2> <p>This setting takes a <a href="/docs/configuration/#duration-notation-format">duration notation</a> that sets the max frequency for how often Authelia contacts the backend to verify the user still exists and that the groups stored in the session are up to date. This allows us to destroy sessions when the user no longer matches the user_filter, or deny access to resources as they are removed from groups.</p> <p>In addition to the duration notation, you may provide the value <code class="language-plaintext highlighter-rouge">always</code> or <code class="language-plaintext highlighter-rouge">disable</code>. Setting to <code class="language-plaintext highlighter-rouge">always</code> is the same as setting it to 0 which will refresh on every request, <code class="language-plaintext highlighter-rouge">disable</code> turns the feature off, which is not recommended. This completely prevents Authelia from refreshing this information, and it would only be refreshed when the user session gets destroyed by other means like inactivity, session expiration or logging out and in.</p> <p>This value can be any value including 0, setting it to 0 would automatically refresh the session on every single request. This means Authelia will have to contact the LDAP backend every time an element on a page loads which could be substantially costly. Itâ€™s a trade-off between load and security that you should adapt according to your own security policy.</p> <h2 id="important-notes"> <a href="#important-notes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Important notes </h2> <p>Users must be uniquely identified by an attribute, this attribute must obviously contain a single value and be guaranteed by the administrator to be unique. If multiple users have the same value, Authelia will simply fail authenticating the user and display an error message in the logs.</p> <p>In order to avoid such problems, we highly recommended you follow https://www.ietf.org/rfc/rfc2307.txt by using <code class="language-plaintext highlighter-rouge">sAMAccountName</code> for Microsoft Active Directory and <code class="language-plaintext highlighter-rouge">uid</code> for other implementations as the attribute holding the unique identifier for your users.</p> <h2 id="loading-a-password-from-a-secret-instead-of-inside-the-configuration"> <a href="#loading-a-password-from-a-secret-instead-of-inside-the-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Loading a password from a secret instead of inside the configuration </h2> <p>Password can also be defined using a <a href="/docs/configuration/secrets.html">secret</a>.</p> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020 Authelia. Distributed by an <a href="https://github.com/authelia/authelia/blob/master/LICENSE">Apache 2.0 license.</a></p> </footer> </div> </div> </div> </div> </body> </html>
