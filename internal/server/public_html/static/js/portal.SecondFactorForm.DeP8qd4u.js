const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./portal.OneTimePasswordMethod.H9UYyU2P.js","./index.t7Hp6wWA.js","../css/index.ChexMFeY.css","./constants.constants.D9Jh23gv.js","./hooks.Mounted.BhidXhBk.js","./hooks.OpenIDConnect.RqyKR777.js","./portal.OTPDial.jGJckp2n.js","./components.SuccessIcon.BwM3O0fW.js","./components.TimerIcon.B88ZJg0o.js","../css/TimerIcon.iKRD42Bo.css","./portal.IconWithContext.C8zjEmy8.js","./portal.MethodContainer.DiPfdMku.js","./components.InformationIcon.Eb8nEF1O.js","./portal.Authenticated.DJMskO5J.js","./portal.PushNotificationMethod.cSt28O2O.js","./components.FailureIcon.C8UZ-YzZ.js","./components.PushNotificationIcon.Cq18F1CP.js","../css/PushNotificationIcon.BO-74eEb.css","./portal.DeviceSelectionContainer.DAiU6FbD.js","./portal.WebAuthnMethod.aCgjC-4B.js","./components.WebAuthnTryIcon.z13PfurJ.js","./hooks.Timer.UVxr6XFh.js","./services.WebAuthn.Dn9nSaU_.js","./browserSupportsWebAuthn.Bhlk1eaM.js","./portal.PasswordMethod.DjtrIGgu.js","./portal.PasswordForm.DouHDblr.js","./mui.VisibilityOff.C0Vodw9A.js","./mui.TextField.BMu1N8UI.js","./services.Password.DB-Dxij9.js"])))=>i.map(i=>d[i]);
import{u as _,o as L,m as w,j as t,G as d,a2 as i,B as f,T as E,k as F,ag as N,c as O,r as s,R as p,d as r,aG as W,aH as z,$ as b,a1 as C,aI as B,aJ as D,_ as u,aj as $}from"./index.t7Hp6wWA.js";import{b as V}from"./browserSupportsWebAuthn.Bhlk1eaM.js";import{L as G}from"./components.LogoutButton.C0OCJm2t.js";import{S as H}from"./components.SwitchUserButton.DDv7xt1b.js";import{B as x,k as K}from"./constants.constants.D9Jh23gv.js";import{L as J}from"./layouts.Login.DLs9S7Cd.js";import{T as U,a as q,b as Q,F as X,c as Y}from"./components.TimerIcon.B88ZJg0o.js";import{P as Z}from"./components.PushNotificationIcon.Cq18F1CP.js";import"./layouts.usePortalStyles.CQncL4s1.js";const ee=function(e){const{t:o}=_(),h=L(),{classes:a}=I(),c=t.jsx(U,{width:24,height:24,period:15,color:h.palette.primary.main,backgroundColor:"white"});return t.jsxs(q,{open:e.open,className:a.root,onClose:e.onClose,children:[t.jsx(Q,{children:t.jsxs(d,{container:!0,justifyContent:"center",spacing:1,id:"methods-dialog",children:[e.methods.has(i.TOTP)?t.jsx(S,{id:"one-time-password-option",method:o("Time-based One-Time Password"),icon:c,onClick:()=>e.onClick(i.TOTP)}):null,e.methods.has(i.WebAuthn)&&e.webauthn?t.jsx(S,{id:"webauthn-option",method:o("Security Key - WebAuthn"),icon:t.jsx(X,{size:32}),onClick:()=>e.onClick(i.WebAuthn)}):null,e.methods.has(i.MobilePush)?t.jsx(S,{id:"push-notification-option",method:o("Push Notification"),icon:t.jsx(Z,{width:32,height:32}),onClick:()=>e.onClick(i.MobilePush)}):null]})}),t.jsx(Y,{children:t.jsx(x,{color:"primary",onClick:e.onClose,children:o("Close")})})]})};function S(e){const{classes:o}=I();return t.jsx(d,{size:{xs:12},className:"method-option",id:e.id,children:t.jsxs(x,{className:o.item,color:"primary",classes:{root:o.buttonRoot},variant:"contained",onClick:e.onClick,children:[t.jsx(f,{className:o.icon,children:e.icon}),t.jsx(f,{children:t.jsx(E,{children:e.method})})]})})}const I=w()(e=>({root:{textAlign:"center"},item:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},icon:{display:"inline-block",fill:"white"},buttonRoot:{display:"block"}})),te=s.lazy(()=>u(()=>import("./portal.OneTimePasswordMethod.H9UYyU2P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),oe=s.lazy(()=>u(()=>import("./portal.PushNotificationMethod.cSt28O2O.js"),__vite__mapDeps([14,1,2,15,7,16,17,3,4,5,18,11,12,13]),import.meta.url)),ne=s.lazy(()=>u(()=>import("./portal.WebAuthnMethod.aCgjC-4B.js"),__vite__mapDeps([19,1,2,20,15,7,8,3,9,21,22,23,10,4,5,11,12,13]),import.meta.url)),se=s.lazy(()=>u(()=>import("./portal.PasswordMethod.DjtrIGgu.js"),__vite__mapDeps([24,1,2,11,12,7,13,3,25,26,27,28]),import.meta.url)),Se=function(e){const{t:o}=_(),{classes:h}=ie(),a=F(),c=K(),{setLocalStorageMethod:y,localStorageMethodAvailable:T}=N(),{createErrorNotification:l}=O(),[k,m]=s.useState(!1),[A,j]=s.useState(!1);s.useEffect(()=>{j(V())},[j]);const P=()=>{m(!0)},M=async n=>{T?y(n):await R(n),m(!1),e.onMethodChanged()},R=async n=>{try{await $(n)}catch(v){console.error(v),l(o("There was an issue updating preferred second factor method"))}},g=e.factorKnowledge&&e.configuration.available_methods.size>1;return t.jsxs(J,{id:"second-factor-stage",title:`${o("Hi")} ${e.userInfo.display_name}`,userInfo:e.userInfo,children:[g?t.jsx(ee,{open:k,methods:e.configuration.available_methods,webauthn:A,onClose:()=>m(!1),onClick:M}):null,t.jsxs(d,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[t.jsxs(d,{size:{xs:12},children:[t.jsx(G,{}),c?" | ":null,c?t.jsx(H,{}):null,g?" | ":null,g?t.jsx(x,{id:"methods-button",color:"secondary",onClick:P,children:o("Methods")}):null]}),t.jsx(f,{className:h.methodContainer,children:t.jsxs(p,{children:[t.jsx(r,{path:W,element:t.jsx(se,{id:"password-method",authenticationLevel:e.authenticationLevel,userInfo:e.userInfo,onAuthenticationSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:z,element:t.jsx(te,{id:"one-time-password-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_totp,onRegisterClick:()=>{a(`${b}${C}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:B,element:t.jsx(ne,{id:"webauthn-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_webauthn,onRegisterClick:()=>{a(`${b}${C}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:D,element:t.jsx(oe,{id:"push-notification-method",authenticationLevel:e.authenticationLevel,duoSelfEnrollment:e.duoSelfEnrollment,registered:e.userInfo.has_duo,onSelectionClick:e.onMethodChanged,onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})})]})})]})]})},ie=w()(e=>({methodContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",padding:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2),minWidth:"300px"}}));export{Se as default};
