import{P as L,f as O,u as T,m as P,c as U,g as E,h as R,i as j,k,r as o,l as N,n as p,I as y,j as h,T as b}from"./index.CEiXDjRd.js";import{u as v}from"./hooks.Mounted.Bd30MWyg.js";import{M as w}from"./layouts.Minimal.D6dEI19q.js";import"./components.TypographyWithTooltip.7-AVamcY.js";import"./constants.constants.RkJrtp09.js";async function I(e){const r={};return e&&(r.targetURL=e),L(O,r)}const z=function(){const{t:e}=T(),{classes:r}=M(),n=v(),{createErrorNotification:u}=U(),t=E(R),f=j(),i=k(),[l,S]=o.useState(!1),[d,x]=o.useState(!1),[c]=N(),g=o.useCallback(()=>{if(t&&d)console.log("Redirecting to safe target URL: "+t),f(t);else if(console.log("Redirecting to index route"),c.has(p)){const a=new URLSearchParams;for(const[s,m]of c)s===p?a.set(R,m):a.set(s,m);i(y,!1,!1,!1,a)}else i(y)},[t,d,c,f,i]);return o.useEffect(()=>{(async()=>{try{const s=await I(t);if(!n.current)return;s?.safeTargetURL&&x(!0),setTimeout(()=>{n.current&&S(!0)},2e3)}catch(s){console.error(s),u(e("There was an issue signing out"))}})()},[t,n,u,e]),o.useEffect(()=>{l&&g()},[l,g]),h.jsx(w,{title:e("Sign out"),children:h.jsxs(b,{className:r.typo,children:[e("You're being signed out and redirected"),"..."]})})},M=P()(e=>({typo:{padding:e.spacing()}}));export{z as default};
