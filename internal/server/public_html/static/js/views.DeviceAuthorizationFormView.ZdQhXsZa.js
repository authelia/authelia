import{u as v,o as p,r as n,k as L,b4 as h,b9 as f,bg as x,ba as C,b8 as j,bb as R,C as S,at as w,A as m,I as z,j as e,B as F,L as U,G as a}from"./index.CEiXDjRd.js";import{L as B}from"./components.LogoutButton.DYd27vbU.js";import{S as D}from"./components.SwitchUserButton.CiIZtHyY.js";import{u as E}from"./hooks.OpenIDConnect.BHe-4a9-.js";import{L as I}from"./layouts.Login.CjPCW2LZ.js";import{F as _,T as A}from"./mui.TextField.o9feOhtZ.js";import{B as T}from"./constants.constants.RkJrtp09.js";import"./components.TypographyWithTooltip.7-AVamcY.js";const q=o=>{const{t:u}=v(["consent","settings"]),b=p(),s=E(),[c,g]=n.useState(s||""),i=L(),l=n.useRef(!1),d=n.useCallback(t=>{if(t==="")return;const r=new URLSearchParams;r.set(h,t),r.set(f,x),r.set(C,j),i(`${R}${S}${w}`,!0,!0,!0,r)},[i]);return n.useEffect(()=>{if(o.state.authentication_level===m.Unauthenticated){const t=new URLSearchParams;s&&t.set(h,s),t.set(f,x),t.set(C,j),i(z,!0,!0,!0,t)}},[s,i,o.state.authentication_level]),n.useEffect(()=>{l.current=!1},[s]),n.useEffect(()=>{!s||o.state.authentication_level===m.Unauthenticated||l.current||(l.current=!0,d(s))},[d,o.state.authentication_level,s]),o.state.authentication_level===m.Unauthenticated?e.jsx(F,{children:e.jsx(U,{})}):e.jsx(I,{id:"openid-consent-device-auth-stage",title:u("Confirm the Code"),children:e.jsxs(a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[e.jsxs(a,{size:{xs:12},sx:{paddingBottom:b.spacing(2)},children:[e.jsx(B,{})," "," | "," ",e.jsx(D,{})]}),e.jsx(a,{size:{xs:12},children:e.jsx(_,{id:"form-consent-openid-device-code-authorization",children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{size:{xs:12},children:e.jsx(A,{id:"user-code",label:u("Code"),variant:"outlined",required:!0,value:c,fullWidth:!0,onChange:t=>g(t.target.value),autoCapitalize:"none"})}),e.jsx(a,{size:{xs:12},children:e.jsx(T,{id:"confirm-button",variant:"contained",color:"primary",fullWidth:!0,onClick:()=>d(c),disabled:c==="",children:u("Confirm",{ns:"settings"})})})]})})})]})})};export{q as default};
