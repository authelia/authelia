const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./portal.OneTimePasswordMethod.BCJm3oqS.js","./index.Ceu454BR.js","../css/index.ChexMFeY.css","./constants.constants.DWj29GYq.js","./hooks.OpenIDConnect.DmFwKC4-.js","./portal.OTPDial.BwLni-M7.js","./components.SuccessIcon.CLqLM168.js","./components.TimerIcon.HjmbcpOu.js","../css/TimerIcon.iKRD42Bo.css","./portal.IconWithContext.q8mOGvpY.js","./portal.MethodContainer.Ga_yu08G.js","./components.InformationIcon.DaQvdeeh.js","./portal.Authenticated.B2pBhbUk.js","./portal.PushNotificationMethod.CUyhy01a.js","./components.FailureIcon.CC6DOBlN.js","./components.PushNotificationIcon.Cc7kiIrI.js","../css/PushNotificationIcon.BO-74eEb.css","./hooks.Mounted.Be0_ZIJx.js","./portal.DeviceSelectionContainer.CeWmvDl_.js","./portal.WebAuthnMethod.Ca9T74Ja.js","./components.WebAuthnTryIcon.D5oFdh4p.js","./hooks.Timer.DL3j5EgA.js","./services.WebAuthn.BDk3Hmeo.js","./browserSupportsWebAuthn.Bhlk1eaM.js","./portal.PasswordMethod.DLFW-dCM.js","./portal.PasswordForm.C27keSso.js","./mui.VisibilityOff.Bw3rHpwp.js","./mui.TextField.BrgfK03L.js","./services.Password.CPpzc6SF.js"])))=>i.map(i=>d[i]);
import{u as _,o as L,m as w,j as t,G as d,a2 as i,B as f,T as E,k as F,ag as N,c as O,r as s,R as p,d as r,aF as W,aG as z,$ as b,a1 as C,aH as B,aI as D,_ as u,aj as $}from"./index.Ceu454BR.js";import{b as V}from"./browserSupportsWebAuthn.Bhlk1eaM.js";import{L as G}from"./components.LogoutButton.DrN6RsH6.js";import{S as H}from"./components.SwitchUserButton.DZ5YokoC.js";import{B as x,k as K}from"./constants.constants.DWj29GYq.js";import{L as U}from"./layouts.Login.D_7LRd23.js";import{T as q,a as J,b as Q,F as X,c as Y}from"./components.TimerIcon.HjmbcpOu.js";import{P as Z}from"./components.PushNotificationIcon.Cc7kiIrI.js";import"./layouts.usePortalStyles.B0WqWIDg.js";const ee=function(e){const{t:o}=_(),h=L(),{classes:a}=I(),c=t.jsx(q,{width:24,height:24,period:15,color:h.palette.primary.main,backgroundColor:"white"});return t.jsxs(J,{open:e.open,className:a.root,onClose:e.onClose,children:[t.jsx(Q,{children:t.jsxs(d,{container:!0,justifyContent:"center",spacing:1,id:"methods-dialog",children:[e.methods.has(i.TOTP)?t.jsx(S,{id:"one-time-password-option",method:o("Time-based One-Time Password"),icon:c,onClick:()=>e.onClick(i.TOTP)}):null,e.methods.has(i.WebAuthn)&&e.webauthn?t.jsx(S,{id:"webauthn-option",method:o("Security Key - WebAuthn"),icon:t.jsx(X,{size:32}),onClick:()=>e.onClick(i.WebAuthn)}):null,e.methods.has(i.MobilePush)?t.jsx(S,{id:"push-notification-option",method:o("Push Notification"),icon:t.jsx(Z,{width:32,height:32}),onClick:()=>e.onClick(i.MobilePush)}):null]})}),t.jsx(Y,{children:t.jsx(x,{color:"primary",onClick:e.onClose,children:o("Close")})})]})};function S(e){const{classes:o}=I();return t.jsx(d,{size:{xs:12},className:"method-option",id:e.id,children:t.jsxs(x,{className:o.item,color:"primary",classes:{root:o.buttonRoot},variant:"contained",onClick:e.onClick,children:[t.jsx(f,{className:o.icon,children:e.icon}),t.jsx(f,{children:t.jsx(E,{children:e.method})})]})})}const I=w()(e=>({root:{textAlign:"center"},item:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},icon:{display:"inline-block",fill:"white"},buttonRoot:{display:"block"}})),te=s.lazy(()=>u(()=>import("./portal.OneTimePasswordMethod.BCJm3oqS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),oe=s.lazy(()=>u(()=>import("./portal.PushNotificationMethod.CUyhy01a.js"),__vite__mapDeps([13,1,2,14,6,15,16,3,17,4,18,10,11,12]),import.meta.url)),ne=s.lazy(()=>u(()=>import("./portal.WebAuthnMethod.Ca9T74Ja.js"),__vite__mapDeps([19,1,2,20,14,6,7,3,8,21,22,23,9,17,4,10,11,12]),import.meta.url)),se=s.lazy(()=>u(()=>import("./portal.PasswordMethod.DLFW-dCM.js"),__vite__mapDeps([24,1,2,10,11,6,12,3,25,26,27,28]),import.meta.url)),Se=function(e){const{t:o}=_(),{classes:h}=ie(),a=F(),c=K(),{setLocalStorageMethod:y,localStorageMethodAvailable:T}=N(),{createErrorNotification:l}=O(),[k,m]=s.useState(!1),[A,j]=s.useState(!1);s.useEffect(()=>{j(V())},[j]);const P=()=>{m(!0)},M=async n=>{T?y(n):await R(n),m(!1),e.onMethodChanged()},R=async n=>{try{await $(n)}catch(v){console.error(v),l(o("There was an issue updating preferred second factor method"))}},g=e.factorKnowledge&&e.configuration.available_methods.size>1;return t.jsxs(U,{id:"second-factor-stage",title:`${o("Hi")} ${e.userInfo.display_name}`,userInfo:e.userInfo,children:[g?t.jsx(ee,{open:k,methods:e.configuration.available_methods,webauthn:A,onClose:()=>m(!1),onClick:M}):null,t.jsxs(d,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[t.jsxs(d,{size:{xs:12},children:[t.jsx(G,{}),c?" | ":null,c?t.jsx(H,{}):null,g?" | ":null,g?t.jsx(x,{id:"methods-button",color:"secondary",onClick:P,children:o("Methods")}):null]}),t.jsx(f,{className:h.methodContainer,children:t.jsxs(p,{children:[t.jsx(r,{path:W,element:t.jsx(se,{id:"password-method",authenticationLevel:e.authenticationLevel,userInfo:e.userInfo,onAuthenticationSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:z,element:t.jsx(te,{id:"one-time-password-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_totp,onRegisterClick:()=>{a(`${b}${C}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:B,element:t.jsx(ne,{id:"webauthn-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_webauthn,onRegisterClick:()=>{a(`${b}${C}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:D,element:t.jsx(oe,{id:"push-notification-method",authenticationLevel:e.authenticationLevel,duoSelfEnrollment:e.duoSelfEnrollment,registered:e.userInfo.has_duo,onSelectionClick:e.onMethodChanged,onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})})]})})]})]})},ie=w()(e=>({methodContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",padding:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2),minWidth:"300px"}}));export{Se as default};
