import{u as k,c as m,k as T,r as o,I as R,j as p,ap as v}from"./index.t7Hp6wWA.js";import{a as g}from"./hooks.Revoke.Bi0fvXLE.js";import{d as h}from"./reset-password.ResetPassword.iottQqvP.js";const E=function(){const{t:e}=k(),{createSuccessNotification:u,createErrorNotification:s}=m(),r=g(),c=T(),t=o.useRef(null),[f,i]=o.useState(e("Revoking reset password token..."));o.useEffect(()=>()=>{t.current!==null&&(clearTimeout(t.current),t.current=null)},[]);const n=o.useCallback(()=>{t.current!==null&&clearTimeout(t.current),t.current=setTimeout(()=>{c(R,!1),t.current=null},1500)},[c]),l=o.useCallback(async()=>{if(r)try{const{ok:a,status:d}=await h(r);a?u(e("Successfully revoked the Token")):s(e(d===429?"You have made too many requests":"Failed to revoke the Token"))}catch(a){console.error(a),s(e("An unexpected error occurred while revoking the token"))}finally{i(e("Redirecting...")),n()}},[s,u,n,r,e]);return o.useEffect(()=>{if(!r){i(e("The Token was not provided")),s(e("The Token was not provided")),n();return}l()},[s,n,l,r,e]),p.jsx(v,{message:f})};export{E as default};
