const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./settings.SecondFactorMethodMobilePush.3DV8F4Bl.js","./index.CEiXDjRd.js","../css/index.h75bRWTw.css","./components.FailureIcon.BImOlKSw.js","./components.SuccessIcon.9My8fVrT.js","./components.PushNotificationIcon.C2Fasvks.js","../css/PushNotificationIcon.BO-74eEb.css","./portal.DeviceSelectionContainer.B5Nr8DRh.js","./constants.constants.RkJrtp09.js","./settings.SecondFactorMethodOneTimePassword.Dxhu6Dgc.js","./portal.OTPDial.C5uwTZz6.js","./components.TimerIcon.Cc0aXxNj.js","../css/TimerIcon.iKRD42Bo.css","./portal.IconWithContext.CGRNMh1Q.js","./settings.SecondFactorMethodWebAuthn.DEDul8rI.js","./components.WebAuthnTryIcon.DDoO3elY.js","./hooks.Timer.ChDcUIwL.js","./services.WebAuthn.CccHG5Sl.js","./browserSupportsWebAuthn.Bhlk1eaM.js","./hooks.Mounted.Bd30MWyg.js"])))=>i.map(i=>d[i]);
import{s as be,t as we,r,v as xe,j as n,w as H,x as oe,y as Ce,T as _,z as qe,D as It,E as fe,F as he,H as St,J as Nn,o as Et,u as G,B as $,S as dt,K as cn,M as dn,I as jt,k as un,m as Xe,c as ye,N as ae,_ as Mt,L as Wt,P as Fn,O as _n,Q as Wn,G as S,a as $n,U as hn,V as Bn,W as Un,X as Vn,Y as Le,Z as q,$ as Hn,a0 as Gn,a1 as Yn,a2 as $t,a3 as fn,a4 as Bt,a5 as Ut,a6 as Qn,a7 as Kn,b as qn,A as Xn,R as Zn,d as ut}from"./index.CEiXDjRd.js";import{L as Vt,u as At,a as Jn,c as Z,b as es,d as Me,e as ts,S as ns,i as Fe,g as Je,f as ss,h as ht,r as Ht,o as et,j as nt,D as os,m as Gt,E as as,k as Qe,l as gn,A as is,n as Yt,I as st,p as rs,q as ls,B as U,C as Be,s as cs,P as Ae,T as Ue,t as Rt,G as Qt}from"./constants.constants.RkJrtp09.js";import{g as ds,l as Ve,L as mn}from"./mui.ListItem.DBJTOqDM.js";import{d as us,v as hs,g as fs,a as Dt}from"./services.UserSessionElevation.Dskf73yk.js";import{u as pn,f as gs,T as Oe,F as Ot,a as ot}from"./mui.TextField.o9feOhtZ.js";import{S as zt,F as ms}from"./components.SuccessIcon.9My8fVrT.js";import{D as ps,g as xs,a as Re,b as ve,c as Pe,F as Cs}from"./components.TimerIcon.Cc0aXxNj.js";import{b as vs}from"./browserSupportsWebAuthn.Bhlk1eaM.js";import{P as bs}from"./portal.PasswordForm.DqmgKBpw.js";import{S as Ke}from"./mui.Stack.Dw5DboHy.js";import{P as Kt,g as ws,a as ys}from"./services.PasswordPolicyConfiguration.D-6xOw-w.js";import{t as Pt,d as Ss,S as He,s as js,g as Rs,c as Ps,O as Ts,u as ks}from"./portal.OTPDial.C5uwTZz6.js";import{f as Is,I as Es}from"./components.InformationIcon.BwF_9vdn.js";import{S as xn,F as Ie}from"./mui.FormControlLabel.DQvGqv1W.js";import{d as Ms,u as As,t as Ds,a as Os,W as De,s as zs,A as ft,f as Ls,b as Ns,g as Fs}from"./services.WebAuthn.CccHG5Sl.js";import{A as _s}from"./mui.VisibilityOff.CN4DP5jp.js";import{u as Ws,L as $s}from"./hooks.Timer.ChDcUIwL.js";import{I as Bs}from"./portal.IconWithContext.CGRNMh1Q.js";import"./services.Password.Dab8ZkAz.js";function Us(e){return be("MuiDialogContentText",e)}we("MuiDialogContentText",["root"]);const Vs=e=>{const{classes:t}=e,l=Ce({root:["root"]},Us,t);return{...t,...l}},Hs=H(_,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),pe=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiDialogContentText"}),{children:u,className:h,...g}=l,m=Vs(g);return n.jsx(Hs,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:g,className:oe(m.root,h),...l,classes:m})}),Gs=e=>{const{classes:t}=e;return Ce({root:["root"]},xs,t)},Ys=H(_,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Te=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiDialogTitle"}),{className:u,id:h,...g}=l,m=l,o=Gs(m),{titleId:i=h}=r.useContext(ps);return n.jsx(Ys,{component:"h2",className:oe(o.root,u),ownerState:m,ref:s,variant:"h6",id:h??i,...g})});function Qs(e){return be("MuiFormGroup",e)}we("MuiFormGroup",["root","row","error"]);const Ks=e=>{const{classes:t,row:s,error:l}=e;return Ce({root:["root",s&&"row",l&&"error"]},Qs,t)},qs=H("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Xs=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiFormGroup"}),{className:u,row:h=!1,...g}=l,m=pn(),o=gs({props:l,muiFormControl:m,states:["error"]}),i={...l,row:h,error:o.error},a=Ks(i);return n.jsx(qs,{className:oe(a.root,u),ownerState:i,ref:s,...g})}),Zs=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]},Js=e=>{const{alignItems:t,classes:s,dense:l,disabled:u,disableGutters:h,divider:g,selected:m}=e,i=Ce({root:["root",l&&"dense",!h&&"gutters",g&&"divider",u&&"disabled",t==="flex-start"&&"alignItemsFlexStart",m&&"selected"]},ds,s);return{...s,...i}},eo=H(Jn,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Zs})(fe(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ve.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Ve.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Ve.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Ve.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ve.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),to=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiListItemButton"}),{alignItems:u="center",autoFocus:h=!1,component:g="div",children:m,dense:o=!1,disableGutters:i=!1,divider:a=!1,focusVisibleClassName:c,selected:d=!1,className:p,...f}=l,v=r.useContext(Vt),C=r.useMemo(()=>({dense:o||v.dense||!1,alignItems:u,disableGutters:i}),[u,v.dense,o,i]),P=r.useRef(null);It(()=>{h&&P.current&&P.current.focus()},[h]);const w={...l,alignItems:u,dense:C.dense,disableGutters:i,divider:a,selected:d},x=Js(w),y=At(P,s);return n.jsx(Vt.Provider,{value:C,children:n.jsx(eo,{ref:y,href:f.href||f.to,component:(f.href||f.to)&&g==="div"?"button":g,focusVisibleClassName:oe(x.focusVisible,c),ownerState:w,className:oe(x.root,p),...f,classes:x,children:m})})});function no(e){const{children:t,defer:s=!1,fallback:l=null}=e,[u,h]=r.useState(!1);return It(()=>{s||h(!0)},[s]),r.useEffect(()=>{s&&h(!0)},[s]),u?t:l}const so=Z(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),oo=Z(n.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),ao=H("span",{name:"MuiRadioButtonIcon",shouldForwardProp:qe})({position:"relative",display:"flex"}),io=H(so,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),ro=H(oo,{name:"MuiRadioButtonIcon"})(fe(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function Cn(e){const{checked:t=!1,classes:s={},fontSize:l}=e,u={...e,checked:t};return n.jsxs(ao,{className:s.root,ownerState:u,children:[n.jsx(io,{fontSize:l,className:s.background,ownerState:u}),n.jsx(ro,{fontSize:l,className:s.dot,ownerState:u})]})}const vn=r.createContext(void 0);function lo(){return r.useContext(vn)}function co(e){return be("MuiRadio",e)}const qt=we("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),uo=e=>{const{classes:t,color:s,size:l}=e,u={root:["root",`color${he(s)}`,l!=="medium"&&`size${he(l)}`]};return{...t,...Ce(u,co,t)}},ho=H(xn,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.size!=="medium"&&t[`size${he(s.size)}`],t[`color${he(s.color)}`]]}})(fe(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${qt.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(St()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(St()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${qt.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function fo(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const go=n.jsx(Cn,{checked:!0}),mo=n.jsx(Cn,{}),We=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiRadio"}),{checked:u,checkedIcon:h=go,color:g="primary",icon:m=mo,name:o,onChange:i,size:a="medium",className:c,disabled:d,disableRipple:p=!1,slots:f={},slotProps:v={},inputProps:C,...P}=l,w=pn();let x=d;w&&typeof x>"u"&&(x=w.disabled),x??=!1;const y={...l,disabled:x,disableRipple:p,color:g,size:a},R=uo(y),O=lo();let E=u;const M=es(i,O&&O.onChange);let T=o;O&&(typeof E>"u"&&(E=fo(O.value,l.value)),typeof T>"u"&&(T=O.name));const I=v.input??C,[A,W]=Me("root",{ref:s,elementType:ho,className:oe(R.root,c),shouldForwardComponentProp:!0,externalForwardedProps:{slots:f,slotProps:v,...P},getSlotProps:b=>({...b,onChange:(z,...L)=>{b.onChange?.(z,...L),M(z,...L)}}),ownerState:y,additionalProps:{type:"radio",icon:r.cloneElement(m,{fontSize:m.props.fontSize??a}),checkedIcon:r.cloneElement(h,{fontSize:h.props.fontSize??a}),disabled:x,name:T,checked:E,slots:f,slotProps:{input:typeof I=="function"?I(y):I}}});return n.jsx(A,{...W,classes:R})});function po(e){return be("MuiRadioGroup",e)}we("MuiRadioGroup",["root","row","error"]);const xo=e=>{const{classes:t,row:s,error:l}=e;return Ce({root:["root",s&&"row",l&&"error"]},po,t)},at=r.forwardRef(function(t,s){const{actions:l,children:u,className:h,defaultValue:g,name:m,onChange:o,value:i,...a}=t,c=r.useRef(null),d=xo(t),[p,f]=ts({controlled:i,default:g,name:"RadioGroup"});r.useImperativeHandle(l,()=>({focus:()=>{let w=c.current.querySelector("input:not(:disabled):checked");w||(w=c.current.querySelector("input:not(:disabled)")),w&&w.focus()}}),[]);const v=At(s,c),C=Nn(m),P=r.useMemo(()=>({name:C,onChange(w){f(w.target.value),o&&o(w,w.target.value)},value:p}),[C,o,f,p]);return n.jsx(vn.Provider,{value:P,children:n.jsx(Xs,{role:"radiogroup",ref:v,className:oe(d.root,h),...a,children:u})})}),ct=r.createContext({}),Lt=r.createContext({});function Co(e){return be("MuiStep",e)}we("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const vo=e=>{const{classes:t,orientation:s,alternativeLabel:l,completed:u}=e;return Ce({root:["root",s,l&&"alternativeLabel",u&&"completed"]},Co,t)},bo=H("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Ye=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStep"}),{active:u,children:h,className:g,component:m="div",completed:o,disabled:i,expanded:a=!1,index:c,last:d,...p}=l,{activeStep:f,connector:v,alternativeLabel:C,orientation:P,nonLinear:w}=r.useContext(ct);let[x=!1,y=!1,R=!1]=[u,o,i];f===c?x=u!==void 0?u:!0:!w&&f>c?y=o!==void 0?o:!0:!w&&f<c&&(R=i!==void 0?i:!0);const O=r.useMemo(()=>({index:c,last:d,expanded:a,icon:c+1,active:x,completed:y,disabled:R}),[c,d,a,x,y,R]),E={...l,active:x,orientation:P,alternativeLabel:C,completed:y,disabled:R,expanded:a,component:m},M=vo(E),T=n.jsxs(bo,{as:m,className:oe(M.root,g),ref:s,ownerState:E,...p,children:[v&&C&&c!==0?v:null,h]});return n.jsx(Lt.Provider,{value:O,children:v&&!C&&c!==0?n.jsxs(r.Fragment,{children:[v,T]}):T})}),wo=Z(n.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),yo=Z(n.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function So(e){return be("MuiStepIcon",e)}const gt=we("MuiStepIcon",["root","active","completed","error","text"]);var Xt;const jo=e=>{const{classes:t,active:s,completed:l,error:u}=e;return Ce({root:["root",s&&"active",l&&"completed",u&&"error"],text:["text"]},So,t)},mt=H(ns,{name:"MuiStepIcon",slot:"Root"})(fe(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${gt.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${gt.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${gt.error}`]:{color:(e.vars||e).palette.error.main}}))),Ro=H("text",{name:"MuiStepIcon",slot:"Text"})(fe(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),Po=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepIcon"}),{active:u=!1,className:h,completed:g=!1,error:m=!1,icon:o,...i}=l,a={...l,active:u,completed:g,error:m},c=jo(a);if(typeof o=="number"||typeof o=="string"){const d=oe(h,c.root);return m?n.jsx(mt,{as:yo,className:d,ref:s,ownerState:a,...i}):g?n.jsx(mt,{as:wo,className:d,ref:s,ownerState:a,...i}):n.jsxs(mt,{className:d,ref:s,ownerState:a,...i,children:[Xt||(Xt=n.jsx("circle",{cx:"12",cy:"12",r:"12"})),n.jsx(Ro,{className:c.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:a,children:o})]})}return o});function To(e){return be("MuiStepLabel",e)}const Ee=we("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),ko=e=>{const{classes:t,orientation:s,active:l,completed:u,error:h,disabled:g,alternativeLabel:m}=e;return Ce({root:["root",s,h&&"error",g&&"disabled",m&&"alternativeLabel"],label:["label",l&&"active",u&&"completed",h&&"error",g&&"disabled",m&&"alternativeLabel"],iconContainer:["iconContainer",l&&"active",u&&"completed",h&&"error",g&&"disabled",m&&"alternativeLabel"],labelContainer:["labelContainer",m&&"alternativeLabel"]},To,t)},Io=H("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation]]}})({display:"flex",alignItems:"center",[`&.${Ee.alternativeLabel}`]:{flexDirection:"column"},[`&.${Ee.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Eo=H("span",{name:"MuiStepLabel",slot:"Label"})(fe(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${Ee.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${Ee.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${Ee.alternativeLabel}`]:{marginTop:16},[`&.${Ee.error}`]:{color:(e.vars||e).palette.error.main}}))),Mo=H("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${Ee.alternativeLabel}`]:{paddingRight:0}}),Ao=H("span",{name:"MuiStepLabel",slot:"LabelContainer"})(fe(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${Ee.alternativeLabel}`]:{textAlign:"center"}}))),$e=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepLabel"}),{children:u,className:h,componentsProps:g={},error:m=!1,icon:o,optional:i,slots:a={},slotProps:c={},StepIconComponent:d,StepIconProps:p,...f}=l,{alternativeLabel:v,orientation:C}=r.useContext(ct),{active:P,disabled:w,completed:x,icon:y}=r.useContext(Lt),R=o||y;let O=d;R&&!O&&(O=Po);const E={...l,active:P,alternativeLabel:v,completed:x,disabled:w,error:m,orientation:C},M=ko(E),T={slots:a,slotProps:{stepIcon:p,...g,...c}},[I,A]=Me("root",{elementType:Io,externalForwardedProps:{...T,...f},ownerState:E,ref:s,className:oe(M.root,h)}),[W,b]=Me("label",{elementType:Eo,externalForwardedProps:T,ownerState:E}),[z,L]=Me("stepIcon",{elementType:O,externalForwardedProps:T,ownerState:E});return n.jsxs(I,{...A,children:[R||z?n.jsx(Mo,{className:M.iconContainer,ownerState:E,children:n.jsx(z,{completed:x,active:P,error:m,icon:R,...L})}):null,n.jsxs(Ao,{className:M.labelContainer,ownerState:E,children:[u?n.jsx(W,{...b,className:oe(M.label,b?.className),children:u}):null,i]})]})});$e.muiName="StepLabel";function Do(e){return be("MuiStepConnector",e)}we("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Oo=e=>{const{classes:t,orientation:s,alternativeLabel:l,active:u,completed:h,disabled:g}=e,m={root:["root",s,l&&"alternativeLabel",u&&"active",h&&"completed",g&&"disabled"],line:["line",`line${he(s)}`]};return Ce(m,Do,t)},zo=H("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),Lo=H("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.line,t[`line${he(s.orientation)}`]]}})(fe(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),No=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepConnector"}),{className:u,...h}=l,{alternativeLabel:g,orientation:m="horizontal"}=r.useContext(ct),{active:o,disabled:i,completed:a}=r.useContext(Lt),c={...l,alternativeLabel:g,orientation:m,active:o,completed:a,disabled:i},d=Oo(c);return n.jsx(zo,{className:oe(d.root,u),ref:s,ownerState:c,...h,children:n.jsx(Lo,{className:d.line,ownerState:c})})});function Fo(e){return be("MuiStepper",e)}we("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const _o=e=>{const{orientation:t,nonLinear:s,alternativeLabel:l,classes:u}=e;return Ce({root:["root",t,s&&"nonLinear",l&&"alternativeLabel"]},Fo,u)},Wo=H("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),$o=n.jsx(No,{}),Nt=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepper"}),{activeStep:u=0,alternativeLabel:h=!1,children:g,className:m,component:o="div",connector:i=$o,nonLinear:a=!1,orientation:c="horizontal",...d}=l,p={...l,nonLinear:a,alternativeLabel:h,orientation:c,component:o},f=_o(p),v=r.Children.toArray(g).filter(Boolean),C=v.map((w,x)=>r.cloneElement(w,{index:x,last:x+1===v.length,...w.props})),P=r.useMemo(()=>({activeStep:u,alternativeLabel:h,connector:i,nonLinear:a,orientation:c}),[u,h,i,a,c]);return n.jsx(ct.Provider,{value:P,children:n.jsx(Wo,{as:o,ownerState:p,className:oe(f.root,m),ref:s,...d,children:C})})}),Bo=H("div",{name:"MuiSwipeArea",shouldForwardProp:qe})(fe(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),Uo=r.forwardRef(function(t,s){const{anchor:l,classes:u={},className:h,width:g,style:m,...o}=t,i=t;return n.jsx(Bo,{className:oe("PrivateSwipeArea-root",u.root,u[`anchor${he(l)}`],h),ref:s,style:{[Fe(l)?"width":"height"]:g,...m},ownerState:i,...o})}),tt=3,pt=20;let je=null;function xt(e,t,s){return e==="right"?s.body.offsetWidth-t[0].pageX:t[0].pageX}function Ct(e,t,s){return e==="bottom"?s.innerHeight-t[0].clientY:t[0].clientY}function Ge(e,t){return e?t.clientWidth:t.clientHeight}function Zt(e,t,s,l){return Math.min(Math.max(s?t-e:l+t-e,0),l)}function Vo(e,t){const s=[];for(;e&&e!==t.parentElement;){const l=nt(t).getComputedStyle(e);l.getPropertyValue("position")==="absolute"||l.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push(e),e=e.parentElement}return s}function Ho({domTreeShapes:e,start:t,current:s,anchor:l}){const u={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(h=>{let g=s>=t;(l==="top"||l==="left")&&(g=!g);const m=l==="left"||l==="right"?"x":"y",o=Math.round(h[u.scrollPosition[m]]),i=o>0,a=o+h[u.clientLength[m]]<h[u.scrollLength[m]];return!!(g&&a||!g&&i)})}const Go=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Yo=r.forwardRef(function(t,s){const l=xe({name:"MuiSwipeableDrawer",props:t}),u=Et(),h={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:g="left",disableBackdropTransition:m=!1,disableDiscovery:o=!1,disableSwipeToOpen:i=Go,hideBackdrop:a,hysteresis:c=.52,allowSwipeInChildren:d=!1,minFlingVelocity:p=450,ModalProps:{BackdropProps:f,...v}={},onClose:C,onOpen:P,open:w=!1,PaperProps:x={},SwipeAreaProps:y,swipeAreaWidth:R=20,transitionDuration:O=h,variant:E="temporary",slots:M={},slotProps:T={},...I}=l,[A,W]=r.useState(!1),b=r.useRef({isSwiping:null}),z=r.useRef(),L=r.useRef(),k=r.useRef(),X=At(x.ref,k),Q=r.useRef(!1),ne=r.useRef();It(()=>{ne.current=null},[w]);const ie=r.useCallback((j,J={})=>{const{mode:B=null,changeTransition:K=!0}=J,ee=Je(u,g),ce=["right","bottom"].includes(ee)?1:-1,D=Fe(g),N=D?`translate(${ce*j}px, 0)`:`translate(0, ${ce*j}px)`,te=k.current.style;te.webkitTransform=N,te.transform=N;let de="";if(B&&(de=u.transitions.create("all",ss({easing:void 0,style:void 0,timeout:O},{mode:B}))),K&&(te.webkitTransition=de,te.transition=de),!m&&!a){const Se=L.current.style;Se.opacity=1-j/Ge(D,k.current),K&&(Se.webkitTransition=de,Se.transition=de)}},[g,m,a,u,O]),re=ht(j=>{if(!Q.current)return;if(je=null,Q.current=!1,Ht.flushSync(()=>{W(!1)}),!b.current.isSwiping){b.current.isSwiping=null;return}b.current.isSwiping=null;const J=Je(u,g),B=Fe(g);let K;B?K=xt(J,j.changedTouches,et(j.currentTarget)):K=Ct(J,j.changedTouches,nt(j.currentTarget));const ee=B?b.current.startX:b.current.startY,ce=Ge(B,k.current),D=Zt(K,ee,w,ce),N=D/ce;if(Math.abs(b.current.velocity)>p&&(ne.current=Math.abs((ce-D)/b.current.velocity)*1e3),w){b.current.velocity>p||N>c?C():ie(0,{mode:"exit"});return}b.current.velocity<-p||1-N>c?P():ie(Ge(B,k.current),{mode:"enter"})}),ge=(j=!1)=>{if(!A){(j||!(o&&d))&&Ht.flushSync(()=>{W(!0)});const J=Fe(g);!w&&k.current&&ie(Ge(J,k.current)+(o?15:-pt),{changeTransition:!1}),b.current.velocity=0,b.current.lastTime=null,b.current.lastTranslate=null,b.current.paperHit=!1,Q.current=!0}},le=ht(j=>{if(!k.current||!Q.current||je!==null&&je!==b.current)return;ge(!0);const J=Je(u,g),B=Fe(g),K=xt(J,j.touches,et(j.currentTarget)),ee=Ct(J,j.touches,nt(j.currentTarget));if(w&&k.current.contains(j.target)&&je===null){const de=Vo(j.target,k.current);if(Ho({domTreeShapes:de,start:B?b.current.startX:b.current.startY,current:B?K:ee,anchor:g})){je=!0;return}je=b.current}if(b.current.isSwiping==null){const de=Math.abs(K-b.current.startX),Se=Math.abs(ee-b.current.startY),Ze=B?de>Se&&de>tt:Se>de&&Se>tt;if(Ze&&j.cancelable&&j.preventDefault(),Ze===!0||(B?Se>tt:de>tt)){if(b.current.isSwiping=Ze,!Ze){re(j);return}b.current.startX=K,b.current.startY=ee,!o&&!w&&(B?b.current.startX-=pt:b.current.startY-=pt)}}if(!b.current.isSwiping)return;const ce=Ge(B,k.current);let D=B?b.current.startX:b.current.startY;w&&!b.current.paperHit&&(D=Math.min(D,ce));const N=Zt(B?K:ee,D,w,ce);if(w)if(b.current.paperHit)N===0&&(b.current.startX=K,b.current.startY=ee);else if(B?K<ce:ee<ce)b.current.paperHit=!0,b.current.startX=K,b.current.startY=ee;else return;b.current.lastTranslate===null&&(b.current.lastTranslate=N,b.current.lastTime=performance.now()+1);const te=(N-b.current.lastTranslate)/(performance.now()-b.current.lastTime)*1e3;b.current.velocity=b.current.velocity*.4+te*.6,b.current.lastTranslate=N,b.current.lastTime=performance.now(),j.cancelable&&j.preventDefault(),ie(N)}),V=ht(j=>{if(j.defaultPrevented||j.defaultMuiPrevented||w&&(a||!L.current.contains(j.target))&&!k.current.contains(j.target))return;const J=Je(u,g),B=Fe(g),K=xt(J,j.touches,et(j.currentTarget)),ee=Ct(J,j.touches,nt(j.currentTarget));if(!w){if(i||!(j.target===z.current||k.current?.contains(j.target)&&(typeof d=="function"?d(j,z.current,k.current):d)))return;if(B){if(K>R)return}else if(ee>R)return}j.defaultMuiPrevented=!0,je=null,b.current.startX=K,b.current.startY=ee,ge()});r.useEffect(()=>{if(E==="temporary"){const j=et(k.current);return j.addEventListener("touchstart",V),j.addEventListener("touchmove",le,{passive:!w}),j.addEventListener("touchend",re),()=>{j.removeEventListener("touchstart",V),j.removeEventListener("touchmove",le,{passive:!w}),j.removeEventListener("touchend",re)}}},[E,w,V,le,re]),r.useEffect(()=>()=>{je===b.current&&(je=null)},[]),r.useEffect(()=>{w||W(!1)},[w]);const[ke,me]=Me("swipeArea",{ref:z,elementType:Uo,ownerState:l,externalForwardedProps:{slots:M,slotProps:{swipeArea:y,...T}},additionalProps:{width:R,anchor:g}});return n.jsxs(r.Fragment,{children:[n.jsx(os,{open:E==="temporary"&&A?!0:w,variant:E,ModalProps:{BackdropProps:{...f,ref:L},...E==="temporary"&&{keepMounted:!0},...v},hideBackdrop:a,anchor:g,transitionDuration:ne.current||O,onClose:C,ref:s,slots:M,slotProps:{...T,backdrop:Gt(T.backdrop??f,{ref:L}),paper:Gt(T.paper??x,{style:{pointerEvents:E==="temporary"&&!w&&!d?"none":""},ref:X})},...I}),!i&&E==="temporary"&&n.jsx(no,{children:n.jsx(ke,{...me})})]})});function Qo(e){return be("MuiSwitch",e)}const se=we("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ko=e=>{const{classes:t,edge:s,size:l,color:u,checked:h,disabled:g}=e,m={root:["root",s&&`edge${he(s)}`,`size${he(l)}`],switchBase:["switchBase",`color${he(u)}`,h&&"checked",g&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},o=Ce(m,Qo,t);return{...t,...o}},qo=H("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t[`edge${he(s.edge)}`],t[`size${he(s.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${se.thumb}`]:{width:16,height:16},[`& .${se.switchBase}`]:{padding:4,[`&.${se.checked}`]:{transform:"translateX(16px)"}}}}]}),Xo=H(xn,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{[`& .${se.input}`]:t.input},s.color!=="default"&&t[`color${he(s.color)}`]]}})(fe(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${se.checked}`]:{transform:"translateX(20px)"},[`&.${se.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${se.checked} + .${se.track}`]:{opacity:.5},[`&.${se.disabled} + .${se.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${se.input}`]:{left:"-100%",width:"300%"}})),fe(({theme:e})=>({"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(St(["light"])).map(([t])=>({props:{color:t},style:{[`&.${se.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.55)}`}},[`&.${se.checked} + .${se.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),Zo=H("span",{name:"MuiSwitch",slot:"Track"})(fe(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),Jo=H("span",{name:"MuiSwitch",slot:"Thumb"})(fe(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Jt=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiSwitch"}),{className:u,color:h="primary",edge:g=!1,size:m="medium",sx:o,slots:i={},slotProps:a={},...c}=l,d={...l,color:h,edge:g,size:m},p=Ko(d),f={slots:i,slotProps:a},[v,C]=Me("root",{className:oe(p.root,u),elementType:qo,externalForwardedProps:f,ownerState:d,additionalProps:{sx:o}}),[P,w]=Me("thumb",{className:p.thumb,elementType:Jo,externalForwardedProps:f,ownerState:d}),x=n.jsx(P,{...w}),[y,R]=Me("track",{className:p.track,elementType:Zo,externalForwardedProps:f,ownerState:d});return n.jsxs(v,{...C,children:[n.jsx(Xo,{type:"checkbox",icon:x,checkedIcon:x,ref:s,ownerState:d,...c,classes:{...p,root:p.switchBase},slots:{...i.switchBase&&{root:i.switchBase},...i.input&&{input:i.input}},slotProps:{...a.switchBase&&{root:typeof a.switchBase=="function"?a.switchBase(d):a.switchBase},input:{role:"switch"},...a.input&&{input:typeof a.input=="function"?a.input(d):a.input}}}),n.jsx(y,{...R})]})}),ea=Z(n.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),ta=Z(n.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),na=Z(n.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),sa=Z(n.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),bn=Z(n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),oa=Z(n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),aa=Z(n.jsx("path",{d:"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28M3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7s-.54.11-.7-.12c-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21m6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39s-4.66 1.97-4.66 4.39c0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15m7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12M14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94s3.08 1.32 3.08 2.94c0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38"})),ia=Z(n.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ra=Z(n.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),la=Z(n.jsx("path",{d:"M15 21h-2v-2h2zm-2-7h-2v5h2zm8-2h-2v4h2zm-2-2h-2v2h2zM7 12H5v2h2zm-2-2H3v2h2zm7-5h2V3h-2zm-7.5-.5v3h3v-3zM9 9H3V3h6zm-4.5 7.5v3h3v-3zM9 21H3v-6h6zm7.5-16.5v3h3v-3zM21 9h-6V3h6zm-2 10v-3h-4v2h2v3h4v-2zm-2-7h-4v2h4zm-4-2H7v2h2v2h2v-2h2zm1-1V7h-2V5h-2v4zM6.75 5.25h-1.5v1.5h1.5zm0 12h-1.5v1.5h1.5zm12-12h-1.5v1.5h1.5z"})),ca=Z(n.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),da=Z(n.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),ua=Z(n.jsx("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2m0 17H7V6h10zm-1-7.95-1.41-1.41-3.54 3.54-1.41-1.41-1.41 1.41L11.05 15z"})),ha=240,fa=function(e){const{t}=G("settings"),[s,l]=r.useState(!1);r.useEffect(()=>{document.title=t("Settings - {{authelia}}",{authelia:atob(String.fromCodePoint(...as))})},[t]);const u=e.drawerWidth??ha,h=o=>{o.nativeEvent instanceof KeyboardEvent&&o.nativeEvent.type==="keydown"&&(o.nativeEvent.key==="Tab"||o.nativeEvent.key==="Shift")||l(i=>!i)},g=typeof globalThis>"u"?void 0:()=>globalThis.document.body,m=n.jsxs($,{onClick:h,sx:{textAlign:"center"},children:[n.jsx(_,{variant:"h6",sx:{my:2},children:t("Settings")}),n.jsx(Qe,{}),n.jsx(gn,{children:ga.map(o=>n.jsx(ma,{keyname:o.keyname,text:t(o.text),pathname:o.pathname,icon:o.icon},o.keyname))})]});return n.jsxs($,{sx:{display:"flex"},children:[n.jsx(is,{component:"nav",children:n.jsxs(Yt,{children:[n.jsx(st,{id:"settings-menu",edge:"start",color:"inherit","aria-label":"open drawer",onClick:h,sx:{mr:2},children:n.jsx(ra,{})}),n.jsx(_,{variant:"h6",component:"div",sx:{display:{xs:s?"none":"block"},flexGrow:1},children:t("Settings")})]})}),n.jsx($,{component:"nav",children:n.jsx(Yo,{container:g,anchor:"left",open:s,onOpen:h,onClose:h,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:u},display:{xs:"block"}},children:m})}),n.jsxs($,{component:"main",sx:{flexGrow:1,p:{sm:3,xs:0}},children:[n.jsx(Yt,{}),e.children]})]})},ga=[{icon:n.jsx(sa,{color:"primary"}),keyname:"overview",pathname:dt,text:"Overview"},{icon:n.jsx(da,{color:"primary"}),keyname:"security",pathname:`${dt}${cn}`,text:"Security"},{icon:n.jsx(ua,{color:"primary"}),keyname:"twofactor",pathname:`${dt}${dn}`,text:"Two-Factor Authentication"},{icon:n.jsx(ta,{color:"error"}),keyname:"close",pathname:jt,text:"Close"}],ma=function(e){const t=globalThis.location.pathname===e.pathname||globalThis.location.pathname===e.pathname+"/",s=un(),l=r.useCallback(()=>{t||s(e.pathname)},[s,e,t]);return n.jsx(mn,{disablePadding:!0,onClick:l,children:n.jsxs(to,{selected:t,id:`settings-menu-${e.keyname}`,children:[e.icon?n.jsx(rs,{children:e.icon}):null,n.jsx(ls,{primary:e.text})]})})},pa=function(e){return n.jsx(Oe,{...e,slotProps:{htmlInput:{style:{letterSpacing:".5rem",textAlign:"center",textTransform:"uppercase"}}},variant:"outlined",color:"info",spellCheck:!1})},Ft=function(e){const{elevation:t,handleClosed:s,handleOpened:l,opening:u}=e,{t:h}=G("settings"),{classes:g}=xa(),{createErrorNotification:m}=ye(),[o,i]=r.useState(!1),[a,c]=r.useState(!1),[d,p]=r.useState(!1),[f,v]=r.useState(""),[C,P]=r.useState(),[w,x]=r.useState(!1),[y,R]=r.useState(!1),O=r.useRef(null),E=r.useMemo(()=>y&&!o&&u&&!!t,[y,o,u,t]),M=r.useCallback(k=>{v(""),P(void 0),x(!1),c(!1),p(!1),i(!1),R(!1),s(k)},[s]),T=r.useCallback(async()=>{if(!C)throw new Error("The delete code was empty.");await us(C)},[C]),I=r.useCallback(()=>{i(!0),T().catch(console.error),M(!1)},[M,T]),A=r.useCallback(()=>{p(!0),setTimeout(()=>{M(!0)},750)},[M]),W=r.useCallback(()=>{v(""),x(!0),c(!1),m(h("The One-Time Code either doesn't match the one generated or an unknown error occurred")),O.current?.focus()},[m,h]),b=r.useCallback(async()=>{if(f==="")return;c(!0),await hs(f)?A():W()},[f,W,A]),z=r.useCallback(async k=>{k.key==="Enter"&&(f.length===0?x(!0):await b())},[f.length,b]);r.useEffect(()=>{o||!u||!t||y||fs().then(k=>{if(!k)throw new Error("Failed to load the data.");P(k.delete_id),l(),R(!0)}).catch(k=>{console.error(k)})},[o,u,t,y,l]);const L=k=>{v(k.target.value.replaceAll(/\s/g,"")),x(!1)};return n.jsxs(Re,{id:"dialog-verify-one-time-code",open:E,onClose:I,PaperProps:{sx:{backgroundColor:"#1e2b39",border:"1px solid #2f3d4d",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"}},children:[n.jsx(Te,{sx:{color:"#FFFFFF",fontSize:"1.5rem",fontWeight:700,borderBottom:"1px solid #2f3d4d"},children:h("Identity Verification")}),d?n.jsx(ve,{children:n.jsx($,{className:g.success,sx:{display:"flex",flexDirection:"column",m:"auto",padding:"5.0rem",width:"fit-content"},children:n.jsx(zt,{})})}):n.jsxs(ve,{dividers:!0,sx:{borderColor:"#2f3d4d"},children:[n.jsx(pe,{gutterBottom:!0,sx:{color:"hsla(0, 0%, 100%, 0.74)"},children:h("In order to perform this action policy enforcement requires additional identity verification and a One-Time Code has been sent to your email")}),n.jsx(pe,{gutterBottom:!0,sx:{color:"hsla(0, 0%, 100%, 0.51)"},children:h("Closing this dialog or selecting cancel will invalidate the One-Time Code")}),n.jsx($,{sx:{display:"flex",flexDirection:"column",m:"auto",marginY:"2.5rem",width:"fit-content"},children:n.jsx(pa,{id:"one-time-code",label:"One-Time Code",value:f,onChange:L,error:w,disabled:a,inputRef:O,onKeyDown:z})})]}),d?null:n.jsxs(Pe,{sx:{borderTop:"1px solid #2f3d4d",padding:"16px 24px"},children:[n.jsx(U,{id:"dialog-cancel",variant:"outlined",disabled:a,onClick:I,sx:{borderColor:"#2f3d4d",color:"#FFFFFF","&:hover":{backgroundColor:"hsla(206, 100%, 50%, 0.04)",borderColor:"#2f3d4d"}},children:h("Cancel")}),n.jsx(U,{id:"dialog-verify",variant:"contained",disabled:a,startIcon:a?n.jsx(Be,{color:"inherit",size:20}):void 0,onClick:b,sx:{backgroundColor:"#2aa2c1","&:hover":{backgroundColor:"#238a9f"},boxShadow:"none"},children:h("Verify")})]})]})},xa=Xe()(e=>({success:{display:"flex",flex:"0 0 100%",flexDirection:"column",m:"auto",marginBottom:e.spacing(2),marginY:"2.5rem",width:"fit-content"}})),Ca=r.lazy(()=>Mt(()=>import("./settings.SecondFactorMethodMobilePush.3DV8F4Bl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),va=r.lazy(()=>Mt(()=>import("./settings.SecondFactorMethodOneTimePassword.Dxhu6Dgc.js"),__vite__mapDeps([9,1,2,10,4,11,8,12,13]),import.meta.url)),ba=r.lazy(()=>Mt(()=>import("./settings.SecondFactorMethodWebAuthn.DEDul8rI.js"),__vite__mapDeps([14,1,2,15,3,4,11,8,12,16,17,18,13,19]),import.meta.url)),wn={activeStep:0,closing:!1,loading:!1,method:void 0,open:!1};function wa(e,t){switch(t.type){case"reset":return{...wn};case"setOpen":return{...e,open:t.payload};case"setLoading":return{...e,loading:t.payload};case"setClosing":return{...e,closing:t.payload};case"setActiveStep":return{...e,activeStep:t.payload};case"setMethod":return{...e,method:t.payload};default:return e}}const _t=function(e){const{elevation:t,handleClosed:s,handleOpened:l,info:u,opening:h}=e,{t:g}=G(["settings","portal"]),{classes:m}=ya(),[o,i]=r.useReducer(wa,wn),{activeStep:a,closing:c,loading:d,method:p,open:f}=o,v=r.useCallback(()=>{i({type:"reset"})},[]),C=r.useCallback((I,A)=>{v(),s(I,A)},[v,s]),P=()=>{C(!1,!1)},w=()=>{C(!0,!1)},x=()=>{O(ae.TOTP)},y=()=>{O(ae.WebAuthn)},R=()=>{O(ae.MobilePush)},O=I=>{c||(i({payload:I,type:"setMethod"}),i({payload:1,type:"setActiveStep"}))},E=r.useCallback(()=>{i({payload:!0,type:"setClosing"}),i({payload:2,type:"setActiveStep"}),setTimeout(()=>{C(!0,!0)},1500)},[C]);r.useLayoutEffect(()=>{if(c||!h||!t)return;if((t.skip_second_factor||!t.require_second_factor)&&!t.can_skip_second_factor){v(),s(!0,!1);return}f||(l(),i({payload:!0,type:"setOpen"})),t.factor_knowledge||i({payload:1,type:"setActiveStep"})},[c,v,s,f,t,h,l]);const M=r.useCallback(()=>{if(!t?.factor_knowledge)return n.jsx(bs,{onAuthenticationSuccess:E});switch(p){case ae.WebAuthn:return n.jsx(ba,{onSecondFactorSuccess:E});case ae.TOTP:return n.jsx(va,{onSecondFactorSuccess:E});case ae.MobilePush:return n.jsx(Ca,{onSecondFactorSuccess:E});default:return null}},[t,p,E]),T=()=>a===2?n.jsx($,{className:m.success,sx:{display:"flex",flexDirection:"column",m:"auto",padding:"5.0rem",width:"fit-content"},children:n.jsx(zt,{})}):!t||!u?n.jsx(Wt,{}):a===0?n.jsxs(Ke,{alignContent:"center",justifyContent:"center",alignItems:"center",spacing:2,my:8,children:[t.can_skip_second_factor?n.jsxs(r.Fragment,{children:[n.jsx(U,{variant:"outlined",onClick:w,children:g("Email One-Time Code")}),n.jsx(Qe,{}),n.jsx(_,{variant:"h5",children:g("or",{ns:"portal"})}),n.jsx(Qe,{})]}):null,u.has_totp?n.jsx(U,{variant:"outlined",onClick:x,children:g("One-Time Password")}):null,u.has_webauthn&&vs()?n.jsx(U,{variant:"outlined",onClick:y,children:g("WebAuthn")}):null,u.has_duo?n.jsx(U,{variant:"outlined",onClick:R,children:g("Mobile Push")}):null]}):a===1?n.jsx(Ke,{alignContent:"center",justifyContent:"center",alignItems:"center",my:8,children:M()}):n.jsx(Wt,{});return n.jsxs(Re,{id:"dialog-verify-second-factor",open:f,onClose:P,children:[n.jsx(Te,{children:g("Identity Verification")}),n.jsxs(ve,{children:[n.jsx(pe,{gutterBottom:!0,children:g("In order to perform this action, policy enforcement requires that two-factor authentication is performed")}),n.jsxs(Nt,{activeStep:a,children:[n.jsx(Ye,{children:n.jsx($e,{children:g("Select a Method")})},"step-1"),n.jsx(Ye,{children:n.jsx($e,{children:g("Authenticate")})},"step-2"),n.jsx(Ye,{children:n.jsx($e,{children:g("Completed")})},"step-3")]}),T()]}),n.jsx(Pe,{children:n.jsx(U,{variant:"outlined",color:"error",disabled:d,onClick:P,children:g("Cancel")})})]})},ya=Xe()(e=>({success:{display:"flex",flex:"0 0 100%",flexDirection:"column",m:"auto",marginBottom:e.spacing(2),marginY:"2.5rem",width:"fit-content"}})),vt=e=>r.useCallback(t=>{t.getModifierState("CapsLock")?e(!0):e(!1)},[e]);async function Sa(e,t,s){return Fn(_n,{new_password:s,old_password:t,username:e})}const ja=e=>{const{t}=G(["settings","portal"]),{createErrorNotification:s,createSuccessNotification:l}=ye(),[u,h]=r.useState(!1),[g,m]=r.useState(""),[o,i]=r.useState(!1),[a,c]=r.useState(""),[d,p]=r.useState(!1),[f,v]=r.useState(""),[C,P]=r.useState(!1),[w,x]=r.useState(!1),[y,R]=r.useState(!1),[O,E]=r.useState(!1),M=r.useRef(null),T=r.useRef(null),I=r.useRef(null),[A,W]=r.useState({max_length:0,min_length:8,min_score:0,mode:Kt.Disabled,require_lowercase:!1,require_number:!1,require_special:!1,require_uppercase:!1}),b=r.useCallback(()=>{i(!1),p(!1),P(!1)},[]),z=r.useCallback(()=>{x(!1),R(!1),E(!1)},[]),L=r.useCallback(()=>{m(""),c(""),v(""),b(),z(),h(!1)},[b,z]),k=r.useCallback(()=>{e.setClosed(),L()},[e,L]),X=r.useCallback(async()=>{try{h(!0);const V=await ws();W(V),h(!1)}catch{s(t("There was an issue completing the process the verification token might have expired",{ns:"portal"})),h(!0)}},[s,t]);r.useEffect(()=>{X()},[X]);const Q=r.useCallback(async()=>{if(h(!0),g.trim()===""||a.trim()===""||f.trim()===""){g.trim()===""&&i(!0),a.trim()===""&&p(!0),f.trim()===""&&P(!0),h(!1);return}if(a!==f){p(!0),P(!0),s(t("Passwords do not match")),h(!1);return}try{await Sa(e.username,g,a),l(t("Password changed successfully")),k()}catch(V){if(b(),h(!1),Wn.isAxiosError(V)&&V.response)switch(V.response.status){case 400:p(!0),P(!0),s(t("Your supplied password does not meet the password policy requirements"));break;case 401:i(!0),s(t("Incorrect password"));break;case 500:default:s(t("There was an issue changing the password"));break}else s(t("There was an issue changing the password"));return}},[s,l,b,k,a,g,f,e.username,t]),ne=(V,ke,me)=>r.useCallback(j=>{j.key==="Enter"&&(V.length?me?me.current&&me.current.focus():Q().catch(console.error):ke(!0))},[me,V.length,ke]),ie=ne(g,i,T),re=ne(a,p,I),ge=ne(f,P),le=e.disabled||!1;return n.jsxs(Re,{open:e.open,maxWidth:"xs",children:[n.jsx(Te,{children:t("Change Password")}),n.jsx(ve,{children:n.jsx(Ot,{id:"change-password-form",disabled:u,children:n.jsxs(S,{container:!0,spacing:1,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},sx:{pt:3},children:n.jsx(Oe,{inputRef:M,id:"old-password",label:t("Old Password"),variant:"outlined",required:!0,value:g,error:o,disabled:le,fullWidth:!0,onChange:V=>m(V.target.value),onFocus:()=>i(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:ie,onKeyUp:vt(x),helperText:w?t("Caps Lock is on"):" ",color:w?"error":"primary",onBlur:()=>x(!1)})}),n.jsxs(S,{size:{xs:12},sx:{mt:3},children:[n.jsx(Oe,{inputRef:T,id:"new-password",label:t("New Password"),variant:"outlined",required:!0,fullWidth:!0,disabled:le,value:a,error:d,onChange:V=>c(V.target.value),onFocus:()=>p(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:re,onKeyUp:vt(R),helperText:y?t("Caps Lock is on"):" ",color:y?"error":"primary",onBlur:()=>R(!1)}),A.mode===Kt.Disabled?null:n.jsx(ys,{value:a,policy:A})]}),n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{inputRef:I,id:"repeat-new-password",label:t("Repeat New Password"),variant:"outlined",required:!0,fullWidth:!0,disabled:le,value:f,error:C,onChange:V=>v(V.target.value),onFocus:()=>P(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:ge,onKeyUp:vt(E),helperText:O?t("Caps Lock is on"):" ",color:O?"error":"primary",onBlur:()=>E(!1)})})]})})}),n.jsxs(Pe,{children:[n.jsx(U,{id:"password-change-dialog-cancel",color:"error",onClick:k,children:t("Cancel")}),n.jsx(U,{id:"password-change-dialog-submit",color:"primary",onClick:Q,disabled:!(g.length&&a.length&&f.length)||u,startIcon:u?n.jsx(Be,{color:"inherit",size:20}):n.jsx(n.Fragment,{}),children:t("Submit")})]})]})},Ra=({configuration:e,handleChangePassword:t,translate:s})=>{const l=n.jsx(U,{id:"change-password-button",variant:"contained",sx:{p:1,width:"100%"},onClick:t,disabled:!e||e.password_change_disabled,children:s("Change Password")});return!e||e.password_change_disabled?n.jsx(Ue,{title:s("This is disabled by your administrator"),children:n.jsx($,{component:"span",children:l})}):l},Pa=function(){const{t:e}=G(["settings","portal"]),t=Et(),{createErrorNotification:s}=ye(),[l,u,,h]=$n(),[g,m]=r.useState(),[o,i]=r.useState(!1),[a,c]=r.useState(!1),[d,p]=r.useState(!1),[f,v]=r.useState(!1),[C,P,,w]=hn(),x=()=>{i(!1),c(!1),v(!1)},y=r.useCallback(()=>{x(),m(void 0),p(!1)},[]),R=r.useCallback(()=>{x(),p(!0)},[]),O=(b,z)=>{if(!b){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),y();return}z?I().then(L=>{L&&(L.elevated||L.skip_second_factor?(m(void 0),f&&R()):c(!0))}).catch(L=>{console.error(L),s(e("Failed to get session elevation status"))}):g&&(g.elevated||g.skip_second_factor)?(m(void 0),f&&R()):c(!0)},E=()=>{i(!1)},M=r.useCallback(b=>{if(!b){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),y();return}m(void 0),f&&R()},[f,R,y]),T=()=>{c(!1)},I=async()=>{const b=await Dt();return m(b),b},A=()=>{I().catch(console.error),i(!0)},W=()=>{v(!0),A()};return r.useEffect(()=>{h&&s(e("There was an issue retrieving user preferences",{ns:"portal"})),w&&s(e("There was an issue retrieving configuration"))},[h,w,s,e]),r.useEffect(()=>{u(),P()},[u,P]),n.jsxs(r.Fragment,{children:[n.jsx(_t,{info:l,elevation:g,opening:o,handleClosed:O,handleOpened:E}),n.jsx(Ft,{opening:a,elevation:g,handleClosed:M,handleOpened:T}),n.jsx(ja,{username:l?.display_name||"",open:d,setClosed:()=>{y()}}),n.jsx(cs,{sx:{alignItems:"flex-start",display:"flex",height:"100vh",justifyContent:"center",pt:8},children:n.jsx(Ae,{variant:"outlined",sx:{alignItems:"center",display:"flex",height:"auto",justifyContent:"center"},children:n.jsx(Ke,{spacing:2,sx:{m:2,width:"100%"},children:n.jsxs($,{sx:{p:{md:3,xs:1}},children:[n.jsx($,{sx:{border:`1px solid ${t.palette.grey[600]}`,borderRadius:1,mb:1,p:1.25,width:"100%"},children:n.jsxs(_,{children:[e("Name"),": ",l?.display_name||""]})}),n.jsxs($,{sx:{border:`1px solid ${t.palette.grey[600]}`,borderRadius:1,mb:1,p:1.25,width:"100%"},children:[n.jsxs($,{display:"flex",alignItems:"center",children:[n.jsxs(_,{sx:{mr:1},children:[e("Email"),":"]}),n.jsx(_,{children:l?.emails?.[0]||""})]}),l?.emails&&l.emails.length>1&&n.jsxs(gn,{sx:{padding:0,pl:4,width:"100%"},children:[" ",l.emails.slice(1).map(b=>n.jsx(mn,{sx:{paddingBottom:0,paddingTop:0},children:n.jsx(_,{children:b})},b))]})]}),n.jsx($,{sx:{border:`1px solid ${t.palette.grey[600]}`,borderRadius:1,mb:1,p:1.25},children:n.jsxs(_,{children:[e("Password"),": "]})}),n.jsx(Ra,{configuration:C,translate:e,handleChangePassword:W})]})})})})]})},Ta=function(){const{t:e}=G("settings");return n.jsx(Ae,{variant:"outlined",children:n.jsxs($,{sx:{p:3},children:[n.jsx(_,{variant:"h4",textAlign:"center",mb:1,children:e("User Settings")}),n.jsx(_,{textAlign:"center",my:1,children:e("This is the user settings area at the present time it's very minimal but will include new features in the near future")}),n.jsx(_,{textAlign:"center",my:1,children:e("To view the currently available options select the menu icon at the top left")})]})})};async function ka(){const e=await Bn(Un);return e===null?[]:e}function Ia(){return Vn(ka)}const bt=60,en=3600,tn=86400,nn=2592e3,wt=31536e3;function sn(e){const s=(new Date().getTime()-e.getTime())/1e3;return s<bt?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/bt),"seconds"):s<en?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/bt),"minutes"):s<tn?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/en),"hours"):s<nn?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/tn),"days"):s<wt?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/nn),"months"):s>wt?new Intl.RelativeTimeFormat(Le.languages,{numeric:"auto"}).format(0-Math.floor(s/wt),"years"):"never"}function on(e){const[t,s]=r.useState(sn(e));return r.useEffect(()=>{const l=setInterval(()=>{s(sn(e))},6e4);return()=>clearInterval(l)},[e]),t}const yn=function(e){const{t}=G("settings"),s=on(e.created_at),l=on(e.last_used_at||new Date(0));return n.jsx(Ae,{variant:"outlined",id:e.id,children:n.jsx($,{sx:{p:3},children:n.jsxs(S,{container:!0,size:{xs:12},alignItems:"center",height:"100%",children:[n.jsx(S,{container:!0,size:{sm:1,xs:2},marginRight:{md:2,xl:3,xs:1},children:e.icon}),n.jsx(S,{size:{sm:6,xs:3},children:n.jsxs(Ke,{direction:"column",children:[n.jsxs(Ke,{direction:"row",children:[n.jsx(_,{id:`${e.id}-description`,display:"inline",sx:{fontWeight:"bold"},children:e.description}),n.jsx(_,{display:{sm:"inline",xs:"none"},variant:"body2",px:2,children:e.qualifier})]}),n.jsx(_,{variant:"caption",display:{sm:"block",xs:"none"},children:`${t("Added")} ${s}`}),n.jsx(_,{variant:"caption",display:{sm:"block",xs:"none"},children:e.last_used_at===void 0?t("Never used"):`${t("Last Used")} ${l}`})]})}),n.jsx(S,{size:{sm:4,xs:6},children:n.jsxs(S,{container:!0,size:{xs:12},justifyContent:"flex-end",alignItems:"center",height:"100%",children:[e.handleInformation?n.jsx(S,{size:{lg:4,xs:3},children:n.jsx(an,{tooltip:e.problem?e.tooltipInformationProblem:e.tooltipInformation,children:n.jsx(st,{color:"primary",onClick:e.handleInformation,id:`${e.id}-information`,children:e.problem?n.jsx(ca,{color:"warning"}):n.jsx(ia,{})})})}):null,e.handleEdit?n.jsx(S,{size:{lg:4,xs:3},children:n.jsx(an,{tooltip:e.tooltipEdit,children:n.jsx(st,{color:"primary",onClick:e.handleEdit,id:`${e.id}-edit`,children:n.jsx(oa,{})})})}):null,n.jsx(S,{size:{lg:4,xs:3},children:n.jsx(Ue,{title:e.tooltipDelete,children:n.jsx(st,{color:"primary",onClick:e.handleDelete,id:`${e.id}-delete`,children:n.jsx(bn,{})})})})]})})]})})})},an=function(e){return e.tooltip!==void 0&&e.tooltip!==""?n.jsx(Ue,{title:e.tooltip,children:e.children}):e.children},it={day:"numeric",hour:"numeric",minute:"numeric",month:"long",year:"numeric"},Sn=function(e){const{t}=G("settings");return n.jsxs(Re,{open:e.open,onClose:e.handleClose,"aria-labelledby":"one-time-password-info-dialog-title",children:[n.jsx(Te,{id:"one-time-password-info-dialog-title",children:t("One-Time Password Information")}),n.jsx(ve,{children:e.config?n.jsxs(r.Fragment,{children:[n.jsx(pe,{sx:{mb:3},children:t("Extended information for One-Time Password")}),n.jsxs(S,{container:!0,spacing:2,children:[n.jsx(S,{size:{md:3},sx:{display:{md:"block",xs:"none"}}}),n.jsx(S,{size:{xs:12},children:n.jsx(Qe,{})}),n.jsx(Ne,{name:t("Algorithm"),value:t("{{algorithm}}",{algorithm:Pt(e.config.algorithm)})}),n.jsx(Ne,{name:t("Digits"),value:t("{{digits}}",{digits:e.config.digits})}),n.jsx(Ne,{name:t("Period"),value:t("{{seconds}}",{seconds:e.config.period})}),n.jsx(Ne,{name:t("Issuer"),value:e.config.issuer}),n.jsx(Ne,{name:t("Added"),value:t("{{when, datetime}}",{formatParams:{when:it},when:new Date(e.config.created_at)})}),n.jsx(Ne,{name:t("Last Used"),value:e.config.last_used_at?t("{{when, datetime}}",{formatParams:{when:it},when:new Date(e.config.last_used_at)}):t("Never")})]})]}):n.jsx(pe,{sx:{mb:3},children:t("The One-Time Password information is not loaded")})}),n.jsx(Pe,{children:n.jsx(U,{id:"dialog-close",onClick:e.handleClose,children:t("Close")})})]})};function Ne(e){return n.jsxs(S,{size:{xs:e.xs??12},children:[n.jsx(_,{display:"inline",sx:{fontWeight:"bold"},children:`${e.name}: `}),n.jsx(_,{display:"inline",children:e.value})]})}const Ea=function(e){const{t}=G("settings"),[s,l]=r.useState(!1);return n.jsxs(r.Fragment,{children:[n.jsx(Sn,{config:e.config,open:s,handleClose:()=>{l(!1)}}),n.jsx(yn,{id:"one-time-password",icon:n.jsx(la,{fontSize:"large"}),description:e.config.issuer,qualifier:"",created_at:e.config.created_at,last_used_at:e.config.last_used_at,handleDelete:e.handleDelete,handleInformation:e.handleInformation,tooltipInformation:t("Display extended information for this One-Time Password"),tooltipDelete:t("Remove this {{item}}",{item:t("One-Time Password")})})]})},Ma=function(e){return n.jsx(Ea,{config:e.config,handleInformation:e.handleInformation,handleDelete:e.handleDelete})},jn=function(e){const{t}=G("settings"),s=()=>{e.onCancel()},l=()=>{e.onConfirm()};return n.jsxs(Re,{open:e.open,onClose:s,children:[n.jsx(Te,{children:e.title}),n.jsx(ve,{children:n.jsx(pe,{my:2,children:e.text})}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",onClick:s,children:t("Cancel")}),n.jsx(U,{id:"dialog-delete",variant:"outlined",color:"error",startIcon:n.jsx(bn,{}),onClick:l,children:t("Remove")})]})]})},Aa=function(e){const{t}=G("settings"),{createErrorNotification:s,createSuccessNotification:l}=ye(),u=async()=>{const h=await Ss();if(h.data.status==="KO"){h.data.elevation?s(t("You must be elevated to {{action}} a {{item}}",{action:t("delete"),item:t("One-Time Password")})):h.data.authentication?s(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("delete"),item:t("One-Time Password")})):s(t("There was a problem {{action}} the {{item}}",{action:t("deleting"),item:t("One-Time Password")}));return}l(t("Successfully {{action}} the {{item}}",{action:t("deleted"),item:t("One-Time Password")})),e.handleClose()};return n.jsx(jn,{open:e.open,onConfirm:u,onCancel:e.handleClose,title:t("Remove {{item}}",{item:t("One-Time Password")}),text:t("Are you sure you want to remove the One-Time Password from your account")})};var Da=Object.defineProperty,rt=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,rn=(e,t,s)=>t in e?Da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Tt=(e,t)=>{for(var s in t||(t={}))Rn.call(t,s)&&rn(e,s,t[s]);if(rt)for(var s of rt(t))Pn.call(t,s)&&rn(e,s,t[s]);return e},kt=(e,t)=>{var s={};for(var l in e)Rn.call(e,l)&&t.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&rt)for(var l of rt(e))t.indexOf(l)<0&&Pn.call(e,l)&&(s[l]=e[l]);return s};var ze;(e=>{const t=class F{constructor(o,i,a,c){if(this.version=o,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],o<F.MIN_VERSION||o>F.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let d=[];for(let f=0;f<this.size;f++)d.push(!1);for(let f=0;f<this.size;f++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(a);if(this.drawCodewords(p),c==-1){let f=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const C=this.getPenaltyScore();C<f&&(c=v,f=C),this.applyMask(v)}}u(0<=c&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}static encodeText(o,i){const a=e.QrSegment.makeSegments(o);return F.encodeSegments(a,i)}static encodeBinary(o,i){const a=e.QrSegment.makeBytes(o);return F.encodeSegments([a],i)}static encodeSegments(o,i,a=1,c=40,d=-1,p=!0){if(!(F.MIN_VERSION<=a&&a<=c&&c<=F.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");let f,v;for(f=a;;f++){const x=F.getNumDataCodewords(f,i)*8,y=g.getTotalBits(o,f);if(y<=x){v=y;break}if(f>=c)throw new RangeError("Data too long")}for(const x of[F.Ecc.MEDIUM,F.Ecc.QUARTILE,F.Ecc.HIGH])p&&v<=F.getNumDataCodewords(f,x)*8&&(i=x);let C=[];for(const x of o){s(x.mode.modeBits,4,C),s(x.numChars,x.mode.numCharCountBits(f),C);for(const y of x.getData())C.push(y)}u(C.length==v);const P=F.getNumDataCodewords(f,i)*8;u(C.length<=P),s(0,Math.min(4,P-C.length),C),s(0,(8-C.length%8)%8,C),u(C.length%8==0);for(let x=236;C.length<P;x^=253)s(x,8,C);let w=[];for(;w.length*8<C.length;)w.push(0);return C.forEach((x,y)=>w[y>>>3]|=x<<7-(y&7)),new F(f,i,w,d)}getModule(o,i){return 0<=o&&o<this.size&&0<=i&&i<this.size&&this.modules[i][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),i=o.length;for(let a=0;a<i;a++)for(let c=0;c<i;c++)a==0&&c==0||a==0&&c==i-1||a==i-1&&c==0||this.drawAlignmentPattern(o[a],o[c]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const i=this.errorCorrectionLevel.formatBits<<3|o;let a=i;for(let d=0;d<10;d++)a=a<<1^(a>>>9)*1335;const c=(i<<10|a)^21522;u(c>>>15==0);for(let d=0;d<=5;d++)this.setFunctionModule(8,d,l(c,d));this.setFunctionModule(8,7,l(c,6)),this.setFunctionModule(8,8,l(c,7)),this.setFunctionModule(7,8,l(c,8));for(let d=9;d<15;d++)this.setFunctionModule(14-d,8,l(c,d));for(let d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,l(c,d));for(let d=8;d<15;d++)this.setFunctionModule(8,this.size-15+d,l(c,d));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let a=0;a<12;a++)o=o<<1^(o>>>11)*7973;const i=this.version<<12|o;u(i>>>18==0);for(let a=0;a<18;a++){const c=l(i,a),d=this.size-11+a%3,p=Math.floor(a/3);this.setFunctionModule(d,p,c),this.setFunctionModule(p,d,c)}}drawFinderPattern(o,i){for(let a=-4;a<=4;a++)for(let c=-4;c<=4;c++){const d=Math.max(Math.abs(c),Math.abs(a)),p=o+c,f=i+a;0<=p&&p<this.size&&0<=f&&f<this.size&&this.setFunctionModule(p,f,d!=2&&d!=4)}}drawAlignmentPattern(o,i){for(let a=-2;a<=2;a++)for(let c=-2;c<=2;c++)this.setFunctionModule(o+c,i+a,Math.max(Math.abs(c),Math.abs(a))!=1)}setFunctionModule(o,i,a){this.modules[i][o]=a,this.isFunction[i][o]=!0}addEccAndInterleave(o){const i=this.version,a=this.errorCorrectionLevel;if(o.length!=F.getNumDataCodewords(i,a))throw new RangeError("Invalid argument");const c=F.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][i],d=F.ECC_CODEWORDS_PER_BLOCK[a.ordinal][i],p=Math.floor(F.getNumRawDataModules(i)/8),f=c-p%c,v=Math.floor(p/c);let C=[];const P=F.reedSolomonComputeDivisor(d);for(let x=0,y=0;x<c;x++){let R=o.slice(y,y+v-d+(x<f?0:1));y+=R.length;const O=F.reedSolomonComputeRemainder(R,P);x<f&&R.push(0),C.push(R.concat(O))}let w=[];for(let x=0;x<C[0].length;x++)C.forEach((y,R)=>{(x!=v-d||R>=f)&&w.push(y[x])});return u(w.length==p),w}drawCodewords(o){if(o.length!=Math.floor(F.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let c=0;c<this.size;c++)for(let d=0;d<2;d++){const p=a-d,v=(a+1&2)==0?this.size-1-c:c;!this.isFunction[v][p]&&i<o.length*8&&(this.modules[v][p]=l(o[i>>>3],7-(i&7)),i++)}}u(i==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let a=0;a<this.size;a++){let c;switch(o){case 0:c=(a+i)%2==0;break;case 1:c=i%2==0;break;case 2:c=a%3==0;break;case 3:c=(a+i)%3==0;break;case 4:c=(Math.floor(a/3)+Math.floor(i/2))%2==0;break;case 5:c=a*i%2+a*i%3==0;break;case 6:c=(a*i%2+a*i%3)%2==0;break;case 7:c=((a+i)%2+a*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][a]&&c&&(this.modules[i][a]=!this.modules[i][a])}}getPenaltyScore(){let o=0;for(let d=0;d<this.size;d++){let p=!1,f=0,v=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[d][C]==p?(f++,f==5?o+=F.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,v),p||(o+=this.finderPenaltyCountPatterns(v)*F.PENALTY_N3),p=this.modules[d][C],f=1);o+=this.finderPenaltyTerminateAndCount(p,f,v)*F.PENALTY_N3}for(let d=0;d<this.size;d++){let p=!1,f=0,v=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][d]==p?(f++,f==5?o+=F.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,v),p||(o+=this.finderPenaltyCountPatterns(v)*F.PENALTY_N3),p=this.modules[C][d],f=1);o+=this.finderPenaltyTerminateAndCount(p,f,v)*F.PENALTY_N3}for(let d=0;d<this.size-1;d++)for(let p=0;p<this.size-1;p++){const f=this.modules[d][p];f==this.modules[d][p+1]&&f==this.modules[d+1][p]&&f==this.modules[d+1][p+1]&&(o+=F.PENALTY_N2)}let i=0;for(const d of this.modules)i=d.reduce((p,f)=>p+(f?1:0),i);const a=this.size*this.size,c=Math.ceil(Math.abs(i*20-a*10)/a)-1;return u(0<=c&&c<=9),o+=c*F.PENALTY_N4,u(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let a=[6];for(let c=this.size-7;a.length<o;c-=i)a.splice(1,0,c);return a}}static getNumRawDataModules(o){if(o<F.MIN_VERSION||o>F.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*o+128)*o+64;if(o>=2){const a=Math.floor(o/7)+2;i-=(25*a-10)*a-55,o>=7&&(i-=36)}return u(208<=i&&i<=29648),i}static getNumDataCodewords(o,i){return Math.floor(F.getNumRawDataModules(o)/8)-F.ECC_CODEWORDS_PER_BLOCK[i.ordinal][o]*F.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let i=[];for(let c=0;c<o-1;c++)i.push(0);i.push(1);let a=1;for(let c=0;c<o;c++){for(let d=0;d<i.length;d++)i[d]=F.reedSolomonMultiply(i[d],a),d+1<i.length&&(i[d]^=i[d+1]);a=F.reedSolomonMultiply(a,2)}return i}static reedSolomonComputeRemainder(o,i){let a=i.map(c=>0);for(const c of o){const d=c^a.shift();a.push(0),i.forEach((p,f)=>a[f]^=F.reedSolomonMultiply(p,d))}return a}static reedSolomonMultiply(o,i){if(o>>>8||i>>>8)throw new RangeError("Byte out of range");let a=0;for(let c=7;c>=0;c--)a=a<<1^(a>>>7)*285,a^=(i>>>c&1)*o;return u(a>>>8==0),a}finderPenaltyCountPatterns(o){const i=o[1];u(i<=this.size*3);const a=i>0&&o[2]==i&&o[3]==i*3&&o[4]==i&&o[5]==i;return(a&&o[0]>=i*4&&o[6]>=i?1:0)+(a&&o[6]>=i*4&&o[0]>=i?1:0)}finderPenaltyTerminateAndCount(o,i,a){return o&&(this.finderPenaltyAddHistory(i,a),i=0),i+=this.size,this.finderPenaltyAddHistory(i,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(o,i){i[0]==0&&(o+=this.size),i.pop(),i.unshift(o)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function s(m,o,i){if(o<0||o>31||m>>>o)throw new RangeError("Value out of range");for(let a=o-1;a>=0;a--)i.push(m>>>a&1)}function l(m,o){return(m>>>o&1)!=0}function u(m){if(!m)throw new Error("Assertion error")}const h=class Y{constructor(o,i,a){if(this.mode=o,this.numChars=i,this.bitData=a,i<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(o){let i=[];for(const a of o)s(a,8,i);return new Y(Y.Mode.BYTE,o.length,i)}static makeNumeric(o){if(!Y.isNumeric(o))throw new RangeError("String contains non-numeric characters");let i=[];for(let a=0;a<o.length;){const c=Math.min(o.length-a,3);s(parseInt(o.substring(a,a+c),10),c*3+1,i),a+=c}return new Y(Y.Mode.NUMERIC,o.length,i)}static makeAlphanumeric(o){if(!Y.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],a;for(a=0;a+2<=o.length;a+=2){let c=Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a))*45;c+=Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a+1)),s(c,11,i)}return a<o.length&&s(Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a)),6,i),new Y(Y.Mode.ALPHANUMERIC,o.length,i)}static makeSegments(o){return o==""?[]:Y.isNumeric(o)?[Y.makeNumeric(o)]:Y.isAlphanumeric(o)?[Y.makeAlphanumeric(o)]:[Y.makeBytes(Y.toUtf8ByteArray(o))]}static makeEci(o){let i=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)s(o,8,i);else if(o<16384)s(2,2,i),s(o,14,i);else if(o<1e6)s(6,3,i),s(o,21,i);else throw new RangeError("ECI assignment value out of range");return new Y(Y.Mode.ECI,0,i)}static isNumeric(o){return Y.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return Y.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,i){let a=0;for(const c of o){const d=c.mode.numCharCountBits(i);if(c.numChars>=1<<d)return 1/0;a+=4+d+c.bitData.length}return a}static toUtf8ByteArray(o){o=encodeURI(o);let i=[];for(let a=0;a<o.length;a++)o.charAt(a)!="%"?i.push(o.charCodeAt(a)):(i.push(parseInt(o.substring(a+1,a+3),16)),a+=2);return i}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=h;e.QrSegment=h})(ze||(ze={}));(e=>{(t=>{const s=class{constructor(u,h){this.ordinal=u,this.formatBits=h}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),t.Ecc=s})(e.QrCode||(e.QrCode={}))})(ze||(ze={}));(e=>{(t=>{const s=class{constructor(u,h){this.modeBits=u,this.numBitsCharCount=h}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),t.Mode=s})(e.QrSegment||(e.QrSegment={}))})(ze||(ze={}));var _e=ze;var Oa={L:_e.QrCode.Ecc.LOW,M:_e.QrCode.Ecc.MEDIUM,Q:_e.QrCode.Ecc.QUARTILE,H:_e.QrCode.Ecc.HIGH},Tn=128,kn="L",In="#FFFFFF",En="#000000",Mn=!1,An=1,za=4,La=0,Na=.1;function Dn(e,t=0){const s=[];return e.forEach(function(l,u){let h=null;l.forEach(function(g,m){if(!g&&h!==null){s.push(`M${h+t} ${u+t}h${m-h}v1H${h+t}z`),h=null;return}if(m===l.length-1){if(!g)return;h===null?s.push(`M${m+t},${u+t} h1v1H${m+t}z`):s.push(`M${h+t},${u+t} h${m+1-h}v1H${h+t}z`);return}g&&h===null&&(h=m)})}),s.join("")}function On(e,t){return e.slice().map((s,l)=>l<t.y||l>=t.y+t.h?s:s.map((u,h)=>h<t.x||h>=t.x+t.w?u:!1))}function Fa(e,t,s,l){if(l==null)return null;const u=e.length+s*2,h=Math.floor(t*Na),g=u/t,m=(l.width||h)*g,o=(l.height||h)*g,i=l.x==null?e.length/2-m/2:l.x*g,a=l.y==null?e.length/2-o/2:l.y*g,c=l.opacity==null?1:l.opacity;let d=null;if(l.excavate){let f=Math.floor(i),v=Math.floor(a),C=Math.ceil(m+i-f),P=Math.ceil(o+a-v);d={x:f,y:v,w:C,h:P}}const p=l.crossOrigin;return{x:i,y:a,h:o,w:m,excavation:d,opacity:c,crossOrigin:p}}function _a(e,t){return t!=null?Math.max(Math.floor(t),0):e?za:La}function zn({value:e,level:t,minVersion:s,includeMargin:l,marginSize:u,imageSettings:h,size:g,boostLevel:m}){let o=q.useMemo(()=>{const f=(Array.isArray(e)?e:[e]).reduce((v,C)=>(v.push(..._e.QrSegment.makeSegments(C)),v),[]);return _e.QrCode.encodeSegments(f,Oa[t],s,void 0,void 0,m)},[e,t,s,m]);const{cells:i,margin:a,numCells:c,calculatedImageSettings:d}=q.useMemo(()=>{let p=o.getModules();const f=_a(l,u),v=p.length+f*2,C=Fa(p,g,f,h);return{cells:p,margin:f,numCells:v,calculatedImageSettings:C}},[o,g,h,l,u]);return{qrcode:o,margin:a,cells:i,numCells:c,calculatedImageSettings:d}}var Wa=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),$a=q.forwardRef(function(t,s){const l=t,{value:u,size:h=Tn,level:g=kn,bgColor:m=In,fgColor:o=En,includeMargin:i=Mn,minVersion:a=An,boostLevel:c,marginSize:d,imageSettings:p}=l,v=kt(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=v,P=kt(v,["style"]),w=p?.src,x=q.useRef(null),y=q.useRef(null),R=q.useCallback(z=>{x.current=z,typeof s=="function"?s(z):s&&(s.current=z)},[s]),[O,E]=q.useState(!1),{margin:M,cells:T,numCells:I,calculatedImageSettings:A}=zn({value:u,level:g,minVersion:a,boostLevel:c,includeMargin:i,marginSize:d,imageSettings:p,size:h});q.useEffect(()=>{if(x.current!=null){const z=x.current,L=z.getContext("2d");if(!L)return;let k=T;const X=y.current,Q=A!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;Q&&A.excavation!=null&&(k=On(T,A.excavation));const ne=window.devicePixelRatio||1;z.height=z.width=h*ne;const ie=h/I*ne;L.scale(ie,ie),L.fillStyle=m,L.fillRect(0,0,I,I),L.fillStyle=o,Wa?L.fill(new Path2D(Dn(k,M))):T.forEach(function(re,ge){re.forEach(function(le,V){le&&L.fillRect(V+M,ge+M,1,1)})}),A&&(L.globalAlpha=A.opacity),Q&&L.drawImage(X,A.x+M,A.y+M,A.w,A.h)}}),q.useEffect(()=>{E(!1)},[w]);const W=Tt({height:h,width:h},C);let b=null;return w!=null&&(b=q.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{E(!0)},ref:y,crossOrigin:A?.crossOrigin})),q.createElement(q.Fragment,null,q.createElement("canvas",Tt({style:W,height:h,width:h,ref:R,role:"img"},P)),b)});$a.displayName="QRCodeCanvas";var Ln=q.forwardRef(function(t,s){const l=t,{value:u,size:h=Tn,level:g=kn,bgColor:m=In,fgColor:o=En,includeMargin:i=Mn,minVersion:a=An,boostLevel:c,title:d,marginSize:p,imageSettings:f}=l,v=kt(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:P,numCells:w,calculatedImageSettings:x}=zn({value:u,level:g,minVersion:a,boostLevel:c,includeMargin:i,marginSize:p,imageSettings:f,size:h});let y=P,R=null;f!=null&&x!=null&&(x.excavation!=null&&(y=On(P,x.excavation)),R=q.createElement("image",{href:f.src,height:x.h,width:x.w,x:x.x+C,y:x.y+C,preserveAspectRatio:"none",opacity:x.opacity,crossOrigin:x.crossOrigin}));const O=Dn(y,C);return q.createElement("svg",Tt({height:h,width:h,viewBox:`0 0 ${w} ${w}`,ref:s,role:"img"},v),!!d&&q.createElement("title",null,d),q.createElement("path",{fill:m,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),q.createElement("path",{fill:o,d:O,shapeRendering:"crispEdges"}),R)});Ln.displayName="QRCodeSVG";const Ba=""+new URL("../media/applestore-badge.BqUv8-dZ.svg",import.meta.url).href,Ua=""+new URL("../media/googleplay-badge.Bs7UQq4a.svg",import.meta.url).href,Va=function(e){const t=e.targetBlank?"_blank":void 0;return n.jsxs($,{className:e.className,children:[n.jsx(Rt,{href:e.googlePlayLink,target:t,underline:"hover",children:n.jsx($,{component:"img",src:Ua,alt:"google play",width:e.iconSize})}),n.jsx(Rt,{href:e.appleStoreLink,target:t,underline:"hover",children:n.jsx($,{component:"img",src:Ba,alt:"apple store",width:e.iconSize})})]})},Ha=500,Ga=2e3,lt=function(e){const[t,s]=r.useState(!1),[l,u]=r.useState(!1),h=e.msTimeoutCopying??Ha,g=e.msTimeoutCopied??Ga,m=()=>{t||!e.value||e.value===""||(async d=>{u(!0),await navigator.clipboard.writeText(d),setTimeout(()=>{u(!1),s(!0)},h),setTimeout(()=>{s(!1)},g)})(e.value)},o=e.variant??"outlined",i=t?"success":"primary",a=t&&e.childrenCopied?e.childrenCopied:e.children;let c;return l?c=n.jsx(Be,{color:"inherit",size:20}):t?c=n.jsx(ea,{}):c=n.jsx(na,{}),e.value===null||e.value===""?n.jsx(U,{variant:o,color:i,disabled:!0,sx:e.sx,fullWidth:e.fullWidth,startIcon:c,children:a}):n.jsx(Ue,{title:e.tooltip,children:n.jsx(U,{variant:o,color:i,onClick:l?void 0:m,sx:e.sx,fullWidth:e.fullWidth,startIcon:c,children:a})})};async function Ya(e,t,s){return Hn(Gn,{algorithm:e,length:t,period:s})}const yt=["Start","Register","Confirm"],Qa=function(e){const{t}=G("settings"),{classes:s,cx:l}=Ka(),{createErrorNotification:u,createSuccessNotification:h}=ye(),[g,m]=r.useState({algorithm:"",length:6,period:30}),[o,i]=r.useState(null),[a,c]=r.useState({algorithms:[],lengths:[],periods:[]}),[d,p]=r.useState(0),[f,v]=r.useState(null),[C,P]=r.useState(null),[w,x]=r.useState(!1),[y,R]=r.useState(!1),[O,E]=r.useState(!1),[M,T]=r.useState(""),[I,A]=r.useState(He.Idle),[W,b]=r.useState(!0),[z,L]=r.useState(!1),k=r.useCallback(()=>{o&&m(o),v(null),P(null),x(!1),R(!1),E(!1),p(0),T(""),A(He.Idle),b(!0),L(!1)},[o]),X=r.useCallback(()=>{(async()=>{if(e.setClosed(),f)try{await js()}catch(D){console.error(D)}k()})()},[e,f,k]),Q=r.useCallback(()=>{L(!0),setTimeout(()=>{h(t("Successfully {{action}} the {{item}}",{action:t("added"),item:t("One-Time Password")})),e.setClosed(),k()},750)},[h,e,k,t]),ne=()=>{e.open&&X()};r.useEffect(()=>{!e.open||d!==0||o!==null||(async()=>{const D=await Rs(),N={algorithm:Pt(D.algorithm),length:D.length,period:D.period};c({algorithms:D.algorithms.map(te=>Pt(te)),lengths:D.lengths,periods:D.periods}),i(N),m(N)})()},[e.open,d,o,g]);const ie=r.useCallback(()=>{d!==0&&(R(!1),p(D=>D-1))},[d]),re=r.useCallback(()=>{d!==yt.length-1&&(R(!1),p(D=>D+1))},[d]);r.useEffect(()=>{!e.open||d!==1||(async()=>{x(!0);try{const D=await Ya(g.algorithm,g.length,g.period);v(D.otpauth_url),P(D.base32_secret)}catch(D){console.error(D),D.message.includes("Request failed with status code 403")?u(t("You must use the code from the same device and browser that initiated the process")):u(t("Failed to register device, the provided code is expired or has already been used")),E(!0)}x(!1)})()},[d,u,g,e.open,t]),r.useEffect(()=>{!e.open||d!==2||I===He.InProgress||M.length!==g.length||(async()=>{A(He.InProgress);try{const D=M;T(""),await Ps(D),Q()}catch(D){console.error(D),A(He.Failure)}})()},[d,I,M,M.length,Q,e.open,g.length]);const ge=(D,N)=>{m(te=>({...te,algorithm:N})),D.preventDefault()},le=(D,N)=>{m(te=>({...te,length:Number.parseInt(N)})),D.preventDefault()},V=(D,N)=>{m(te=>({...te,period:Number.parseInt(N)})),D.preventDefault()},ke=()=>{R(D=>!D)},me=o!==null&&(a.algorithms.length!==1||a.lengths.length!==1||a.periods.length!==1),j=o===null||a.algorithms.length<=1&&a.lengths.length<=1&&a.periods.length<=1,J=me&&a.algorithms.length<=1,B=me&&a.lengths.length<=1,K=me&&a.periods.length<=1,ee=w||O?s.fuzzy:void 0;function ce(D){switch(D){case 0:return n.jsx(r.Fragment,{children:o===null?n.jsx(S,{size:{xs:12},my:3,children:n.jsx(_,{children:"Loading..."})}):n.jsxs(S,{container:!0,children:[n.jsx(S,{size:{xs:12},my:3,children:n.jsx(_,{children:t("To begin select next")})}),n.jsx(S,{size:{xs:12},hidden:j,children:n.jsx(Ie,{disabled:j,control:n.jsx(Jt,{id:"one-time-password-advanced",checked:y,onChange:ke}),label:t("Advanced")})}),n.jsx(S,{size:{xs:12},hidden:j||!y,justifyContent:"center",alignItems:"center",children:n.jsxs(Ot,{fullWidth:!0,children:[J?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-algorithms",children:t("Algorithm")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-algorithms",value:g.algorithm,sx:{justifyContent:"center"},onChange:ge,children:a.algorithms.map(N=>n.jsx(Ie,{value:N,control:n.jsx(We,{id:`one-time-password-algorithm-${N}`}),label:N},N))})]}),B?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-lengths",children:t("Length")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-lengths",value:g.length.toString(),sx:{justifyContent:"center"},onChange:le,children:a.lengths.map(N=>n.jsx(Ie,{value:N.toString(),control:n.jsx(We,{id:`one-time-password-length-${N.toString()}`}),label:N.toString()},N.toString()))})]}),K?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-periods",children:t("Seconds")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-periods",value:g.period.toString(),sx:{justifyContent:"center"},onChange:V,children:a.periods.map(N=>n.jsx(Ie,{value:N.toString(),control:n.jsx(We,{id:`one-time-password-period-${N.toString()}`}),label:N.toString()},N.toString()))})]})]})})]})});case 1:return n.jsxs(r.Fragment,{children:[n.jsx(S,{size:{xs:12},my:2,children:n.jsx(Ie,{control:n.jsx(Jt,{id:"qr-toggle",checked:W,onChange:()=>{b(N=>!N)}}),label:t("QR Code")})}),n.jsx(S,{size:{xs:12},hidden:!W,children:n.jsx($,{className:l(ee,s.qrcodeContainer),children:f?n.jsxs(Rt,{href:f,underline:"hover",children:[n.jsx(Ln,{value:f,className:s.qrcode,size:200}),w&&!O?n.jsx(Be,{className:s.loader,size:128}):null,O?n.jsx(ms,{className:s.failureIcon,icon:Is}):null]}):null})}),n.jsx(S,{size:{xs:12},hidden:W,children:n.jsxs(S,{container:!0,spacing:2,justifyContent:"center",children:[n.jsx(S,{size:{xs:4},children:n.jsx(lt,{tooltip:t("Click to Copy"),value:f,childrenCopied:t("Copied"),fullWidth:!0,children:t("URI")})}),n.jsx(S,{size:{xs:4},children:n.jsx(lt,{tooltip:t("Click to Copy"),value:C,childrenCopied:t("Copied"),fullWidth:!0,children:t("Secret")})}),n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{id:"secret-url",label:t("Secret"),className:s.secret,value:f??"",multiline:!0,slotProps:{input:{readOnly:!0}}})})]})}),n.jsx(S,{size:{xs:12},sx:{display:{md:"block",xs:"none"}},children:n.jsxs($,{children:[n.jsx(_,{className:s.googleAuthenticatorText,children:t("Need Google Authenticator?")}),n.jsx(Va,{iconSize:110,targetBlank:!0,className:s.googleAuthenticatorBadges,googlePlayLink:Qt.googlePlay,appleStoreLink:Qt.appleStore})]})})]});case 2:return n.jsx(S,{size:{xs:12},paddingY:4,children:z?n.jsx($,{className:s.success,children:n.jsx(zt,{})}):n.jsx(Ts,{passcode:M,state:I,digits:g.length,period:g.period,onChange:T})})}}return n.jsxs(Re,{open:e.open,onClose:ne,fullWidth:!0,children:[n.jsx(Te,{children:t("Register {{item}}",{item:t("One-Time Password")})}),n.jsxs(ve,{children:[n.jsx(pe,{sx:{mb:3},children:t("This dialog handles registration of a {{item}}",{item:t("One-Time Password")})}),n.jsxs(S,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},children:n.jsx(Nt,{activeStep:d,children:yt.map(D=>{const N={},te={};return n.jsx(Ye,{...N,children:n.jsx($e,{...te,children:t(D)})},D)})})}),n.jsx(S,{size:{xs:12},children:n.jsx(S,{container:!0,spacing:1,justifyContent:"center",children:ce(d)})})]})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-previous",color:"primary",onClick:ie,disabled:d===0,children:t("Previous")}),n.jsx(U,{id:"dialog-cancel",color:"error",onClick:X,children:t("Cancel")}),n.jsx(U,{id:"dialog-next",color:"primary",onClick:re,disabled:d===yt.length-1,children:t("Next")})]})]})},Ka=Xe()(e=>({failureIcon:{color:Yn[400],fontSize:"8rem",left:"calc(128px - 64px)",position:"absolute",top:"calc(128px - 64px)"},fuzzy:{filter:"blur(10px)"},googleAuthenticatorBadges:{},googleAuthenticatorText:{fontSize:e.typography.fontSize*.8},loader:{color:"rgba(255, 255, 255, 0.5)",left:"calc(128px - 64px)",position:"absolute",top:"calc(128px - 64px)"},qrcode:{backgroundColor:"white",marginBottom:e.spacing(2),marginTop:e.spacing(2),padding:e.spacing()},qrcodeContainer:{display:"inline-block",position:"relative"},secret:{marginBottom:e.spacing(1),marginTop:e.spacing(1),width:"256px"},success:{flex:"0 0 100%",marginBottom:e.spacing(2)}})),qa=function(e){const{t}=G("settings"),[s,l]=r.useState(),[u,h]=r.useState(!1),[g,m]=r.useState(!1),[o,i]=r.useState(!1),[a,c]=r.useState(!1),[d,p]=r.useState(!1),[f,v]=r.useState(!1),[C,P]=r.useState(!1),w=()=>{m(!1),i(!1),p(!1),P(!1)},x=r.useCallback(()=>{w(),l(void 0),c(!1),v(!1)},[]),y=r.useCallback(()=>{w(),c(!0)},[]),R=r.useCallback(()=>{w(),v(!0)},[]),O=(k,X)=>{if(!k){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),x();return}X?I().catch(console.error).then(Q=>{Q&&(Q.elevated||Q.skip_second_factor?(l(void 0),d?y():C&&R()):i(!0))}):s&&(s.elevated||s.skip_second_factor)?(l(void 0),d?y():C&&R()):i(!0)},E=()=>{m(!1)},M=r.useCallback(k=>{if(!k){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),x();return}l(void 0),d?y():C&&R()},[x,y,R,d,C]),T=r.useCallback(()=>{i(!1)},[]),I=async()=>{const k=await Dt();return l(k),k},A=()=>{I().catch(console.error),m(!0)},W=()=>{h(!0)},b=()=>{p(!0),A()},z=()=>{e.config&&(P(!0),A())},L=e.config!==null&&e.config!==void 0;return n.jsxs(r.Fragment,{children:[n.jsx(_t,{info:e.info,elevation:s,opening:g,handleClosed:O,handleOpened:E}),n.jsx(Ft,{opening:o,elevation:s,handleClosed:M,handleOpened:T}),n.jsx(Qa,{open:a,setClosed:()=>{x(),e.handleRefreshState()}}),n.jsx(Sn,{open:u,handleClose:()=>{h(!1)},config:e.config}),n.jsx(Aa,{open:f,handleClose:()=>{x(),e.handleRefreshState()}}),n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("One-Time Password")})}),n.jsx(S,{size:{xs:12},children:n.jsx(Ue,{title:L?t("You can only register a single One-Time Password"):t("Click to add a {{item}} to your account",{item:t("One-Time Password")}),children:n.jsx($,{component:"span",children:n.jsx(U,{id:"one-time-password-add",variant:"outlined",color:"primary",onClick:b,disabled:L||d||a,endIcon:d?n.jsx(Be,{color:"inherit",size:20}):null,children:t("Add")})})})}),e.config===null||e.config===void 0?n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"subtitle2",children:t("The One-Time Password has not been registered if you'd like to register it click add")})}):n.jsx(S,{size:{md:6,xl:3,xs:12},children:n.jsx(Ma,{config:e.config,handleInformation:W,handleDelete:z})})]})})]})},ln=function(e){const{t}=G("settings");return n.jsxs(Ot,{children:[n.jsx(ot,{children:t(e.name)}),n.jsx(at,{value:$t(e.method),onChange:e.handleMethodChanged,row:!0,children:e.methods.map((s,l)=>{const u=$t(s);switch(s){case ae.WebAuthn:return n.jsx(Ie,{id:`method-${e.id}-default-webauthn`,control:n.jsx(We,{}),label:t("WebAuthn"),value:u},u);case ae.TOTP:return n.jsx(Ie,{id:`method-${e.id}-default-one-time-password`,control:n.jsx(We,{}),label:t("One-Time Password"),value:u},u);case ae.MobilePush:return n.jsx(Ie,{id:`method-${e.id}-default-duo`,control:n.jsx(We,{}),label:t("Mobile Push"),value:u},u);default:return null}})})]})},Xa={method:void 0};function Za(e,t){return t.type==="setMethod"?{...e,method:t.method}:e}const Ja=function(e){const{t}=G("settings"),{createErrorNotification:s}=ye(),{localStorageMethod:l,localStorageMethodAvailable:u,setLocalStorageMethod:h}=fn(),[g,m]=r.useReducer(Za,Xa),{method:o}=g,i=e.info.has_totp||e.info.has_webauthn||e.info.has_duo;r.useEffect(()=>{e.info!==void 0&&m({method:e.info.method,type:"setMethod"})},[e.info]);const a=r.useMemo(()=>i?Array.from(e.config.available_methods).filter(p=>{switch(p){case ae.WebAuthn:return e.info.has_webauthn;case ae.TOTP:return e.info.has_totp;case ae.MobilePush:return e.info.has_duo;default:return!1}}):[],[e.config,i,e.info.has_webauthn,e.info.has_totp,e.info.has_duo]),c=p=>{if(Bt(p.target.value)){const f=Ut(p.target.value);Qn(f).then(()=>{m({method:f,type:"setMethod"})}).catch(v=>{console.error(v),s(t("There was an issue updating preferred second factor method"))}).finally(()=>{e.refresh()})}},d=p=>{Bt(p.target.value)&&h(Ut(p.target.value))};return n.jsx(r.Fragment,{children:!e.config||!i?void 0:n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("Options")})}),n.jsx(S,{size:{xs:12},children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[o===void 0?null:n.jsx(S,{size:{md:4,xs:12},children:n.jsx(ln,{id:"account",name:"Default Method",method:o,methods:a,handleMethodChanged:c})}),!u||l===void 0?null:n.jsx(S,{size:{md:4,xs:12},children:n.jsx(ln,{id:"local",name:"Default Method (Browser)",method:l,methods:a,handleMethodChanged:d})})]})})]})})})},ei=function(){const{t:e}=G("settings");return n.jsx(Ae,{variant:"outlined",elevation:24,children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:e("WebAuthn Credentials")})}),n.jsx(S,{size:{xs:12},justifyContent:"center",alignItems:"center",children:n.jsxs(_,{variant:"h6",color:"secondary",children:[e("Your administrator has disabled WebAuthn preventing you from registering WebAuthn Credentials including Passkeys"),"."]})}),n.jsx(S,{size:{xs:12},justifyContent:"center",alignItems:"center",children:n.jsxs(_,{variant:"body2",children:[n.jsxs($,{component:"span",children:[e("WebAuthn Credentials are widely considered the most secure means of authentication, regardless of if they're used for Multi-Factor Authentication or Passwordless Authentication"),"."]}),n.jsxs($,{component:"span",children:[e("The decision to disable WebAuthn Credentials when Multi-Factor Authentication is enabled significantly undermines security and is highly inadvisable"),"."]})]})})]})})},ti=function(e){const{t}=G("settings"),{createErrorNotification:s,createSuccessNotification:l}=ye(),u=()=>{e.handleClose()},h=async()=>{if(!e.credential)return;const g=await Ms(e.credential.id);if(g.data.status==="KO"){g.data.elevation?s(t("You must be elevated to {{action}} a {{item}}",{action:t("delete"),item:t("WebAuthn Credential")})):g.data.authentication?s(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("delete"),item:"WebAuthn Credential"})):s(t("There was a problem {{action}} the {{item}}",{action:t("deleting"),item:t("WebAuthn Credential")}));return}l(t("Successfully {{action}} the {{item}}",{action:t("deleted"),item:t("WebAuthn Credential")})),e.handleClose()};return n.jsx(jn,{open:e.open,onConfirm:()=>h().catch(console.error),onCancel:u,title:t("Remove {{item}}",{item:t("WebAuthn Credential")}),text:t("Are you sure you want to remove the WebAuthn Credential from your account",{description:e.credential?.description})})},ni=function(e){const{t}=G("settings"),{createErrorNotification:s,createSuccessNotification:l}=ye(),[u,h]=r.useState(""),g=r.useRef(null),[m,o]=r.useState(!1),i=()=>{o(!1),h("")},a=()=>{u.length===0?o(!0):(d(u).catch(console.error),e.handleClose()),i()},c=()=>{e.handleClose(),i()},d=async p=>{if(!e.credential){s(t("An error occurred when attempting to update the WebAuthn Credential"));return}const f=await As(e.credential.id,p);if(!f){s(t("An error occurred when attempting to update the WebAuthn Credential"));return}if(f.data.status==="KO"){f.data.elevation?s(t("You must be elevated to {{action}} a {{item}}",{action:t("update"),item:t("WebAuthn Credential")})):f.data.authentication?s(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("update"),item:t("WebAuthn Credential")})):s(t("There was a problem {{action}} the {{item}}",{action:t("updating"),item:t("WebAuthn Credential")}));return}l(t("Successfully {{action}} the {{item}}",{action:t("updated"),item:t("WebAuthn Credential")})),i()};return n.jsxs(Re,{open:e.open,onClose:c,children:[n.jsx(Te,{children:t("Edit WebAuthn Credential")}),n.jsxs(ve,{children:[n.jsx(pe,{children:t("Enter a new description for this WebAuthn Credential")}),n.jsx(Oe,{inputRef:g,id:"webauthn-credential-description",label:t("Description"),variant:"standard",required:!0,value:u,error:m,fullWidth:!0,disabled:!1,slotProps:{htmlInput:{maxLength:30}},onChange:p=>{h(p.target.value.substring(0,30)),o(!1)},autoCapitalize:"none",autoComplete:"webauthn-name",onKeyDown:p=>{p.key==="Enter"&&(a(),p.preventDefault())}})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",onClick:c,children:t("Cancel")}),n.jsx(U,{id:"dialog-update",onClick:a,children:t("Update")})]})]})},si=function(e){const{t}=G("settings");return n.jsxs(Re,{open:e.open,onClose:e.handleClose,"aria-labelledby":"webauthn-credential-info-dialog-title",children:[n.jsx(Te,{id:"webauthn-credential-info-dialog-title",children:t("WebAuthn Credential Information")}),n.jsx(ve,{children:e.credential?n.jsxs(r.Fragment,{children:[n.jsx(pe,{sx:{mb:3},children:t("Extended information for WebAuthn Credential",{description:e.credential.description})}),e.credential.legacy?n.jsx(pe,{sx:{mb:3},children:n.jsx(_s,{severity:"warning",children:t("This is a legacy WebAuthn Credential if it's not operating normally you may need to delete it and register it again")})}):null,n.jsxs(S,{container:!0,spacing:2,children:[n.jsx(S,{size:{md:3},sx:{display:{md:"block",xs:"none"}},children:n.jsx(n.Fragment,{})}),n.jsx(S,{size:{xs:12},children:n.jsx(Qe,{})}),n.jsx(ue,{name:t("Description"),value:e.credential.description}),n.jsx(ue,{name:t("Relying Party ID"),value:e.credential.rpid}),n.jsx(ue,{name:t("Authenticator GUID"),value:e.credential.aaguid??t("Unknown")}),n.jsx(ue,{name:t("Attestation Type"),value:e.credential.attestation_type}),n.jsx(ue,{name:t("Attachment"),value:t(Ds(e.credential.attachment))}),n.jsx(ue,{name:t("Discoverable"),value:e.credential.discoverable?t("Yes"):t("No")}),n.jsx(ue,{name:t("User Verified"),value:e.credential.verified?t("Yes"):t("No")}),(()=>{let s;return e.credential.backup_eligible?e.credential.backup_state?s=t("Backed Up"):s=t("Eligible"):s=t("Not Eligible"),n.jsx(ue,{name:t("Backup State"),value:s})})(),n.jsx(ue,{name:t("Transports"),value:e.credential.transports===null||e.credential.transports.length===0?t("Unknown"):e.credential.transports.map(s=>Os(s)).join(", ")}),n.jsx(ue,{name:t("Clone Warning"),value:e.credential.clone_warning?t("Yes"):t("No")}),n.jsx(ue,{name:t("Usage Count"),value:`${e.credential.sign_count}`}),n.jsx(ue,{name:t("Added"),value:t("{{when, datetime}}",{formatParams:{when:it},when:new Date(e.credential.created_at)})}),n.jsx(ue,{name:t("Last Used"),value:e.credential.last_used_at?t("{{when, datetime}}",{formatParams:{when:it},when:new Date(e.credential.last_used_at)}):t("Never")})]})]}):n.jsx(pe,{sx:{mb:3},children:t("The WebAuthn Credential information is not loaded")})}),n.jsxs(Pe,{children:[e.credential?n.jsxs(r.Fragment,{children:[" ",n.jsx(lt,{variant:"contained",tooltip:t("Click to copy the {{value}}",{value:"KID"}),value:e.credential.kid.toString(),fullWidth:!1,childrenCopied:t("Copied"),children:t("KID")}),n.jsx(lt,{variant:"contained",tooltip:t("Click to copy the {{value}}",{value:t("Public Key")}),value:e.credential.public_key.toString(),fullWidth:!1,childrenCopied:t("Copied"),children:t("Public Key")})]}):void 0,n.jsx(U,{id:"dialog-close",onClick:e.handleClose,children:t("Close")})]})]})};function ue(e){return n.jsxs(S,{size:{xs:e.xs??12},children:[n.jsx(_,{display:"inline",sx:{fontWeight:"bold"},children:`${e.name}: `}),n.jsx(_,{display:"inline",children:e.value})]})}const oi=function(e){const{classes:t}=ai(),s=Et(),[l,u]=Ws(e.timeout);return r.useEffect(()=>{u()},[u]),n.jsx($,{className:t.icon,sx:{minHeight:101},children:n.jsx(Bs,{icon:n.jsx(Cs,{size:64,animated:!0,strong:!0}),children:n.jsx($s,{value:l,height:s.spacing(2)})})})},ai=Xe()(()=>({icon:{display:"inline-block"}})),ii=["Description","Verification"],ri=function(e){const{t}=G("settings"),{classes:s}=li(),{createErrorNotification:l,createSuccessNotification:u}=ye(),[h,g]=r.useState(De.WaitTouch),[m,o]=r.useState(0),[i,a]=r.useState(null),[c,d]=r.useState(null),[p,f]=r.useState(""),[v,C]=r.useState(!1),P=r.useRef(null),w=()=>{g(De.WaitTouch),a(null),o(0),d(null),f(""),C(!1)},x=r.useCallback(()=>{w(),e.setClosed()},[e]),y=r.useCallback(async()=>{if(!(!e.open||i===null)){d(i.timeout?i.timeout:null),o(1);try{g(De.WaitTouch);const T=await zs(i);if(d(null),T.result===ft.Success){if(T.response==null){l("Credential Creation Request succeeded but Registration Response is empty.");return}const I=await Ls(T.response);switch(I.status){case ft.Success:u(t("Successfully {{action}} the {{item}}",{action:t("added"),item:t("WebAuthn Credential")}));break;case ft.Failure:l(I.message);break}return}else l(t(Ns(T.result))),g(De.Failure)}catch(T){console.error(T),l(t("Failed to register your credential, the identity verification process might have timed out"))}finally{x()}}},[e.open,i,u,t,l,x]);r.useEffect(()=>{!e.open||h!==De.Failure||m!==0||x()},[e,h,m,x]),r.useEffect(()=>{(async function(){!e.open||m!==0||i===null||await y()})()},[e.open,m,i,y]);const R=r.useCallback(()=>{e.open&&(async function(){if(p.length===0||p.length>64){C(!0),l(t("The Description must be more than 1 character and less than 64 characters"));return}const T=await Fs(p);switch(T.status){case 200:T.options?a(T.options):l(t("Credential Creation Options Request succeeded but Credential Creation Options is empty"));break;case 409:C(!0),l(t("A WebAuthn Credential with that Description already exists"));break;default:l(t("Error occurred obtaining the WebAuthn Credential creation options"))}await y()})()},[l,p,y,e.open,t]),O=r.useCallback(T=>{f(T),v&&C(!1)},[v]);function E(T){switch(T){case 0:return n.jsxs($,{children:[n.jsx($,{className:s.icon,children:n.jsx(Es,{})}),n.jsx(_,{className:s.instruction,children:t("Enter a description for this WebAuthn Credential")}),n.jsx(S,{container:!0,spacing:1,children:n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{inputRef:P,id:"webauthn-credential-description",label:t("Description"),variant:"outlined",required:!0,value:p,error:v,disabled:!1,onChange:I=>O(I.target.value),autoCapitalize:"none",onKeyDown:I=>{I.key==="Enter"&&((async()=>R())(),I.preventDefault())}})})})]});case 1:return n.jsxs(r.Fragment,{children:[n.jsx($,{className:s.icon,children:c?n.jsx(oi,{timeout:c}):null}),n.jsx(_,{className:s.instruction,children:t("Touch the token on your security key")})]})}}const M=()=>{!e.open||m===1||x()};return n.jsxs(Re,{open:e.open,onClose:M,maxWidth:"xs",fullWidth:!0,children:[n.jsx(Te,{children:t("Register {{item}}",{item:t("WebAuthn Credential")})}),n.jsxs(ve,{children:[n.jsx(pe,{sx:{mb:3},children:t("This dialog handles registration of a {{item}}",{item:t("WebAuthn Credential")})}),n.jsxs(S,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},children:n.jsx(Nt,{activeStep:m,children:ii.map(T=>{const I={},A={};return n.jsx(Ye,{...I,children:n.jsx($e,{...A,children:t(T)})},T)})})}),n.jsx(S,{size:{xs:12},children:E(m)})]})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",color:m===1&&h!==De.Failure?"primary":"error",disabled:m===1&&h!==De.Failure,onClick:x,children:t("Cancel")}),m===0?n.jsx(U,{id:"dialog-next",color:p.length>0?"success":"primary",disabled:m!==0,onClick:async()=>{R()},children:t("Next")}):null]})]})},li=Xe()(e=>({icon:{paddingBottom:e.spacing(4),paddingTop:e.spacing(4)},instruction:{paddingBottom:e.spacing(4)}})),ci=function(e){const{t}=G("settings"),s=()=>{e.handleInformation(e.index)},l=()=>{e.handleEdit(e.index)},u=()=>{e.handleDelete(e.index)};return n.jsx(yn,{id:`webauthn-credential-${e.index}`,icon:n.jsx(aa,{fontSize:"large",color:"warning"}),description:e.credential.description,qualifier:` (${e.credential.attestation_type.toUpperCase()})`,created_at:new Date(e.credential.created_at),problem:e.credential.legacy,last_used_at:e.credential.last_used_at?new Date(e.credential.last_used_at):void 0,tooltipInformation:t("Display extended information for this WebAuthn Credential"),tooltipInformationProblem:t("There is an issue with this Credential to find out more click to display extended information for this WebAuthn Credential"),tooltipEdit:t("Edit this {{item}}",{item:t("WebAuthn Credential")}),tooltipDelete:t("Remove this {{item}}",{item:t("WebAuthn Credential")}),handleInformation:s,handleEdit:l,handleDelete:u})},di=function(e){return n.jsx(S,{container:!0,spacing:3,children:e.credentials.map((t,s)=>n.jsx(S,{size:{md:6,xl:3,xs:12},children:n.jsx(ci,{index:s,credential:t,handleInformation:e.handleInformation,handleEdit:e.handleEdit,handleDelete:e.handleDelete})},t.id))})},ui=function(e){const{t}=G("settings"),[s,l]=r.useState(),[u,h]=r.useState(!1),[g,m]=r.useState(!1),[o,i]=r.useState(!1),[a,c]=r.useState(!1),[d,p]=r.useState(!1),[f,v]=r.useState(-1),[C,P]=r.useState(!1),[w,x]=r.useState(!1),[y,R]=r.useState(-1),[O,E]=r.useState(!1),[M,T]=r.useState(!1),[I,A]=r.useState(-1),W=()=>{h(!1),m(!1),c(!1),x(!1),T(!1)},b=r.useCallback(()=>{W(),l(void 0),i(!1),P(!1),R(-1),E(!1),A(-1)},[]),z=r.useCallback(()=>{W(),i(!0)},[]),L=r.useCallback(()=>{W(),E(!0)},[]),k=r.useCallback(()=>{W(),P(!0)},[]),X=(j,J)=>{if(!j){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),b();return}J?re().catch(console.error).then(B=>{B&&(B.elevated||B.skip_second_factor?(l(void 0),a?z():M?L():w&&k()):m(!0))}):s&&(s.elevated||s.skip_second_factor)?(l(void 0),a?z():M?L():w&&k()):m(!0)},Q=()=>{h(!1)},ne=r.useCallback(j=>{if(!j){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),b();return}l(void 0),a?z():M?L():w&&k()},[b,z,L,k,a,M,w]),ie=r.useCallback(()=>{m(!1)},[]),re=async()=>{const j=await Dt();return l(j),j},ge=()=>{re().catch(console.error),h(!0)},le=()=>{c(!0),ge()},V=j=>{e.credentials&&(e.credentials.length+1<j||(v(j),p(!0)))},ke=j=>{e.credentials&&(e.credentials.length+1<j||(x(!0),R(j),ge()))},me=j=>{e.credentials&&(e.credentials.length+1<j||(T(!0),A(j),ge()))};return n.jsxs(r.Fragment,{children:[n.jsx(_t,{info:e.info,elevation:s,opening:u,handleClosed:X,handleOpened:Q}),n.jsx(Ft,{elevation:s,opening:g,handleClosed:ne,handleOpened:ie}),n.jsx(ri,{open:o,setClosed:()=>{b(),e.handleRefreshState()}}),n.jsx(si,{credential:f===-1||!e.credentials?void 0:e.credentials[f],open:d,handleClose:()=>{p(!1)}}),n.jsx(ni,{credential:y===-1||!e.credentials?void 0:e.credentials[y],open:C,handleClose:()=>{b(),e.handleRefreshState()}}),n.jsx(ti,{open:O,credential:I===-1||!e.credentials?void 0:e.credentials[I],handleClose:()=>{b(),e.handleRefreshState()}}),n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("WebAuthn Credentials")})}),n.jsx(S,{size:{md:2,xs:4},children:n.jsx(Ue,{title:t("Click to add a {{item}} to your account",{item:t("WebAuthn Credential")}),children:n.jsx(U,{id:"webauthn-credential-add",variant:"outlined",color:"primary",onClick:le,disabled:a||o,endIcon:a?n.jsx(Be,{color:"inherit",size:20}):null,children:t("Add")})})}),n.jsx(S,{size:{xs:12},children:e.credentials===void 0||e.credentials.length===0?n.jsx(_,{variant:"subtitle2",children:t("No WebAuthn Credentials have been registered if you'd like to register one click add")}):n.jsx(di,{credentials:e.credentials,handleInformation:V,handleEdit:ke,handleDelete:me})})]})})]})},hi=function(){const{t:e}=G("settings"),[t,s]=r.useState(0),[l,u]=r.useState(0),[h,g]=r.useState(0),{createErrorNotification:m}=ye(),[o,i,,a]=hn(),[c,d,,p]=Kn(),[f,v,,C]=ks(),{localStorageMethodAvailable:P,setLocalStorageMethod:w}=fn(),[x,y,,R]=Ia(),O=c?.has_totp??!1,E=c?.has_webauthn??!1,M=()=>{s(z=>z+1),u(z=>z+1)},T=()=>{s(z=>z+1),g(z=>z+1)},I=o?.available_methods.has(ae.WebAuthn),A=o?.available_methods.has(ae.TOTP);r.useEffect(()=>{i(),d()},[i,d,t]),r.useEffect(()=>{P&&o?.available_methods.size===1&&w([...o.available_methods][0])},[o,P,w]),r.useEffect(()=>{A&&v()},[A,v,O,h]),r.useEffect(()=>{I&&y()},[I,y,E,l]),r.useEffect(()=>{a&&m(e("There was an issue retrieving the {{item}}",{item:e("global configuration")}))},[a,m,e]),r.useEffect(()=>{p&&m(e("There was an issue retrieving the {{item}}",{item:e("user preferences")}))},[p,m,e]),r.useEffect(()=>{C&&m(e("There was an issue retrieving the {{item}}",{item:e("One-Time Password configuration")}))},[C,m,e]),r.useEffect(()=>{R&&m(e("There was an issue retrieving the {{item}}",{item:e("WebAuthn Credentials")}))},[R,m,e]);const W=()=>{d()},b=()=>!o||!c?!1:!(A||I);return n.jsxs(S,{container:!0,spacing:2,children:[b()?n.jsx(S,{size:{xs:12},display:"flex",justifyContent:"center",alignItems:"center",children:n.jsx(Ae,{children:n.jsx(_,{variant:"h6",sx:{p:6},"text-align":"center",children:e("There are no protected applications that require a second factor method")})})}):null,!b()&&A?n.jsx(S,{size:{xs:12},children:n.jsx(qa,{info:c,config:f,handleRefreshState:T})}):null,!b()||I?n.jsx(S,{size:{xs:12},children:I?n.jsx(ui,{info:c,credentials:x,handleRefreshState:M}):n.jsx(ei,{})}):null,o&&c?n.jsx(S,{size:{xs:12},children:n.jsx(Ja,{config:o,info:c,refresh:W})}):null]})},Oi=function(){const e=un(),[t,s,,l]=qn();return r.useEffect(()=>{s()},[s]),r.useEffect(()=>{(l||t&&t.authentication_level<Xn.OneFactor)&&e(jt)},[t,l,e]),n.jsx(fa,{children:n.jsxs(Zn,{children:[n.jsx(ut,{path:jt,element:n.jsx(Ta,{})}),n.jsx(ut,{path:cn,element:n.jsx(Pa,{})}),n.jsx(ut,{path:dn,element:n.jsx(hi,{})})]})})};export{Oi as default};
