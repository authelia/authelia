import{P as L,f as T,u as O,m as P,c as U,g as E,h as m,i as j,k as N,r as o,l as b,n as R,I as p,j as h,T as w}from"./index.B4PwAJYr.js";import{u as I}from"./Mounted.BG9LrPxO.js";import{M}from"./MinimalLayout.CQ9rgGVa.js";import"./usePortalStyles.D9WETlr1.js";import"./constants.BRYNkPs0.js";async function k(e){const a={};return e&&(a.targetURL=e),L(T,a)}const z=function(){const{t:e}=O(),{classes:a}=v(),r=I(),{createErrorNotification:i}=U(),s=E(m),y=j(),n=N(),[S,c]=o.useState(!1),[x,u]=o.useState(!1),[f]=b(),d=o.useCallback(async()=>{try{const t=await k(s);t!==void 0&&t.safeTargetURL&&u(!0),setTimeout(()=>{r&&c(!0)},2e3)}catch(t){console.error(t),i(e("There was an issue signing out"))}},[i,s,u,c,r,e]);if(o.useEffect(()=>{d()},[d]),S)if(s&&x)console.log("Redirecting to safe target URL: "+s),y(s);else if(console.log("Redirecting to index route"),f.has(R)){const t=new URLSearchParams;f.forEach((l,g)=>{g!==R?t.set(g,l):t.set(m,l)}),n(p,!1,!1,!1,t)}else n(p);return h.jsx(M,{title:e("Sign out"),children:h.jsxs(w,{className:a.typo,children:[e("You're being signed out and redirected"),"..."]})})},v=P()(e=>({typo:{padding:e.spacing()}}));export{z as default};
