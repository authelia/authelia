import{u as f,c as m,k as T,r,I as k,j as v,ap as g}from"./index.t7Hp6wWA.js";import{u as p}from"./hooks.Revoke.Bi0fvXLE.js";import{d as R}from"./services.UserSessionElevation.C6qbNdx2.js";const E=function(){const{t:e}=f(),{createSuccessNotification:i,createErrorNotification:o}=m(),s=p(),a=T(),t=r.useRef(null),[d,c]=r.useState(e("Revoking one-time code..."));r.useEffect(()=>()=>{t.current!==null&&(clearTimeout(t.current),t.current=null)},[]);const n=r.useCallback(()=>{t.current!==null&&clearTimeout(t.current),t.current=setTimeout(()=>{a(k,!1),t.current=null},1500)},[a]),u=r.useCallback(async()=>{if(s)try{await R(s)?i(e("Successfully revoked the One-Time Code")):o(e("Failed to revoke the One-Time Code"))}catch(l){console.error(l),o(e("An unexpected error occurred while revoking the One-Time Code"))}finally{c(e("Redirecting...")),n()}},[o,i,n,s,e]);return r.useEffect(()=>{if(!s){c(e("The One-Time Code identifier was not provided")),o(e("The One-Time Code identifier was not provided")),n();return}u()},[o,n,u,s,e]),v.jsx(g,{message:d})};export{E as default};
