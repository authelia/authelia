const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SecondFactorMethodMobilePush.N02PLYvm.js","./index.B4PwAJYr.js","../css/index.ChexMFeY.css","./FailureIcon.Dk8ko9mP.js","./SuccessIcon.DECb_tfH.js","./PushNotificationIcon.ReCAfWGw.js","../css/PushNotificationIcon.BO-74eEb.css","./Mounted.BG9LrPxO.js","./DeviceSelectionContainer.Dgn5Uh28.js","./constants.BRYNkPs0.js","./SecondFactorMethodOneTimePassword.DP2I6aJC.js","./OTPDial.CTfxwKKM.js","./TimerIcon._wOedlIX.js","../css/TimerIcon.iKRD42Bo.css","./IconWithContext.uVFIwzaz.js","./SecondFactorMethodWebAuthn.DJVFnjfH.js","./WebAuthnTryIcon.D7PvPwU3.js","./Timer.DGBZWIJf.js","./WebAuthn.CFYowaSM.js","./browserSupportsWebAuthn.Bhlk1eaM.js"])))=>i.map(i=>d[i]);
import{v as be,w as we,r,x as xe,j as n,y as H,z as oe,D as Ce,T as _,E as qe,F as Et,H as Mt,J as Nn,K as fe,M as X,N as Me,O as he,Q as jt,S as Fn,U as Wn,o as At,V as _n,W as ut,X as _t,Y as Je,Z as nt,u as G,B as $,$ as ht,a0 as dn,a1 as un,I as Rt,t as st,k as hn,m as Xe,c as Se,q as ze,L as $n,a2 as ie,_ as Dt,P as Bn,a3 as Un,a4 as Vn,G as S,a as Hn,a5 as fn,a6 as Ae,a7 as Gn,a8 as Yn,a9 as Qn,aa as Ne,ab as q,ac as Kn,ad as qn,ae as Xn,af as $t,ag as gn,ah as Bt,ai as Ut,aj as Zn,ak as Jn,al as es,b as ts,A as ns,R as ss,d as ft}from"./index.B4PwAJYr.js";import{L as Vt,c as os,u as as,i as We,g as et,D as is,m as Ht,E as rs,a as Qe,b as mn,A as ls,d as Gt,e as cs,f as ds,B as U,C as us,T as Ue,h as Pt,G as Yt}from"./constants.BRYNkPs0.js";import{g as hs,l as Ve,L as pn}from"./mui.ListItem.Xn3U-MUp.js";import{d as fs,g as gs,v as ms,a as Ot}from"./UserSessionElevation.DhZ7TtgQ.js";import{u as xn,f as ps,T as Oe,F as zt,a as ot}from"./mui.TextField.vV9oMqLc.js";import{S as it,F as xs}from"./SuccessIcon.DECb_tfH.js";import{D as Cs,g as vs,a as Re,b as ve,c as Pe,F as bs}from"./TimerIcon._wOedlIX.js";import{b as ws}from"./browserSupportsWebAuthn.Bhlk1eaM.js";import{P as Ss}from"./PasswordForm.BZRP14VW.js";import{S as Ke}from"./mui.Stack.DJ8-qWnY.js";import{P as Qt,g as ys,a as js}from"./PasswordPolicyConfiguration.BuAV1lQu.js";import{t as Tt,d as Rs,S as He,s as Ps,g as Ts,c as ks,O as Is,u as Es}from"./OTPDial.CTfxwKKM.js";import{f as Ms,I as As}from"./InformationIcon.Dl9J4f7w.js";import{S as Cn,F as Ie}from"./mui.FormControlLabel.BNP0OPtY.js";import{d as Ds,u as Os,t as zs,a as Ls,W as De,s as Ns,A as gt,f as Fs,b as Ws,g as _s}from"./WebAuthn.CFYowaSM.js";import{u as $s,L as Bs}from"./Timer.DGBZWIJf.js";import{I as Us}from"./IconWithContext.uVFIwzaz.js";import"./mui.VisibilityOff.3e7NbFT2.js";import"./Password.CmFnN_qW.js";function Vs(e){return be("MuiDialogContentText",e)}we("MuiDialogContentText",["root"]);const Hs=e=>{const{classes:t}=e,l=Ce({root:["root"]},Vs,t);return{...t,...l}},Gs=H(_,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),pe=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiDialogContentText"}),{children:u,className:h,...p}=l,f=Hs(p);return n.jsx(Gs,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:p,className:oe(f.root,h),...l,classes:f})}),Ys=e=>{const{classes:t}=e;return Ce({root:["root"]},vs,t)},Qs=H(_,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Te=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiDialogTitle"}),{className:u,id:h,...p}=l,f=l,o=Ys(f),{titleId:i=h}=r.useContext(Cs);return n.jsx(Qs,{component:"h2",className:oe(o.root,u),ownerState:f,ref:s,variant:"h6",id:h??i,...p})});function Ks(e){return be("MuiFormGroup",e)}we("MuiFormGroup",["root","row","error"]);const qs=e=>{const{classes:t,row:s,error:l}=e;return Ce({root:["root",s&&"row",l&&"error"]},Ks,t)},Xs=H("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Zs=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiFormGroup"}),{className:u,row:h=!1,...p}=l,f=xn(),o=ps({props:l,muiFormControl:f,states:["error"]}),i={...l,row:h,error:o.error},a=qs(i);return n.jsx(Xs,{className:oe(a.root,u),ownerState:i,ref:s,...p})}),Js=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]},eo=e=>{const{alignItems:t,classes:s,dense:l,disabled:u,disableGutters:h,divider:p,selected:f}=e,i=Ce({root:["root",l&&"dense",!h&&"gutters",p&&"divider",u&&"disabled",t==="flex-start"&&"alignItemsFlexStart",f&&"selected"]},hs,s);return{...s,...i}},to=H(Nn,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Js})(fe(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ve.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Ve.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Ve.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Ve.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ve.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),no=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiListItemButton"}),{alignItems:u="center",autoFocus:h=!1,component:p="div",children:f,dense:o=!1,disableGutters:i=!1,divider:a=!1,focusVisibleClassName:d,selected:c=!1,className:m,...g}=l,C=r.useContext(Vt),v=r.useMemo(()=>({dense:o||C.dense||!1,alignItems:u,disableGutters:i}),[u,C.dense,o,i]),j=r.useRef(null);Et(()=>{h&&j.current&&j.current.focus()},[h]);const b={...l,alignItems:u,dense:v.dense,disableGutters:i,divider:a,selected:c},x=eo(b),y=Mt(j,s);return n.jsx(Vt.Provider,{value:v,children:n.jsx(to,{ref:y,href:g.href||g.to,component:(g.href||g.to)&&p==="div"?"button":p,focusVisibleClassName:oe(x.focusVisible,d),ownerState:b,className:oe(x.root,m),...g,classes:x,children:f})})});function so(e){const{children:t,defer:s=!1,fallback:l=null}=e,[u,h]=r.useState(!1);return Et(()=>{s||h(!0)},[s]),r.useEffect(()=>{s&&h(!0)},[s]),u?t:l}const oo=X(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),ao=X(n.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),io=H("span",{name:"MuiRadioButtonIcon",shouldForwardProp:qe})({position:"relative",display:"flex"}),ro=H(oo,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),lo=H(ao,{name:"MuiRadioButtonIcon"})(fe(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function vn(e){const{checked:t=!1,classes:s={},fontSize:l}=e,u={...e,checked:t};return n.jsxs(io,{className:s.root,ownerState:u,children:[n.jsx(ro,{fontSize:l,className:s.background,ownerState:u}),n.jsx(lo,{fontSize:l,className:s.dot,ownerState:u})]})}const bn=r.createContext(void 0);function co(){return r.useContext(bn)}function uo(e){return be("MuiRadio",e)}const Kt=we("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ho=e=>{const{classes:t,color:s,size:l}=e,u={root:["root",`color${he(s)}`,l!=="medium"&&`size${he(l)}`]};return{...t,...Ce(u,uo,t)}},fo=H(Cn,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.size!=="medium"&&t[`size${he(s.size)}`],t[`color${he(s.color)}`]]}})(fe(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${Kt.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(jt()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(jt()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${Kt.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function go(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const mo=n.jsx(vn,{checked:!0}),po=n.jsx(vn,{}),$e=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiRadio"}),{checked:u,checkedIcon:h=mo,color:p="primary",icon:f=po,name:o,onChange:i,size:a="medium",className:d,disabled:c,disableRipple:m=!1,slots:g={},slotProps:C={},inputProps:v,...j}=l,b=xn();let x=c;b&&typeof x>"u"&&(x=b.disabled),x??=!1;const y={...l,disabled:x,disableRipple:m,color:p,size:a},P=ho(y),I=co();let k=u;const O=os(i,I&&I.onChange);let T=o;I&&(typeof k>"u"&&(k=go(I.value,l.value)),typeof T>"u"&&(T=I.name));const A=C.input??v,[z,L]=Me("root",{ref:s,elementType:fo,className:oe(P.root,d),shouldForwardComponentProp:!0,externalForwardedProps:{slots:g,slotProps:C,...j},getSlotProps:w=>({...w,onChange:(M,...F)=>{w.onChange?.(M,...F),O(M,...F)}}),ownerState:y,additionalProps:{type:"radio",icon:r.cloneElement(f,{fontSize:f.props.fontSize??a}),checkedIcon:r.cloneElement(h,{fontSize:h.props.fontSize??a}),disabled:x,name:T,checked:k,slots:g,slotProps:{input:typeof A=="function"?A(y):A}}});return n.jsx(z,{...L,classes:P})});function xo(e){return be("MuiRadioGroup",e)}we("MuiRadioGroup",["root","row","error"]);const Co=e=>{const{classes:t,row:s,error:l}=e;return Ce({root:["root",s&&"row",l&&"error"]},xo,t)},at=r.forwardRef(function(t,s){const{actions:l,children:u,className:h,defaultValue:p,name:f,onChange:o,value:i,...a}=t,d=r.useRef(null),c=Co(t),[m,g]=as({controlled:i,default:p,name:"RadioGroup"});r.useImperativeHandle(l,()=>({focus:()=>{let b=d.current.querySelector("input:not(:disabled):checked");b||(b=d.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const C=Mt(s,d),v=Fn(f),j=r.useMemo(()=>({name:v,onChange(b){g(b.target.value),o&&o(b,b.target.value)},value:m}),[v,o,g,m]);return n.jsx(bn.Provider,{value:j,children:n.jsx(Zs,{role:"radiogroup",ref:C,className:oe(c.root,h),...a,children:u})})}),dt=r.createContext({}),Lt=r.createContext({});function vo(e){return be("MuiStep",e)}we("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const bo=e=>{const{classes:t,orientation:s,alternativeLabel:l,completed:u}=e;return Ce({root:["root",s,l&&"alternativeLabel",u&&"completed"]},vo,t)},wo=H("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Ye=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStep"}),{active:u,children:h,className:p,component:f="div",completed:o,disabled:i,expanded:a=!1,index:d,last:c,...m}=l,{activeStep:g,connector:C,alternativeLabel:v,orientation:j,nonLinear:b}=r.useContext(dt);let[x=!1,y=!1,P=!1]=[u,o,i];g===d?x=u!==void 0?u:!0:!b&&g>d?y=o!==void 0?o:!0:!b&&g<d&&(P=i!==void 0?i:!0);const I=r.useMemo(()=>({index:d,last:c,expanded:a,icon:d+1,active:x,completed:y,disabled:P}),[d,c,a,x,y,P]),k={...l,active:x,orientation:j,alternativeLabel:v,completed:y,disabled:P,expanded:a,component:f},O=bo(k),T=n.jsxs(wo,{as:f,className:oe(O.root,p),ref:s,ownerState:k,...m,children:[C&&v&&d!==0?C:null,h]});return n.jsx(Lt.Provider,{value:I,children:C&&!v&&d!==0?n.jsxs(r.Fragment,{children:[C,T]}):T})}),So=X(n.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),yo=X(n.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function jo(e){return be("MuiStepIcon",e)}const mt=we("MuiStepIcon",["root","active","completed","error","text"]);var qt;const Ro=e=>{const{classes:t,active:s,completed:l,error:u}=e;return Ce({root:["root",s&&"active",l&&"completed",u&&"error"],text:["text"]},jo,t)},pt=H(Wn,{name:"MuiStepIcon",slot:"Root"})(fe(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${mt.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${mt.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${mt.error}`]:{color:(e.vars||e).palette.error.main}}))),Po=H("text",{name:"MuiStepIcon",slot:"Text"})(fe(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),To=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepIcon"}),{active:u=!1,className:h,completed:p=!1,error:f=!1,icon:o,...i}=l,a={...l,active:u,completed:p,error:f},d=Ro(a);if(typeof o=="number"||typeof o=="string"){const c=oe(h,d.root);return f?n.jsx(pt,{as:yo,className:c,ref:s,ownerState:a,...i}):p?n.jsx(pt,{as:So,className:c,ref:s,ownerState:a,...i}):n.jsxs(pt,{className:c,ref:s,ownerState:a,...i,children:[qt||(qt=n.jsx("circle",{cx:"12",cy:"12",r:"12"})),n.jsx(Po,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:a,children:o})]})}return o});function ko(e){return be("MuiStepLabel",e)}const Ee=we("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Io=e=>{const{classes:t,orientation:s,active:l,completed:u,error:h,disabled:p,alternativeLabel:f}=e;return Ce({root:["root",s,h&&"error",p&&"disabled",f&&"alternativeLabel"],label:["label",l&&"active",u&&"completed",h&&"error",p&&"disabled",f&&"alternativeLabel"],iconContainer:["iconContainer",l&&"active",u&&"completed",h&&"error",p&&"disabled",f&&"alternativeLabel"],labelContainer:["labelContainer",f&&"alternativeLabel"]},ko,t)},Eo=H("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation]]}})({display:"flex",alignItems:"center",[`&.${Ee.alternativeLabel}`]:{flexDirection:"column"},[`&.${Ee.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Mo=H("span",{name:"MuiStepLabel",slot:"Label"})(fe(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${Ee.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${Ee.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${Ee.alternativeLabel}`]:{marginTop:16},[`&.${Ee.error}`]:{color:(e.vars||e).palette.error.main}}))),Ao=H("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${Ee.alternativeLabel}`]:{paddingRight:0}}),Do=H("span",{name:"MuiStepLabel",slot:"LabelContainer"})(fe(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${Ee.alternativeLabel}`]:{textAlign:"center"}}))),Be=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepLabel"}),{children:u,className:h,componentsProps:p={},error:f=!1,icon:o,optional:i,slots:a={},slotProps:d={},StepIconComponent:c,StepIconProps:m,...g}=l,{alternativeLabel:C,orientation:v}=r.useContext(dt),{active:j,disabled:b,completed:x,icon:y}=r.useContext(Lt),P=o||y;let I=c;P&&!I&&(I=To);const k={...l,active:j,alternativeLabel:C,completed:x,disabled:b,error:f,orientation:v},O=Io(k),T={slots:a,slotProps:{stepIcon:m,...p,...d}},[A,z]=Me("root",{elementType:Eo,externalForwardedProps:{...T,...g},ownerState:k,ref:s,className:oe(O.root,h)}),[L,w]=Me("label",{elementType:Mo,externalForwardedProps:T,ownerState:k}),[M,F]=Me("stepIcon",{elementType:I,externalForwardedProps:T,ownerState:k});return n.jsxs(A,{...z,children:[P||M?n.jsx(Ao,{className:O.iconContainer,ownerState:k,children:n.jsx(M,{completed:x,active:j,error:f,icon:P,...F})}):null,n.jsxs(Do,{className:O.labelContainer,ownerState:k,children:[u?n.jsx(L,{...w,className:oe(O.label,w?.className),children:u}):null,i]})]})});Be.muiName="StepLabel";function Oo(e){return be("MuiStepConnector",e)}we("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const zo=e=>{const{classes:t,orientation:s,alternativeLabel:l,active:u,completed:h,disabled:p}=e,f={root:["root",s,l&&"alternativeLabel",u&&"active",h&&"completed",p&&"disabled"],line:["line",`line${he(s)}`]};return Ce(f,Oo,t)},Lo=H("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),No=H("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.line,t[`line${he(s.orientation)}`]]}})(fe(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Fo=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepConnector"}),{className:u,...h}=l,{alternativeLabel:p,orientation:f="horizontal"}=r.useContext(dt),{active:o,disabled:i,completed:a}=r.useContext(Lt),d={...l,alternativeLabel:p,orientation:f,active:o,completed:a,disabled:i},c=zo(d);return n.jsx(Lo,{className:oe(c.root,u),ref:s,ownerState:d,...h,children:n.jsx(No,{className:c.line,ownerState:d})})});function Wo(e){return be("MuiStepper",e)}we("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const _o=e=>{const{orientation:t,nonLinear:s,alternativeLabel:l,classes:u}=e;return Ce({root:["root",t,s&&"nonLinear",l&&"alternativeLabel"]},Wo,u)},$o=H("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.alternativeLabel&&t.alternativeLabel,s.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Bo=n.jsx(Fo,{}),Nt=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiStepper"}),{activeStep:u=0,alternativeLabel:h=!1,children:p,className:f,component:o="div",connector:i=Bo,nonLinear:a=!1,orientation:d="horizontal",...c}=l,m={...l,nonLinear:a,alternativeLabel:h,orientation:d,component:o},g=_o(m),C=r.Children.toArray(p).filter(Boolean),v=C.map((b,x)=>r.cloneElement(b,{index:x,last:x+1===C.length,...b.props})),j=r.useMemo(()=>({activeStep:u,alternativeLabel:h,connector:i,nonLinear:a,orientation:d}),[u,h,i,a,d]);return n.jsx(dt.Provider,{value:j,children:n.jsx($o,{as:o,ownerState:m,className:oe(g.root,f),ref:s,...c,children:v})})}),Uo=H("div",{name:"MuiSwipeArea",shouldForwardProp:qe})(fe(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),Vo=r.forwardRef(function(t,s){const{anchor:l,classes:u={},className:h,width:p,style:f,...o}=t,i=t;return n.jsx(Uo,{className:oe("PrivateSwipeArea-root",u.root,u[`anchor${he(l)}`],h),ref:s,style:{[We(l)?"width":"height"]:p,...f},ownerState:i,...o})}),tt=3,xt=20;let je=null;function Ct(e,t,s){return e==="right"?s.body.offsetWidth-t[0].pageX:t[0].pageX}function vt(e,t,s){return e==="bottom"?s.innerHeight-t[0].clientY:t[0].clientY}function Ge(e,t){return e?t.clientWidth:t.clientHeight}function Xt(e,t,s,l){return Math.min(Math.max(s?t-e:l+t-e,0),l)}function Ho(e,t){const s=[];for(;e&&e!==t.parentElement;){const l=nt(t).getComputedStyle(e);l.getPropertyValue("position")==="absolute"||l.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push(e),e=e.parentElement}return s}function Go({domTreeShapes:e,start:t,current:s,anchor:l}){const u={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(h=>{let p=s>=t;(l==="top"||l==="left")&&(p=!p);const f=l==="left"||l==="right"?"x":"y",o=Math.round(h[u.scrollPosition[f]]),i=o>0,a=o+h[u.clientLength[f]]<h[u.scrollLength[f]];return!!(p&&a||!p&&i)})}const Yo=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Qo=r.forwardRef(function(t,s){const l=xe({name:"MuiSwipeableDrawer",props:t}),u=At(),h={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:p="left",disableBackdropTransition:f=!1,disableDiscovery:o=!1,disableSwipeToOpen:i=Yo,hideBackdrop:a,hysteresis:d=.52,allowSwipeInChildren:c=!1,minFlingVelocity:m=450,ModalProps:{BackdropProps:g,...C}={},onClose:v,onOpen:j,open:b=!1,PaperProps:x={},SwipeAreaProps:y,swipeAreaWidth:P=20,transitionDuration:I=h,variant:k="temporary",slots:O={},slotProps:T={},...A}=l,[z,L]=r.useState(!1),w=r.useRef({isSwiping:null}),M=r.useRef(),F=r.useRef(),D=r.useRef(),B=Mt(x.ref,D),te=r.useRef(!1),ae=r.useRef();Et(()=>{ae.current=null},[b]);const re=r.useCallback((R,Z={})=>{const{mode:Q=null,changeTransition:K=!0}=Z,J=et(u,p),de=["right","bottom"].includes(J)?1:-1,E=We(p),N=E?`translate(${de*R}px, 0)`:`translate(0, ${de*R}px)`,ee=D.current.style;ee.webkitTransform=N,ee.transform=N;let ne="";if(Q&&(ne=u.transitions.create("all",_n({easing:void 0,style:void 0,timeout:I},{mode:Q}))),K&&(ee.webkitTransition=ne,ee.transition=ne),!f&&!a){const ye=F.current.style;ye.opacity=1-R/Ge(E,D.current),K&&(ye.webkitTransition=ne,ye.transition=ne)}},[p,f,a,u,I]),le=ut(R=>{if(!te.current)return;if(je=null,te.current=!1,_t.flushSync(()=>{L(!1)}),!w.current.isSwiping){w.current.isSwiping=null;return}w.current.isSwiping=null;const Z=et(u,p),Q=We(p);let K;Q?K=Ct(Z,R.changedTouches,Je(R.currentTarget)):K=vt(Z,R.changedTouches,nt(R.currentTarget));const J=Q?w.current.startX:w.current.startY,de=Ge(Q,D.current),E=Xt(K,J,b,de),N=E/de;if(Math.abs(w.current.velocity)>m&&(ae.current=Math.abs((de-E)/w.current.velocity)*1e3),b){w.current.velocity>m||N>d?v():re(0,{mode:"exit"});return}w.current.velocity<-m||1-N>d?j():re(Ge(Q,D.current),{mode:"enter"})}),ge=(R=!1)=>{if(!z){(R||!(o&&c))&&_t.flushSync(()=>{L(!0)});const Z=We(p);!b&&D.current&&re(Ge(Z,D.current)+(o?15:-xt),{changeTransition:!1}),w.current.velocity=0,w.current.lastTime=null,w.current.lastTranslate=null,w.current.paperHit=!1,te.current=!0}},ce=ut(R=>{if(!D.current||!te.current||je!==null&&je!==w.current)return;ge(!0);const Z=et(u,p),Q=We(p),K=Ct(Z,R.touches,Je(R.currentTarget)),J=vt(Z,R.touches,nt(R.currentTarget));if(b&&D.current.contains(R.target)&&je===null){const ne=Ho(R.target,D.current);if(Go({domTreeShapes:ne,start:Q?w.current.startX:w.current.startY,current:Q?K:J,anchor:p})){je=!0;return}je=w.current}if(w.current.isSwiping==null){const ne=Math.abs(K-w.current.startX),ye=Math.abs(J-w.current.startY),Ze=Q?ne>ye&&ne>tt:ye>ne&&ye>tt;if(Ze&&R.cancelable&&R.preventDefault(),Ze===!0||(Q?ye>tt:ne>tt)){if(w.current.isSwiping=Ze,!Ze){le(R);return}w.current.startX=K,w.current.startY=J,!o&&!b&&(Q?w.current.startX-=xt:w.current.startY-=xt)}}if(!w.current.isSwiping)return;const de=Ge(Q,D.current);let E=Q?w.current.startX:w.current.startY;b&&!w.current.paperHit&&(E=Math.min(E,de));const N=Xt(Q?K:J,E,b,de);if(b)if(w.current.paperHit)N===0&&(w.current.startX=K,w.current.startY=J);else if(Q?K<de:J<de)w.current.paperHit=!0,w.current.startX=K,w.current.startY=J;else return;w.current.lastTranslate===null&&(w.current.lastTranslate=N,w.current.lastTime=performance.now()+1);const ee=(N-w.current.lastTranslate)/(performance.now()-w.current.lastTime)*1e3;w.current.velocity=w.current.velocity*.4+ee*.6,w.current.lastTranslate=N,w.current.lastTime=performance.now(),R.cancelable&&R.preventDefault(),re(N)}),V=ut(R=>{if(R.defaultPrevented||R.defaultMuiPrevented||b&&(a||!F.current.contains(R.target))&&!D.current.contains(R.target))return;const Z=et(u,p),Q=We(p),K=Ct(Z,R.touches,Je(R.currentTarget)),J=vt(Z,R.touches,nt(R.currentTarget));if(!b){if(i||!(R.target===M.current||D.current?.contains(R.target)&&(typeof c=="function"?c(R,M.current,D.current):c)))return;if(Q){if(K>P)return}else if(J>P)return}R.defaultMuiPrevented=!0,je=null,w.current.startX=K,w.current.startY=J,ge()});r.useEffect(()=>{if(k==="temporary"){const R=Je(D.current);return R.addEventListener("touchstart",V),R.addEventListener("touchmove",ce,{passive:!b}),R.addEventListener("touchend",le),()=>{R.removeEventListener("touchstart",V),R.removeEventListener("touchmove",ce,{passive:!b}),R.removeEventListener("touchend",le)}}},[k,b,V,ce,le]),r.useEffect(()=>()=>{je===w.current&&(je=null)},[]),r.useEffect(()=>{b||L(!1)},[b]);const[ke,me]=Me("swipeArea",{ref:M,elementType:Vo,ownerState:l,externalForwardedProps:{slots:O,slotProps:{swipeArea:y,...T}},additionalProps:{width:P,anchor:p}});return n.jsxs(r.Fragment,{children:[n.jsx(is,{open:k==="temporary"&&z?!0:b,variant:k,ModalProps:{BackdropProps:{...g,ref:F},...k==="temporary"&&{keepMounted:!0},...C},hideBackdrop:a,anchor:p,transitionDuration:ae.current||I,onClose:v,ref:s,slots:O,slotProps:{...T,backdrop:Ht(T.backdrop??g,{ref:F}),paper:Ht(T.paper??x,{style:{pointerEvents:k==="temporary"&&!b&&!c?"none":""},ref:B})},...A}),!i&&k==="temporary"&&n.jsx(so,{children:n.jsx(ke,{...me})})]})});function Ko(e){return be("MuiSwitch",e)}const se=we("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),qo=e=>{const{classes:t,edge:s,size:l,color:u,checked:h,disabled:p}=e,f={root:["root",s&&`edge${he(s)}`,`size${he(l)}`],switchBase:["switchBase",`color${he(u)}`,h&&"checked",p&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},o=Ce(f,Ko,t);return{...t,...o}},Xo=H("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t[`edge${he(s.edge)}`],t[`size${he(s.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${se.thumb}`]:{width:16,height:16},[`& .${se.switchBase}`]:{padding:4,[`&.${se.checked}`]:{transform:"translateX(16px)"}}}}]}),Zo=H(Cn,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{[`& .${se.input}`]:t.input},s.color!=="default"&&t[`color${he(s.color)}`]]}})(fe(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${se.checked}`]:{transform:"translateX(20px)"},[`&.${se.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${se.checked} + .${se.track}`]:{opacity:.5},[`&.${se.disabled} + .${se.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${se.input}`]:{left:"-100%",width:"300%"}})),fe(({theme:e})=>({"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(jt(["light"])).map(([t])=>({props:{color:t},style:{[`&.${se.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.55)}`}},[`&.${se.checked} + .${se.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),Jo=H("span",{name:"MuiSwitch",slot:"Track"})(fe(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),ea=H("span",{name:"MuiSwitch",slot:"Thumb"})(fe(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Zt=r.forwardRef(function(t,s){const l=xe({props:t,name:"MuiSwitch"}),{className:u,color:h="primary",edge:p=!1,size:f="medium",sx:o,slots:i={},slotProps:a={},...d}=l,c={...l,color:h,edge:p,size:f},m=qo(c),g={slots:i,slotProps:a},[C,v]=Me("root",{className:oe(m.root,u),elementType:Xo,externalForwardedProps:g,ownerState:c,additionalProps:{sx:o}}),[j,b]=Me("thumb",{className:m.thumb,elementType:ea,externalForwardedProps:g,ownerState:c}),x=n.jsx(j,{...b}),[y,P]=Me("track",{className:m.track,elementType:Jo,externalForwardedProps:g,ownerState:c});return n.jsxs(C,{...v,children:[n.jsx(Zo,{type:"checkbox",icon:x,checkedIcon:x,ref:s,ownerState:c,...d,classes:{...m,root:m.switchBase},slots:{...i.switchBase&&{root:i.switchBase},...i.input&&{input:i.input}},slotProps:{...a.switchBase&&{root:typeof a.switchBase=="function"?a.switchBase(c):a.switchBase},input:{role:"switch"},...a.input&&{input:typeof a.input=="function"?a.input(c):a.input}}}),n.jsx(y,{...P})]})}),Jt=X(n.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),ta=X(n.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),en=X(n.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),na=X(n.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),wn=X(n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),sa=X(n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),oa=X(n.jsx("path",{d:"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28M3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7s-.54.11-.7-.12c-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21m6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39s-4.66 1.97-4.66 4.39c0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15m7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12M14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94s3.08 1.32 3.08 2.94c0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38"})),aa=X(n.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ia=X(n.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),ra=X(n.jsx("path",{d:"M15 21h-2v-2h2zm-2-7h-2v5h2zm8-2h-2v4h2zm-2-2h-2v2h2zM7 12H5v2h2zm-2-2H3v2h2zm7-5h2V3h-2zm-7.5-.5v3h3v-3zM9 9H3V3h6zm-4.5 7.5v3h3v-3zM9 21H3v-6h6zm7.5-16.5v3h3v-3zM21 9h-6V3h6zm-2 10v-3h-4v2h2v3h4v-2zm-2-7h-4v2h4zm-4-2H7v2h2v2h2v-2h2zm1-1V7h-2V5h-2v4zM6.75 5.25h-1.5v1.5h1.5zm0 12h-1.5v1.5h1.5zm12-12h-1.5v1.5h1.5z"})),la=X(n.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),ca=X(n.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),da=X(n.jsx("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2m0 17H7V6h10zm-1-7.95-1.41-1.41-3.54 3.54-1.41-1.41-1.41 1.41L11.05 15z"})),ua=240,ha=function(e){const{t}=G("settings"),[s,l]=r.useState(!1);r.useEffect(()=>{document.title=t("Settings - {{authelia}}",{authelia:atob(String.fromCharCode(...rs))})},[t]);const u=e.drawerWidth===void 0?ua:e.drawerWidth,h=o=>{o.nativeEvent instanceof KeyboardEvent&&o.nativeEvent.type==="keydown"&&(o.nativeEvent.key==="Tab"||o.nativeEvent.key==="Shift")||l(i=>!i)},p=window!==void 0?()=>window.document.body:void 0,f=n.jsxs($,{onClick:h,sx:{textAlign:"center"},children:[n.jsx(_,{variant:"h6",sx:{my:2},children:t("Settings")}),n.jsx(Qe,{}),n.jsx(mn,{children:fa.map(o=>n.jsx(ga,{keyname:o.keyname,text:t(o.text),pathname:o.pathname,icon:o.icon},o.keyname))})]});return n.jsxs($,{sx:{display:"flex"},children:[n.jsx(ls,{component:"nav",children:n.jsxs(Gt,{children:[n.jsx(st,{id:"settings-menu",edge:"start",color:"inherit","aria-label":"open drawer",onClick:h,sx:{mr:2},children:n.jsx(ia,{})}),n.jsx(_,{variant:"h6",component:"div",sx:{flexGrow:1,display:{xs:s?"none":"block"}},children:t("Settings")})]})}),n.jsx($,{component:"nav",children:n.jsx(Qo,{container:p,anchor:"left",open:s,onOpen:h,onClose:h,ModalProps:{keepMounted:!0},sx:{display:{xs:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:u}},children:f})}),n.jsxs($,{component:"main",sx:{flexGrow:1,p:{xs:0,sm:3}},children:[n.jsx(Gt,{}),e.children]})]})},fa=[{keyname:"overview",text:"Overview",pathname:ht,icon:n.jsx(na,{color:"primary"})},{keyname:"security",text:"Security",pathname:`${ht}${dn}`,icon:n.jsx(ca,{color:"primary"})},{keyname:"twofactor",text:"Two-Factor Authentication",pathname:`${ht}${un}`,icon:n.jsx(da,{color:"primary"})},{keyname:"close",text:"Close",pathname:Rt,icon:n.jsx(ta,{color:"error"})}],ga=function(e){const t=window.location.pathname===e.pathname||window.location.pathname===e.pathname+"/",s=hn(),l=r.useCallback(()=>{t||s(e.pathname)},[s,e,t]);return n.jsx(pn,{disablePadding:!0,onClick:l,children:n.jsxs(no,{selected:t,id:`settings-menu-${e.keyname}`,children:[e.icon?n.jsx(cs,{children:e.icon}):null,n.jsx(ds,{primary:e.text})]})})},ma=function(e){return n.jsx(Oe,{...e,slotProps:{htmlInput:{style:{textTransform:"uppercase",textAlign:"center",letterSpacing:".5rem"}}},variant:"outlined",color:"info",spellCheck:!1})},Ft=function(e){const{t}=G("settings"),{classes:s}=pa(),{createErrorNotification:l}=Se(),[u,h]=r.useState(!1),[p,f]=r.useState(!1),[o,i]=r.useState(!1),[a,d]=r.useState(!1),[c,m]=r.useState(""),[g,C]=r.useState(),[v,j]=r.useState(!1),b=r.useRef(null),x=r.useCallback(L=>{h(!1),m(""),C(void 0),j(!1),i(!1),d(!1),f(!1),e.handleClosed(L)},[e]),y=r.useCallback(async()=>{if(!g)throw new Error("The delete code was empty.");await fs(g)},[g]),P=r.useCallback(()=>{f(!0),y().catch(console.error),x(!1)},[x,y]),I=r.useCallback(()=>{d(!0),setTimeout(()=>{x(!0)},750)},[x]),k=r.useCallback(()=>{m(""),j(!0),i(!1),l(t("The One-Time Code either doesn't match the one generated or an unknown error occurred")),b.current?.focus()},[l,t]),O=r.useCallback(async()=>{if(e.elevation&&(e.elevation.elevated||e.elevation.skip_second_factor)){x(!0);return}if(u)return;const L=await gs();if(!L)throw new Error("Failed to load the data.");C(L.delete_id),e.handleOpened(),h(!0)},[x,u,e]),T=r.useCallback(async()=>{if(c==="")return;i(!0),await ms(c)?I():k()},[c,k,I]),A=r.useCallback(L=>{L.key==="Enter"&&(c.length?c.length?T():(j(!1),b.current?.focus()):j(!0))},[c.length,T]);r.useEffect(()=>{p||!e.opening||!e.elevation||O().catch(console.error)},[p,O,e.elevation,e.opening]);const z=L=>{m(L.target.value.replace(/\s/g,"")),j(!1)};return n.jsxs(Re,{id:"dialog-verify-one-time-code",open:u,onClose:P,children:[n.jsx(Te,{children:t("Identity Verification")}),a?n.jsx(ve,{children:n.jsx($,{className:s.success,sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content",padding:"5.0rem"},children:n.jsx(it,{})})}):n.jsxs(ve,{dividers:!0,children:[n.jsx(pe,{gutterBottom:!0,children:t("In order to perform this action policy enforcement requires additional identity verification and a One-Time Code has been sent to your email")}),n.jsx(pe,{gutterBottom:!0,children:t("Closing this dialog or selecting cancel will invalidate the One-Time Code")}),n.jsx($,{sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content",marginY:"2.5rem"},children:n.jsx(ma,{id:"one-time-code",label:"One-Time Code",autoFocus:!0,value:c,onChange:z,error:v,disabled:o,inputRef:b,onKeyDown:A})})]}),a?null:n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",variant:"contained",color:"error",disabled:o,onClick:P,children:t("Cancel")}),n.jsx(U,{id:"dialog-verify",variant:"contained",color:"info",disabled:o,startIcon:o?n.jsx(ze,{color:"inherit",size:20}):void 0,onClick:T,children:t("Verify")})]})]})},pa=Xe()(e=>({success:{marginBottom:e.spacing(2),flex:"0 0 100%",display:"flex",flexDirection:"column",m:"auto",width:"fit-content",marginY:"2.5rem"}})),xa=r.lazy(()=>Dt(()=>import("./SecondFactorMethodMobilePush.N02PLYvm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),Ca=r.lazy(()=>Dt(()=>import("./SecondFactorMethodOneTimePassword.DP2I6aJC.js"),__vite__mapDeps([10,1,2,11,4,12,9,13,14]),import.meta.url)),va=r.lazy(()=>Dt(()=>import("./SecondFactorMethodWebAuthn.DJVFnjfH.js"),__vite__mapDeps([15,1,2,16,3,4,12,9,13,17,18,19,14,7]),import.meta.url)),Wt=function(e){const{t}=G(["settings","portal"]),{classes:s}=ba(),[l,u]=r.useState(!1),[h,p]=r.useState(!1),[f,o]=r.useState(!1),[i,a]=r.useState(0),[d,c]=r.useState(),m=r.useCallback((I,k)=>{u(!1),a(0),p(!1),o(!1),c(void 0),e.handleClosed(I,k)},[e]),g=()=>{m(!1,!1)},C=()=>{m(!0,!1)},v=r.useCallback(async()=>{if(!(f||!e.elevation)){if((e.elevation.skip_second_factor||!e.elevation.require_second_factor)&&!e.elevation.can_skip_second_factor){m(!0,!1);return}l||(e.handleOpened(),u(!0)),e.elevation.factor_knowledge||a(1)}},[f,m,l,e]),j=()=>{y(ie.TOTP)},b=()=>{y(ie.WebAuthn)},x=()=>{y(ie.MobilePush)},y=I=>{f||(c(I),a(1))},P=()=>{o(!0),a(2),setTimeout(()=>{m(!0,!0)},1500)};return r.useEffect(()=>{f||!e.opening||!e.elevation||v().catch(console.error)},[f,v,e,e.opening]),n.jsxs(Re,{id:"dialog-verify-second-factor",open:l,onClose:g,children:[n.jsx(Te,{children:t("Identity Verification")}),n.jsxs(ve,{children:[n.jsx(pe,{gutterBottom:!0,children:t("In order to perform this action, policy enforcement requires that two-factor authentication is performed")}),n.jsxs(Nt,{activeStep:i,children:[n.jsx(Ye,{children:n.jsx(Be,{children:t("Select a Method")})},"step-1"),n.jsx(Ye,{children:n.jsx(Be,{children:t("Authenticate")})},"step-2"),n.jsx(Ye,{children:n.jsx(Be,{children:t("Completed")})},"step-3")]}),!e.elevation||!e.info?i===2?n.jsx($,{className:s.success,sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content",padding:"5.0rem"},children:n.jsx(it,{})}):n.jsx($n,{}):i===0?n.jsxs(Ke,{alignContent:"center",justifyContent:"center",alignItems:"center",spacing:2,my:8,children:[e.elevation.can_skip_second_factor?n.jsxs(r.Fragment,{children:[n.jsx(U,{variant:"outlined",onClick:C,children:t("Email One-Time Code")}),n.jsx(Qe,{}),n.jsx(_,{variant:"h5",children:t("or",{ns:"portal"})}),n.jsx(Qe,{})]}):null,e.info.has_totp?n.jsx(U,{variant:"outlined",onClick:j,children:t("One-Time Password")}):null,e.info.has_webauthn&&ws()?n.jsx(U,{variant:"outlined",onClick:b,children:t("WebAuthn")}):null,e.info.has_duo?n.jsx(U,{variant:"outlined",onClick:x,children:t("Mobile Push")}):null]}):i===1?n.jsx(Ke,{alignContent:"center",justifyContent:"center",alignItems:"center",my:8,children:e.elevation.factor_knowledge?d===ie.WebAuthn?n.jsx(va,{onSecondFactorSuccess:P,closing:f}):d===ie.TOTP?n.jsx(Ca,{onSecondFactorSuccess:P,closing:f}):d===ie.MobilePush?n.jsx(xa,{onSecondFactorSuccess:P,closing:f}):null:n.jsx(Ss,{onAuthenticationSuccess:P})}):n.jsx($,{className:s.success,sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content",padding:"5.0rem"},children:n.jsx(it,{})})]}),n.jsx(Pe,{children:n.jsx(U,{variant:"outlined",color:"error",disabled:h,onClick:g,children:t("Cancel")})})]})},ba=Xe()(e=>({success:{marginBottom:e.spacing(2),flex:"0 0 100%",display:"flex",flexDirection:"column",m:"auto",width:"fit-content",marginY:"2.5rem"}})),bt=e=>r.useCallback(t=>{t.getModifierState("CapsLock")?e(!0):e(!1)},[e]);async function wa(e,t,s){return Bn(Un,{username:e,old_password:t,new_password:s})}const Sa=e=>{const{t}=G(["settings","portal"]),{createSuccessNotification:s,createErrorNotification:l}=Se(),[u,h]=r.useState(!1),[p,f]=r.useState(""),[o,i]=r.useState(!1),[a,d]=r.useState(""),[c,m]=r.useState(!1),[g,C]=r.useState(""),[v,j]=r.useState(!1),[b,x]=r.useState(!1),[y,P]=r.useState(!1),[I,k]=r.useState(!1),O=r.useRef(null),T=r.useRef(null),A=r.useRef(null),[z,L]=r.useState({max_length:0,min_length:8,min_score:0,require_lowercase:!1,require_number:!1,require_special:!1,require_uppercase:!1,mode:Qt.Disabled}),w=r.useCallback(()=>{i(!1),m(!1),j(!1)},[]),M=r.useCallback(()=>{x(!1),P(!1),k(!1)},[]),F=r.useCallback(()=>{f(""),d(""),C(""),w(),M(),h(!1)},[w,M]),D=r.useCallback(()=>{e.setClosed(),F()},[e,F]),B=r.useCallback(async()=>{try{h(!0);const V=await ys();L(V),h(!1)}catch{l(t("There was an issue completing the process the verification token might have expired",{ns:"portal"})),h(!0)}},[l,t]);r.useEffect(()=>{B()},[B]);const te=r.useCallback(async()=>{if(h(!0),p.trim()===""||a.trim()===""||g.trim()===""){p.trim()===""&&i(!0),a.trim()===""&&m(!0),g.trim()===""&&j(!0),h(!1);return}if(a!==g){m(!0),j(!0),l(t("Passwords do not match")),h(!1);return}try{await wa(e.username,p,a),s(t("Password changed successfully")),D()}catch(V){if(w(),h(!1),Vn.isAxiosError(V)&&V.response)switch(V.response.status){case 400:m(!0),j(!0),l(t("Your supplied password does not meet the password policy requirements"));break;case 401:i(!0),l(t("Incorrect password"));break;case 500:default:l(t("There was an issue changing the password"));break}else l(t("There was an issue changing the password"));return}},[l,s,w,D,a,p,g,e.username,t]),ae=(V,ke,me)=>r.useCallback(R=>{R.key==="Enter"&&(V.length?me?me.current&&me.current.focus():te().catch(console.error):ke(!0))},[me,V.length,ke]),re=ae(p,i,T),le=ae(a,m,A),ge=ae(g,j),ce=e.disabled||!1;return n.jsxs(Re,{open:e.open,maxWidth:"xs",children:[n.jsx(Te,{children:t("Change Password")}),n.jsx(ve,{children:n.jsx(zt,{id:"change-password-form",disabled:u,children:n.jsxs(S,{container:!0,spacing:1,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},sx:{pt:3},children:n.jsx(Oe,{inputRef:O,id:"old-password",label:t("Old Password"),variant:"outlined",required:!0,value:p,error:o,disabled:ce,fullWidth:!0,onChange:V=>f(V.target.value),onFocus:()=>i(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:re,onKeyUp:bt(x),helperText:b?t("Caps Lock is on"):" ",color:b?"error":"primary",onBlur:()=>x(!1)})}),n.jsxs(S,{size:{xs:12},sx:{mt:3},children:[n.jsx(Oe,{inputRef:T,id:"new-password",label:t("New Password"),variant:"outlined",required:!0,fullWidth:!0,disabled:ce,value:a,error:c,onChange:V=>d(V.target.value),onFocus:()=>m(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:le,onKeyUp:bt(P),helperText:y?t("Caps Lock is on"):" ",color:y?"error":"primary",onBlur:()=>P(!1)}),z.mode===Qt.Disabled?null:n.jsx(js,{value:a,policy:z})]}),n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{inputRef:A,id:"repeat-new-password",label:t("Repeat New Password"),variant:"outlined",required:!0,fullWidth:!0,disabled:ce,value:g,error:v,onChange:V=>C(V.target.value),onFocus:()=>j(!1),type:"password",autoCapitalize:"off",autoComplete:"off",onKeyDown:ge,onKeyUp:bt(k),helperText:I?t("Caps Lock is on"):" ",color:I?"error":"primary",onBlur:()=>k(!1)})})]})})}),n.jsxs(Pe,{children:[n.jsx(U,{id:"password-change-dialog-cancel",color:"error",onClick:D,children:t("Cancel")}),n.jsx(U,{id:"password-change-dialog-submit",color:"primary",onClick:te,disabled:!(p.length&&a.length&&g.length)||u,startIcon:u?n.jsx(ze,{color:"inherit",size:20}):n.jsx(n.Fragment,{}),children:t("Submit")})]})]})},ya=function(){const{t:e}=G(["settings","portal"]),t=At(),{createErrorNotification:s}=Se(),[l,u,,h]=Hn(),[p,f]=r.useState(),[o,i]=r.useState(!1),[a,d]=r.useState(!1),[c,m]=r.useState(!1),[g,C]=r.useState(!1),[v,j,,b]=fn(),x=()=>{i(!1),d(!1),C(!1)},y=r.useCallback(()=>{x(),f(void 0),m(!1)},[]),P=r.useCallback(()=>{x(),m(!0)},[]),I=(M,F)=>{if(!M){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),y();return}F?A().catch(console.error).then(()=>{d(!0)}):d(!0)},k=()=>{i(!1)},O=r.useCallback(M=>{if(!M){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),y();return}f(void 0),g&&P()},[g,P,y]),T=()=>{d(!1)},A=async()=>{try{const M=await Ot();f(M)}catch{s(e("Failed to get session elevation status"))}},z=()=>{A().catch(console.error),i(!0)},L=()=>{C(!0),z()};r.useEffect(()=>{h&&s(e("There was an issue retrieving user preferences",{ns:"portal"})),b&&s(e("There was an issue retrieving configuration"))},[h,b,s,e]),r.useEffect(()=>{u(),j()},[u,j]);const w=()=>{const M=n.jsx(U,{id:"change-password-button",variant:"contained",sx:{p:1,width:"100%"},onClick:L,disabled:v?.password_change_disabled||!1,children:e("Change Password")});return v?.password_change_disabled?n.jsx(Ue,{title:e("This is disabled by your administrator"),children:n.jsx($,{component:"span",children:M})}):M};return n.jsxs(r.Fragment,{children:[n.jsx(Wt,{info:l,elevation:p,opening:o,handleClosed:I,handleOpened:k}),n.jsx(Ft,{opening:a,elevation:p,handleClosed:O,handleOpened:T}),n.jsx(Sa,{username:l?.display_name||"",open:c,setClosed:()=>{y()}}),n.jsx(us,{sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",height:"100vh",pt:8},children:n.jsx(Ae,{variant:"outlined",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"auto"},children:n.jsx(Ke,{spacing:2,sx:{m:2,width:"100%"},children:n.jsxs($,{sx:{p:{xs:1,md:3}},children:[n.jsx($,{sx:{width:"100%",p:1.25,mb:1,border:`1px solid ${t.palette.grey[600]}`,borderRadius:1},children:n.jsxs(_,{children:[e("Name"),": ",l?.display_name||""]})}),n.jsxs($,{sx:{width:"100%",p:1.25,mb:1,border:`1px solid ${t.palette.grey[600]}`,borderRadius:1},children:[n.jsxs($,{display:"flex",alignItems:"center",children:[n.jsxs(_,{sx:{mr:1},children:[e("Email"),":"]}),n.jsx(_,{children:l?.emails?.[0]||""})]}),l?.emails&&l.emails.length>1&&n.jsxs(mn,{sx:{width:"100%",padding:0,pl:4},children:[" ",l.emails.slice(1).map((M,F)=>n.jsx(pn,{sx:{paddingTop:0,paddingBottom:0},children:n.jsx(_,{children:M})},F))]})]}),n.jsx($,{sx:{p:1.25,mb:1,border:`1px solid ${t.palette.grey[600]}`,borderRadius:1},children:n.jsxs(_,{children:[e("Password"),": ●●●●●●●●"]})}),n.jsx(w,{})]})})})})]})},ja=function(e){const{t}=G("settings");return n.jsx(Ae,{variant:"outlined",children:n.jsxs($,{sx:{p:3},children:[n.jsx(_,{variant:"h4",textAlign:"center",mb:1,children:t("User Settings")}),n.jsx(_,{textAlign:"center",my:1,children:t("This is the user settings area at the present time it's very minimal but will include new features in the near future")}),n.jsx(_,{textAlign:"center",my:1,children:t("To view the currently available options select the menu icon at the top left")})]})})};async function Ra(){const e=await Gn(Yn);return e===null?[]:e}function Pa(){return Qn(Ra,[])}const wt=60,tn=3600,nn=86400,sn=2592e3,St=31536e3;function on(e){const s=(new Date().getTime()-e.getTime())/1e3;return s<wt?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/wt),"seconds"):s<tn?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/wt),"minutes"):s<nn?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/tn),"hours"):s<sn?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/nn),"days"):s<St?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/sn),"months"):s>St?new Intl.RelativeTimeFormat(Ne.languages,{numeric:"auto"}).format(0-Math.floor(s/St),"years"):"never"}function an(e){const[t,s]=r.useState(on(e));return r.useEffect(()=>{const l=setInterval(()=>{s(on(e))},6e4);return()=>clearInterval(l)},[e]),t}const Sn=function(e){const{t}=G("settings"),s=an(e.created_at),l=an(e.last_used_at||new Date(0));return n.jsx(Ae,{variant:"outlined",id:e.id,children:n.jsx($,{sx:{p:3},children:n.jsxs(S,{container:!0,size:{xs:12},alignItems:"center",height:"100%",children:[n.jsx(S,{container:!0,size:{xs:2,sm:1},marginRight:{xs:1,md:2,xl:3},children:e.icon}),n.jsx(S,{size:{xs:3,sm:6},children:n.jsxs(Ke,{direction:"column",children:[n.jsxs(Ke,{direction:"row",children:[n.jsx(_,{id:`${e.id}-description`,display:"inline",sx:{fontWeight:"bold"},children:e.description}),n.jsx(_,{display:{xs:"none",sm:"inline"},variant:"body2",px:2,children:e.qualifier})]}),n.jsx(_,{variant:"caption",display:{xs:"none",sm:"block"},children:`${t("Added")} ${s}`}),n.jsx(_,{variant:"caption",display:{xs:"none",sm:"block"},children:e.last_used_at===void 0?t("Never used"):`${t("Last Used")} ${l}`})]})}),n.jsx(S,{size:{xs:6,sm:4},children:n.jsxs(S,{container:!0,size:{xs:12},justifyContent:"flex-end",alignItems:"center",height:"100%",children:[e.handleInformation?n.jsx(S,{size:{xs:3,lg:4},children:n.jsx(rn,{tooltip:e.problem?e.tooltipInformationProblem:e.tooltipInformation,children:n.jsx(st,{color:"primary",onClick:e.handleInformation,id:`${e.id}-information`,children:e.problem?n.jsx(la,{color:"warning"}):n.jsx(aa,{})})})}):null,e.handleEdit?n.jsx(S,{size:{xs:3,lg:4},children:n.jsx(rn,{tooltip:e.tooltipEdit,children:n.jsx(st,{color:"primary",onClick:e.handleEdit,id:`${e.id}-edit`,children:n.jsx(sa,{})})})}):null,n.jsx(S,{size:{xs:3,lg:4},children:n.jsx(Ue,{title:e.tooltipDelete,children:n.jsx(st,{color:"primary",onClick:e.handleDelete,id:`${e.id}-delete`,children:n.jsx(wn,{})})})})]})})]})})})},rn=function(e){return e.tooltip!==void 0&&e.tooltip!==""?n.jsx(Ue,{title:e.tooltip,children:e.children}):e.children},rt={hour:"numeric",minute:"numeric",year:"numeric",month:"long",day:"numeric"},yn=function(e){const{t}=G("settings");return n.jsxs(Re,{open:e.open,onClose:e.handleClose,"aria-labelledby":"one-time-password-info-dialog-title",children:[n.jsx(Te,{id:"one-time-password-info-dialog-title",children:t("One-Time Password Information")}),n.jsx(ve,{children:e.config?n.jsxs(r.Fragment,{children:[n.jsx(pe,{sx:{mb:3},children:t("Extended information for One-Time Password")}),n.jsxs(S,{container:!0,spacing:2,children:[n.jsx(S,{size:{md:3},sx:{display:{xs:"none",md:"block"}},children:n.jsx(r.Fragment,{})}),n.jsx(S,{size:{xs:12},children:n.jsx(Qe,{})}),n.jsx(Fe,{name:t("Algorithm"),value:t("{{algorithm}}",{algorithm:Tt(e.config.algorithm)})}),n.jsx(Fe,{name:t("Digits"),value:t("{{digits}}",{digits:e.config.digits})}),n.jsx(Fe,{name:t("Period"),value:t("{{seconds}}",{seconds:e.config.period})}),n.jsx(Fe,{name:t("Issuer"),value:e.config.issuer}),n.jsx(Fe,{name:t("Added"),value:t("{{when, datetime}}",{when:new Date(e.config.created_at),formatParams:{when:rt}})}),n.jsx(Fe,{name:t("Last Used"),value:e.config.last_used_at?t("{{when, datetime}}",{when:new Date(e.config.last_used_at),formatParams:{when:rt}}):t("Never")})]})]}):n.jsx(pe,{sx:{mb:3},children:t("The One-Time Password information is not loaded")})}),n.jsx(Pe,{children:n.jsx(U,{id:"dialog-close",onClick:e.handleClose,children:t("Close")})})]})};function Fe(e){return n.jsxs(S,{size:{xs:e.xs!==void 0?e.xs:12},children:[n.jsx(_,{display:"inline",sx:{fontWeight:"bold"},children:`${e.name}: `}),n.jsx(_,{display:"inline",children:e.value})]})}const Ta=function(e){const{t}=G("settings"),[s,l]=r.useState(!1);return n.jsxs(r.Fragment,{children:[n.jsx(yn,{config:e.config,open:s,handleClose:()=>{l(!1)}}),n.jsx(Sn,{id:"one-time-password",icon:n.jsx(ra,{fontSize:"large"}),description:e.config.issuer,qualifier:"",created_at:e.config.created_at,last_used_at:e.config.last_used_at,handleDelete:e.handleDelete,handleInformation:e.handleInformation,tooltipInformation:t("Display extended information for this One-Time Password"),tooltipDelete:t("Remove this {{item}}",{item:t("One-Time Password")})})]})},ka=function(e){return n.jsx(Ta,{config:e.config,handleInformation:e.handleInformation,handleDelete:e.handleDelete})},jn=function(e){const{t}=G("settings"),s=()=>{e.handleClose(!1)},l=()=>{e.handleClose(!0)};return n.jsxs(Re,{open:e.open,onClose:s,children:[n.jsx(Te,{children:e.title}),n.jsx(ve,{children:n.jsx(pe,{my:2,children:e.text})}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",onClick:s,children:t("Cancel")}),n.jsx(U,{id:"dialog-delete",variant:"outlined",color:"error",startIcon:n.jsx(wn,{}),onClick:l,children:t("Remove")})]})]})},Ia=function(e){const{t}=G("settings"),{createSuccessNotification:s,createErrorNotification:l}=Se(),u=()=>{e.handleClose()},h=async()=>{const f=await Rs();if(f.data.status==="KO"){f.data.elevation?l(t("You must be elevated to {{action}} a {{item}}",{action:t("delete"),item:t("One-Time Password")})):f.data.authentication?l(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("delete"),item:t("One-Time Password")})):l(t("There was a problem {{action}} the {{item}}",{action:t("deleting"),item:t("One-Time Password")}));return}s(t("Successfully {{action}} the {{item}}",{action:t("deleted"),item:t("One-Time Password")})),e.handleClose()},p=f=>{f?h().catch(console.error):u()};return n.jsx(jn,{open:e.open,handleClose:p,title:t("Remove {{item}}",{item:t("One-Time Password")}),text:t("Are you sure you want to remove the One-Time Password from your account")})};var Ea=Object.defineProperty,lt=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,ln=(e,t,s)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,kt=(e,t)=>{for(var s in t||(t={}))Rn.call(t,s)&&ln(e,s,t[s]);if(lt)for(var s of lt(t))Pn.call(t,s)&&ln(e,s,t[s]);return e},It=(e,t)=>{var s={};for(var l in e)Rn.call(e,l)&&t.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&lt)for(var l of lt(e))t.indexOf(l)<0&&Pn.call(e,l)&&(s[l]=e[l]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Le;(e=>{const t=class W{constructor(o,i,a,d){if(this.version=o,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],o<W.MIN_VERSION||o>W.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let c=[];for(let g=0;g<this.size;g++)c.push(!1);for(let g=0;g<this.size;g++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(a);if(this.drawCodewords(m),d==-1){let g=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const v=this.getPenaltyScore();v<g&&(d=C,g=v),this.applyMask(C)}}u(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(o,i){const a=e.QrSegment.makeSegments(o);return W.encodeSegments(a,i)}static encodeBinary(o,i){const a=e.QrSegment.makeBytes(o);return W.encodeSegments([a],i)}static encodeSegments(o,i,a=1,d=40,c=-1,m=!0){if(!(W.MIN_VERSION<=a&&a<=d&&d<=W.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let g,C;for(g=a;;g++){const x=W.getNumDataCodewords(g,i)*8,y=p.getTotalBits(o,g);if(y<=x){C=y;break}if(g>=d)throw new RangeError("Data too long")}for(const x of[W.Ecc.MEDIUM,W.Ecc.QUARTILE,W.Ecc.HIGH])m&&C<=W.getNumDataCodewords(g,x)*8&&(i=x);let v=[];for(const x of o){s(x.mode.modeBits,4,v),s(x.numChars,x.mode.numCharCountBits(g),v);for(const y of x.getData())v.push(y)}u(v.length==C);const j=W.getNumDataCodewords(g,i)*8;u(v.length<=j),s(0,Math.min(4,j-v.length),v),s(0,(8-v.length%8)%8,v),u(v.length%8==0);for(let x=236;v.length<j;x^=253)s(x,8,v);let b=[];for(;b.length*8<v.length;)b.push(0);return v.forEach((x,y)=>b[y>>>3]|=x<<7-(y&7)),new W(g,i,b,c)}getModule(o,i){return 0<=o&&o<this.size&&0<=i&&i<this.size&&this.modules[i][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),i=o.length;for(let a=0;a<i;a++)for(let d=0;d<i;d++)a==0&&d==0||a==0&&d==i-1||a==i-1&&d==0||this.drawAlignmentPattern(o[a],o[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const i=this.errorCorrectionLevel.formatBits<<3|o;let a=i;for(let c=0;c<10;c++)a=a<<1^(a>>>9)*1335;const d=(i<<10|a)^21522;u(d>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,l(d,c));this.setFunctionModule(8,7,l(d,6)),this.setFunctionModule(8,8,l(d,7)),this.setFunctionModule(7,8,l(d,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,l(d,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,l(d,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,l(d,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let a=0;a<12;a++)o=o<<1^(o>>>11)*7973;const i=this.version<<12|o;u(i>>>18==0);for(let a=0;a<18;a++){const d=l(i,a),c=this.size-11+a%3,m=Math.floor(a/3);this.setFunctionModule(c,m,d),this.setFunctionModule(m,c,d)}}drawFinderPattern(o,i){for(let a=-4;a<=4;a++)for(let d=-4;d<=4;d++){const c=Math.max(Math.abs(d),Math.abs(a)),m=o+d,g=i+a;0<=m&&m<this.size&&0<=g&&g<this.size&&this.setFunctionModule(m,g,c!=2&&c!=4)}}drawAlignmentPattern(o,i){for(let a=-2;a<=2;a++)for(let d=-2;d<=2;d++)this.setFunctionModule(o+d,i+a,Math.max(Math.abs(d),Math.abs(a))!=1)}setFunctionModule(o,i,a){this.modules[i][o]=a,this.isFunction[i][o]=!0}addEccAndInterleave(o){const i=this.version,a=this.errorCorrectionLevel;if(o.length!=W.getNumDataCodewords(i,a))throw new RangeError("Invalid argument");const d=W.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][i],c=W.ECC_CODEWORDS_PER_BLOCK[a.ordinal][i],m=Math.floor(W.getNumRawDataModules(i)/8),g=d-m%d,C=Math.floor(m/d);let v=[];const j=W.reedSolomonComputeDivisor(c);for(let x=0,y=0;x<d;x++){let P=o.slice(y,y+C-c+(x<g?0:1));y+=P.length;const I=W.reedSolomonComputeRemainder(P,j);x<g&&P.push(0),v.push(P.concat(I))}let b=[];for(let x=0;x<v[0].length;x++)v.forEach((y,P)=>{(x!=C-c||P>=g)&&b.push(y[x])});return u(b.length==m),b}drawCodewords(o){if(o.length!=Math.floor(W.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let d=0;d<this.size;d++)for(let c=0;c<2;c++){const m=a-c,C=(a+1&2)==0?this.size-1-d:d;!this.isFunction[C][m]&&i<o.length*8&&(this.modules[C][m]=l(o[i>>>3],7-(i&7)),i++)}}u(i==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let a=0;a<this.size;a++){let d;switch(o){case 0:d=(a+i)%2==0;break;case 1:d=i%2==0;break;case 2:d=a%3==0;break;case 3:d=(a+i)%3==0;break;case 4:d=(Math.floor(a/3)+Math.floor(i/2))%2==0;break;case 5:d=a*i%2+a*i%3==0;break;case 6:d=(a*i%2+a*i%3)%2==0;break;case 7:d=((a+i)%2+a*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][a]&&d&&(this.modules[i][a]=!this.modules[i][a])}}getPenaltyScore(){let o=0;for(let c=0;c<this.size;c++){let m=!1,g=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[c][v]==m?(g++,g==5?o+=W.PENALTY_N1:g>5&&o++):(this.finderPenaltyAddHistory(g,C),m||(o+=this.finderPenaltyCountPatterns(C)*W.PENALTY_N3),m=this.modules[c][v],g=1);o+=this.finderPenaltyTerminateAndCount(m,g,C)*W.PENALTY_N3}for(let c=0;c<this.size;c++){let m=!1,g=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][c]==m?(g++,g==5?o+=W.PENALTY_N1:g>5&&o++):(this.finderPenaltyAddHistory(g,C),m||(o+=this.finderPenaltyCountPatterns(C)*W.PENALTY_N3),m=this.modules[v][c],g=1);o+=this.finderPenaltyTerminateAndCount(m,g,C)*W.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let m=0;m<this.size-1;m++){const g=this.modules[c][m];g==this.modules[c][m+1]&&g==this.modules[c+1][m]&&g==this.modules[c+1][m+1]&&(o+=W.PENALTY_N2)}let i=0;for(const c of this.modules)i=c.reduce((m,g)=>m+(g?1:0),i);const a=this.size*this.size,d=Math.ceil(Math.abs(i*20-a*10)/a)-1;return u(0<=d&&d<=9),o+=d*W.PENALTY_N4,u(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let a=[6];for(let d=this.size-7;a.length<o;d-=i)a.splice(1,0,d);return a}}static getNumRawDataModules(o){if(o<W.MIN_VERSION||o>W.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*o+128)*o+64;if(o>=2){const a=Math.floor(o/7)+2;i-=(25*a-10)*a-55,o>=7&&(i-=36)}return u(208<=i&&i<=29648),i}static getNumDataCodewords(o,i){return Math.floor(W.getNumRawDataModules(o)/8)-W.ECC_CODEWORDS_PER_BLOCK[i.ordinal][o]*W.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let i=[];for(let d=0;d<o-1;d++)i.push(0);i.push(1);let a=1;for(let d=0;d<o;d++){for(let c=0;c<i.length;c++)i[c]=W.reedSolomonMultiply(i[c],a),c+1<i.length&&(i[c]^=i[c+1]);a=W.reedSolomonMultiply(a,2)}return i}static reedSolomonComputeRemainder(o,i){let a=i.map(d=>0);for(const d of o){const c=d^a.shift();a.push(0),i.forEach((m,g)=>a[g]^=W.reedSolomonMultiply(m,c))}return a}static reedSolomonMultiply(o,i){if(o>>>8||i>>>8)throw new RangeError("Byte out of range");let a=0;for(let d=7;d>=0;d--)a=a<<1^(a>>>7)*285,a^=(i>>>d&1)*o;return u(a>>>8==0),a}finderPenaltyCountPatterns(o){const i=o[1];u(i<=this.size*3);const a=i>0&&o[2]==i&&o[3]==i*3&&o[4]==i&&o[5]==i;return(a&&o[0]>=i*4&&o[6]>=i?1:0)+(a&&o[6]>=i*4&&o[0]>=i?1:0)}finderPenaltyTerminateAndCount(o,i,a){return o&&(this.finderPenaltyAddHistory(i,a),i=0),i+=this.size,this.finderPenaltyAddHistory(i,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(o,i){i[0]==0&&(o+=this.size),i.pop(),i.unshift(o)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function s(f,o,i){if(o<0||o>31||f>>>o)throw new RangeError("Value out of range");for(let a=o-1;a>=0;a--)i.push(f>>>a&1)}function l(f,o){return(f>>>o&1)!=0}function u(f){if(!f)throw new Error("Assertion error")}const h=class Y{constructor(o,i,a){if(this.mode=o,this.numChars=i,this.bitData=a,i<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(o){let i=[];for(const a of o)s(a,8,i);return new Y(Y.Mode.BYTE,o.length,i)}static makeNumeric(o){if(!Y.isNumeric(o))throw new RangeError("String contains non-numeric characters");let i=[];for(let a=0;a<o.length;){const d=Math.min(o.length-a,3);s(parseInt(o.substring(a,a+d),10),d*3+1,i),a+=d}return new Y(Y.Mode.NUMERIC,o.length,i)}static makeAlphanumeric(o){if(!Y.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],a;for(a=0;a+2<=o.length;a+=2){let d=Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a))*45;d+=Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a+1)),s(d,11,i)}return a<o.length&&s(Y.ALPHANUMERIC_CHARSET.indexOf(o.charAt(a)),6,i),new Y(Y.Mode.ALPHANUMERIC,o.length,i)}static makeSegments(o){return o==""?[]:Y.isNumeric(o)?[Y.makeNumeric(o)]:Y.isAlphanumeric(o)?[Y.makeAlphanumeric(o)]:[Y.makeBytes(Y.toUtf8ByteArray(o))]}static makeEci(o){let i=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)s(o,8,i);else if(o<16384)s(2,2,i),s(o,14,i);else if(o<1e6)s(6,3,i),s(o,21,i);else throw new RangeError("ECI assignment value out of range");return new Y(Y.Mode.ECI,0,i)}static isNumeric(o){return Y.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return Y.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,i){let a=0;for(const d of o){const c=d.mode.numCharCountBits(i);if(d.numChars>=1<<c)return 1/0;a+=4+c+d.bitData.length}return a}static toUtf8ByteArray(o){o=encodeURI(o);let i=[];for(let a=0;a<o.length;a++)o.charAt(a)!="%"?i.push(o.charCodeAt(a)):(i.push(parseInt(o.substring(a+1,a+3),16)),a+=2);return i}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=h;e.QrSegment=h})(Le||(Le={}));(e=>{(t=>{const s=class{constructor(u,h){this.ordinal=u,this.formatBits=h}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),t.Ecc=s})(e.QrCode||(e.QrCode={}))})(Le||(Le={}));(e=>{(t=>{const s=class{constructor(u,h){this.modeBits=u,this.numBitsCharCount=h}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),t.Mode=s})(e.QrSegment||(e.QrSegment={}))})(Le||(Le={}));var _e=Le;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Ma={L:_e.QrCode.Ecc.LOW,M:_e.QrCode.Ecc.MEDIUM,Q:_e.QrCode.Ecc.QUARTILE,H:_e.QrCode.Ecc.HIGH},Tn=128,kn="L",In="#FFFFFF",En="#000000",Mn=!1,An=1,Aa=4,Da=0,Oa=.1;function Dn(e,t=0){const s=[];return e.forEach(function(l,u){let h=null;l.forEach(function(p,f){if(!p&&h!==null){s.push(`M${h+t} ${u+t}h${f-h}v1H${h+t}z`),h=null;return}if(f===l.length-1){if(!p)return;h===null?s.push(`M${f+t},${u+t} h1v1H${f+t}z`):s.push(`M${h+t},${u+t} h${f+1-h}v1H${h+t}z`);return}p&&h===null&&(h=f)})}),s.join("")}function On(e,t){return e.slice().map((s,l)=>l<t.y||l>=t.y+t.h?s:s.map((u,h)=>h<t.x||h>=t.x+t.w?u:!1))}function za(e,t,s,l){if(l==null)return null;const u=e.length+s*2,h=Math.floor(t*Oa),p=u/t,f=(l.width||h)*p,o=(l.height||h)*p,i=l.x==null?e.length/2-f/2:l.x*p,a=l.y==null?e.length/2-o/2:l.y*p,d=l.opacity==null?1:l.opacity;let c=null;if(l.excavate){let g=Math.floor(i),C=Math.floor(a),v=Math.ceil(f+i-g),j=Math.ceil(o+a-C);c={x:g,y:C,w:v,h:j}}const m=l.crossOrigin;return{x:i,y:a,h:o,w:f,excavation:c,opacity:d,crossOrigin:m}}function La(e,t){return t!=null?Math.max(Math.floor(t),0):e?Aa:Da}function zn({value:e,level:t,minVersion:s,includeMargin:l,marginSize:u,imageSettings:h,size:p,boostLevel:f}){let o=q.useMemo(()=>{const g=(Array.isArray(e)?e:[e]).reduce((C,v)=>(C.push(..._e.QrSegment.makeSegments(v)),C),[]);return _e.QrCode.encodeSegments(g,Ma[t],s,void 0,void 0,f)},[e,t,s,f]);const{cells:i,margin:a,numCells:d,calculatedImageSettings:c}=q.useMemo(()=>{let m=o.getModules();const g=La(l,u),C=m.length+g*2,v=za(m,p,g,h);return{cells:m,margin:g,numCells:C,calculatedImageSettings:v}},[o,p,h,l,u]);return{qrcode:o,margin:a,cells:i,numCells:d,calculatedImageSettings:c}}var Na=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Fa=q.forwardRef(function(t,s){const l=t,{value:u,size:h=Tn,level:p=kn,bgColor:f=In,fgColor:o=En,includeMargin:i=Mn,minVersion:a=An,boostLevel:d,marginSize:c,imageSettings:m}=l,C=It(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:v}=C,j=It(C,["style"]),b=m?.src,x=q.useRef(null),y=q.useRef(null),P=q.useCallback(M=>{x.current=M,typeof s=="function"?s(M):s&&(s.current=M)},[s]),[I,k]=q.useState(!1),{margin:O,cells:T,numCells:A,calculatedImageSettings:z}=zn({value:u,level:p,minVersion:a,boostLevel:d,includeMargin:i,marginSize:c,imageSettings:m,size:h});q.useEffect(()=>{if(x.current!=null){const M=x.current,F=M.getContext("2d");if(!F)return;let D=T;const B=y.current,te=z!=null&&B!==null&&B.complete&&B.naturalHeight!==0&&B.naturalWidth!==0;te&&z.excavation!=null&&(D=On(T,z.excavation));const ae=window.devicePixelRatio||1;M.height=M.width=h*ae;const re=h/A*ae;F.scale(re,re),F.fillStyle=f,F.fillRect(0,0,A,A),F.fillStyle=o,Na?F.fill(new Path2D(Dn(D,O))):T.forEach(function(le,ge){le.forEach(function(ce,V){ce&&F.fillRect(V+O,ge+O,1,1)})}),z&&(F.globalAlpha=z.opacity),te&&F.drawImage(B,z.x+O,z.y+O,z.w,z.h)}}),q.useEffect(()=>{k(!1)},[b]);const L=kt({height:h,width:h},v);let w=null;return b!=null&&(w=q.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:()=>{k(!0)},ref:y,crossOrigin:z?.crossOrigin})),q.createElement(q.Fragment,null,q.createElement("canvas",kt({style:L,height:h,width:h,ref:P,role:"img"},j)),w)});Fa.displayName="QRCodeCanvas";var Ln=q.forwardRef(function(t,s){const l=t,{value:u,size:h=Tn,level:p=kn,bgColor:f=In,fgColor:o=En,includeMargin:i=Mn,minVersion:a=An,boostLevel:d,title:c,marginSize:m,imageSettings:g}=l,C=It(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:v,cells:j,numCells:b,calculatedImageSettings:x}=zn({value:u,level:p,minVersion:a,boostLevel:d,includeMargin:i,marginSize:m,imageSettings:g,size:h});let y=j,P=null;g!=null&&x!=null&&(x.excavation!=null&&(y=On(j,x.excavation)),P=q.createElement("image",{href:g.src,height:x.h,width:x.w,x:x.x+v,y:x.y+v,preserveAspectRatio:"none",opacity:x.opacity,crossOrigin:x.crossOrigin}));const I=Dn(y,v);return q.createElement("svg",kt({height:h,width:h,viewBox:`0 0 ${b} ${b}`,ref:s,role:"img"},C),!!c&&q.createElement("title",null,c),q.createElement("path",{fill:f,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),q.createElement("path",{fill:o,d:I,shapeRendering:"crispEdges"}),P)});Ln.displayName="QRCodeSVG";const Wa=""+new URL("../media/applestore-badge.BqUv8-dZ.svg",import.meta.url).href,_a=""+new URL("../media/googleplay-badge.Bs7UQq4a.svg",import.meta.url).href,$a=function(e){const t=e.targetBlank?"_blank":void 0;return n.jsxs($,{className:e.className,children:[n.jsx(Pt,{href:e.googlePlayLink,target:t,underline:"hover",children:n.jsx($,{component:"img",src:_a,alt:"google play",width:e.iconSize})}),n.jsx(Pt,{href:e.appleStoreLink,target:t,underline:"hover",children:n.jsx($,{component:"img",src:Wa,alt:"apple store",width:e.iconSize})})]})},Ba=500,Ua=2e3,ct=function(e){const[t,s]=r.useState(!1),[l,u]=r.useState(!1),h=e.msTimeoutCopying?e.msTimeoutCopying:Ba,p=e.msTimeoutCopied?e.msTimeoutCopied:Ua,f=()=>{t||!e.value||e.value===""||(async o=>{u(!0),await navigator.clipboard.writeText(o),setTimeout(()=>{u(!1),s(!0)},h),setTimeout(()=>{s(!1)},p)})(e.value)};return e.value===null||e.value===""?n.jsx(U,{variant:e.variant?e.variant:"outlined",color:t?"success":"primary",disabled:!0,sx:e.sx,fullWidth:e.fullWidth,startIcon:l?n.jsx(ze,{color:"inherit",size:20}):t?n.jsx(Jt,{}):n.jsx(en,{}),children:t&&e.childrenCopied?e.childrenCopied:e.children}):n.jsx(Ue,{title:e.tooltip,children:n.jsx(U,{variant:e.variant?e.variant:"outlined",color:t?"success":"primary",onClick:l?void 0:f,sx:e.sx,fullWidth:e.fullWidth,startIcon:l?n.jsx(ze,{color:"inherit",size:20}):t?n.jsx(Jt,{}):n.jsx(en,{}),children:t&&e.childrenCopied?e.childrenCopied:e.children})})};async function Va(e,t,s){return Kn(qn,{algorithm:e,length:t,period:s})}const yt=["Start","Register","Confirm"],Ha=function(e){const{t}=G("settings"),{classes:s,cx:l}=Ga(),{createSuccessNotification:u,createErrorNotification:h}=Se(),[p,f]=r.useState({algorithm:"",length:6,period:30}),[o,i]=r.useState(null),[a,d]=r.useState({algorithms:[],lengths:[],periods:[]}),[c,m]=r.useState(0),[g,C]=r.useState(null),[v,j]=r.useState(null),[b,x]=r.useState(!1),[y,P]=r.useState(!1),[I,k]=r.useState(!1),[O,T]=r.useState(""),[A,z]=r.useState(He.Idle),[L,w]=r.useState(!0),[M,F]=r.useState(!1),D=r.useCallback(()=>{o&&f(o),C(null),j(null),x(!1),P(!1),k(!1),m(0),T(""),z(He.Idle),w(!0),F(!1)},[o]),B=r.useCallback(()=>{(async()=>{if(e.setClosed(),g!=="")try{await Ps()}catch(E){console.error(E)}D()})()},[e,g,D]),te=r.useCallback(()=>{F(!0),setTimeout(()=>{u(t("Successfully {{action}} the {{item}}",{action:t("added"),item:t("One-Time Password")})),e.setClosed(),D()},750)},[u,e,D,t]),ae=()=>{e.open&&B()};r.useEffect(()=>{!e.open||c!==0||o!==null||(async()=>{const E=await Ts(),N={algorithm:Tt(E.algorithm),length:E.length,period:E.period};d({algorithms:E.algorithms.map(ee=>Tt(ee)),lengths:E.lengths,periods:E.periods}),i(N),f(N)})()},[e.open,c,o,p]);const re=r.useCallback(()=>{c!==0&&(P(!1),m(E=>E-1))},[c]),le=r.useCallback(()=>{c!==yt.length-1&&(P(!1),m(E=>E+1))},[c]);r.useEffect(()=>{!e.open||c!==1||(async()=>{x(!0);try{const E=await Va(p.algorithm,p.length,p.period);C(E.otpauth_url),j(E.base32_secret)}catch(E){console.error(E),E.message.includes("Request failed with status code 403")?h(t("You must use the code from the same device and browser that initiated the process")):h(t("Failed to register device, the provided code is expired or has already been used")),k(!0)}x(!1)})()},[c,h,p,e.open,t]),r.useEffect(()=>{!e.open||c!==2||A===He.InProgress||O.length!==p.length||(async()=>{z(He.InProgress);try{const E=O;T(""),await ks(E),te()}catch(E){console.error(E),z(He.Failure)}})()},[c,A,O,O.length,te,e.open,p.length]);const ge=(E,N)=>{f(ee=>({...ee,algorithm:N})),E.preventDefault()},ce=(E,N)=>{f(ee=>({...ee,length:parseInt(N)})),E.preventDefault()},V=(E,N)=>{f(ee=>({...ee,period:parseInt(N)})),E.preventDefault()},ke=()=>{P(E=>!E)},me=o!==null&&(a.algorithms.length!==1||a.lengths.length!==1||a.periods.length!==1),R=o===null||a.algorithms.length<=1&&a.lengths.length<=1&&a.periods.length<=1,Z=me&&a.algorithms.length<=1,Q=me&&a.lengths.length<=1,K=me&&a.periods.length<=1,J=b||I?s.fuzzy:void 0;function de(E){switch(E){case 0:return n.jsx(r.Fragment,{children:o===null?n.jsx(S,{size:{xs:12},my:3,children:n.jsx(_,{children:"Loading..."})}):n.jsxs(S,{container:!0,children:[n.jsx(S,{size:{xs:12},my:3,children:n.jsx(_,{children:t("To begin select next")})}),n.jsx(S,{size:{xs:12},hidden:R,children:n.jsx(Ie,{disabled:R,control:n.jsx(Zt,{id:"one-time-password-advanced",checked:y,onChange:ke}),label:t("Advanced")})}),n.jsx(S,{size:{xs:12},hidden:R||!y,justifyContent:"center",alignItems:"center",children:n.jsxs(zt,{fullWidth:!0,children:[Z?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-algorithms",children:t("Algorithm")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-algorithms",value:p.algorithm,sx:{justifyContent:"center"},onChange:ge,children:a.algorithms.map(N=>n.jsx(Ie,{value:N,control:n.jsx($e,{id:`one-time-password-algorithm-${N}`}),label:N},N))})]}),Q?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-lengths",children:t("Length")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-lengths",value:p.length.toString(),sx:{justifyContent:"center"},onChange:ce,children:a.lengths.map(N=>n.jsx(Ie,{value:N.toString(),control:n.jsx($e,{id:`one-time-password-length-${N.toString()}`}),label:N.toString()},N.toString()))})]}),K?null:n.jsxs(r.Fragment,{children:[n.jsx(ot,{id:"lbl-adv-periods",children:t("Seconds")}),n.jsx(at,{row:!0,"aria-labelledby":"lbl-adv-periods",value:p.period.toString(),sx:{justifyContent:"center"},onChange:V,children:a.periods.map(N=>n.jsx(Ie,{value:N.toString(),control:n.jsx($e,{id:`one-time-password-period-${N.toString()}`}),label:N.toString()},N.toString()))})]})]})})]})});case 1:return n.jsxs(r.Fragment,{children:[n.jsx(S,{size:{xs:12},my:2,children:n.jsx(Ie,{control:n.jsx(Zt,{id:"qr-toggle",checked:L,onChange:()=>{w(N=>!N)}}),label:t("QR Code")})}),n.jsx(S,{size:{xs:12},hidden:!L,children:n.jsx($,{className:l(J,s.qrcodeContainer),children:g!==null?n.jsxs(Pt,{href:g,underline:"hover",children:[n.jsx(Ln,{value:g,className:s.qrcode,size:200}),!I&&b?n.jsx(ze,{className:s.loader,size:128}):null,I?n.jsx(xs,{className:s.failureIcon,icon:Ms}):null]}):null})}),n.jsx(S,{size:{xs:12},hidden:L,children:n.jsxs(S,{container:!0,spacing:2,justifyContent:"center",children:[n.jsx(S,{size:{xs:4},children:n.jsx(ct,{tooltip:t("Click to Copy"),value:g,childrenCopied:t("Copied"),fullWidth:!0,children:t("URI")})}),n.jsx(S,{size:{xs:4},children:n.jsx(ct,{tooltip:t("Click to Copy"),value:v,childrenCopied:t("Copied"),fullWidth:!0,children:t("Secret")})}),n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{id:"secret-url",label:t("Secret"),className:s.secret,value:g===null?"":g,multiline:!0,slotProps:{input:{readOnly:!0}}})})]})}),n.jsx(S,{size:{xs:12},sx:{display:{xs:"none",md:"block"}},children:n.jsxs($,{children:[n.jsx(_,{className:s.googleAuthenticatorText,children:t("Need Google Authenticator?")}),n.jsx($a,{iconSize:110,targetBlank:!0,className:s.googleAuthenticatorBadges,googlePlayLink:Yt.googlePlay,appleStoreLink:Yt.appleStore})]})})]});case 2:return n.jsx(r.Fragment,{children:n.jsx(S,{size:{xs:12},paddingY:4,children:M?n.jsx($,{className:s.success,children:n.jsx(it,{})}):n.jsx(Is,{passcode:O,state:A,digits:p.length,period:p.period,onChange:T})})})}}return n.jsxs(Re,{open:e.open,onClose:ae,fullWidth:!0,children:[n.jsx(Te,{children:t("Register {{item}}",{item:t("One-Time Password")})}),n.jsxs(ve,{children:[n.jsx(pe,{sx:{mb:3},children:t("This dialog handles registration of a {{item}}",{item:t("One-Time Password")})}),n.jsxs(S,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},children:n.jsx(Nt,{activeStep:c,children:yt.map((E,N)=>{const ee={},ne={};return n.jsx(Ye,{...ee,children:n.jsx(Be,{...ne,children:t(E)})},E)})})}),n.jsx(S,{size:{xs:12},children:n.jsx(S,{container:!0,spacing:1,justifyContent:"center",children:de(c)})})]})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-previous",color:"primary",onClick:re,disabled:c===0,children:t("Previous")}),n.jsx(U,{id:"dialog-cancel",color:"error",onClick:B,children:t("Cancel")}),n.jsx(U,{id:"dialog-next",color:"primary",onClick:le,disabled:c===yt.length-1,children:t("Next")})]})]})},Ga=Xe()(e=>({qrcode:{marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(),backgroundColor:"white"},fuzzy:{filter:"blur(10px)"},secret:{marginTop:e.spacing(1),marginBottom:e.spacing(1),width:"256px"},googleAuthenticatorText:{fontSize:e.typography.fontSize*.8},googleAuthenticatorBadges:{},qrcodeContainer:{position:"relative",display:"inline-block"},loader:{position:"absolute",top:"calc(128px - 64px)",left:"calc(128px - 64px)",color:"rgba(255, 255, 255, 0.5)"},failureIcon:{position:"absolute",top:"calc(128px - 64px)",left:"calc(128px - 64px)",color:Xn[400],fontSize:"8rem"},success:{marginBottom:e.spacing(2),flex:"0 0 100%"}})),Ya=function(e){const{t}=G("settings"),[s,l]=r.useState(),[u,h]=r.useState(!1),[p,f]=r.useState(!1),[o,i]=r.useState(!1),[a,d]=r.useState(!1),[c,m]=r.useState(!1),[g,C]=r.useState(!1),[v,j]=r.useState(!1),b=()=>{f(!1),i(!1),m(!1),j(!1)},x=r.useCallback(()=>{b(),l(void 0),d(!1),C(!1)},[]),y=r.useCallback(()=>{b(),d(!0)},[]),P=r.useCallback(()=>{b(),C(!0)},[]),I=(D,B)=>{if(!D){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),x();return}B?A().catch(console.error).then(()=>{i(!0)}):i(!0)},k=()=>{f(!1)},O=r.useCallback(D=>{if(!D){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),x();return}l(void 0),c?y():v&&P()},[v,c,P,y,x]),T=()=>{i(!1)},A=async()=>{const D=await Ot();l(D)},z=()=>{A().catch(console.error),f(!0)},L=()=>{h(!0)},w=()=>{m(!0),z()},M=()=>{e.config&&(j(!0),z())},F=e.config!==null&&e.config!==void 0;return n.jsxs(r.Fragment,{children:[n.jsx(Wt,{info:e.info,elevation:s,opening:p,handleClosed:I,handleOpened:k}),n.jsx(Ft,{opening:o,elevation:s,handleClosed:O,handleOpened:T}),n.jsx(Ha,{open:a,setClosed:()=>{x(),e.handleRefreshState()}}),n.jsx(yn,{open:u,handleClose:()=>{h(!1)},config:e.config}),n.jsx(Ia,{open:g,handleClose:()=>{x(),e.handleRefreshState()}}),n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("One-Time Password")})}),n.jsx(S,{size:{xs:12},children:n.jsx(Ue,{title:F?t("You can only register a single One-Time Password"):t("Click to add a {{item}} to your account",{item:t("One-Time Password")}),children:n.jsx($,{component:"span",children:n.jsx(U,{id:"one-time-password-add",variant:"outlined",color:"primary",onClick:w,disabled:F||c||a,endIcon:c?n.jsx(ze,{color:"inherit",size:20}):null,children:t("Add")})})})}),e.config===null||e.config===void 0?n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"subtitle2",children:t("The One-Time Password has not been registered if you'd like to register it click add")})}):n.jsx(S,{size:{xs:12,md:6,xl:3},children:n.jsx(ka,{config:e.config,handleInformation:L,handleRefresh:e.handleRefreshState,handleDelete:M})})]})})]})},cn=function(e){const{t}=G("settings");return n.jsxs(zt,{children:[n.jsx(ot,{children:t(e.name)}),n.jsx(at,{value:$t(e.method),onChange:e.handleMethodChanged,row:!0,children:e.methods.map((s,l)=>{const u=$t(s);switch(s){case ie.WebAuthn:return n.jsx(Ie,{id:`method-${e.id}-default-webauthn`,control:n.jsx($e,{}),label:t("WebAuthn"),value:u},l);case ie.TOTP:return n.jsx(Ie,{id:`method-${e.id}-default-one-time-password`,control:n.jsx($e,{}),label:t("One-Time Password"),value:u},l);case ie.MobilePush:return n.jsx(Ie,{id:`method-${e.id}-default-duo`,control:n.jsx($e,{}),label:t("Mobile Push"),value:u},l);default:return n.jsx(r.Fragment,{})}})})]})},Qa=function(e){const{t}=G("settings"),{createErrorNotification:s}=Se(),{localStorageMethod:l,setLocalStorageMethod:u,localStorageMethodAvailable:h}=gn(),[p,f]=r.useState(),[o,i]=r.useState([]),a=e.info.has_totp||e.info.has_webauthn||e.info.has_duo;r.useEffect(()=>{e.info!==void 0&&f(e.info.method)},[e.info]),r.useEffect(()=>{if(!a)return;let m=[];Array.from(e.config.available_methods).forEach(C=>{if(!m.includes(C))switch(C){case ie.WebAuthn:e.info.has_webauthn&&m.push(C);break;case ie.TOTP:e.info.has_totp&&m.push(C);break;case ie.MobilePush:e.info.has_duo&&m.push(C);break}}),i(m)},[e.config,a,e.info.has_webauthn,e.info.has_totp,e.info.has_duo]);const d=m=>{if(Bt(m.target.value)){const g=Ut(m.target.value);Zn(g).catch(C=>{console.error(C),s(t("There was an issue updating preferred second factor method"))}).then(()=>{f(g)}).finally(()=>{e.refresh()})}},c=m=>{Bt(m.target.value)&&u(Ut(m.target.value))};return n.jsx(r.Fragment,{children:!e.config||!a?void 0:n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("Options")})}),n.jsx(S,{size:{xs:12},children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[p===void 0?null:n.jsx(S,{size:{xs:12,md:4},children:n.jsx(cn,{id:"account",name:"Default Method",method:p,methods:o,handleMethodChanged:d})}),!h||l===void 0?null:n.jsx(S,{size:{xs:12,md:4},children:n.jsx(cn,{id:"local",name:"Default Method (Browser)",method:l,methods:o,handleMethodChanged:c})})]})})]})})})},Ka=function(e){const{t}=G("settings");return n.jsx(Ae,{variant:"outlined",elevation:24,children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("WebAuthn Credentials")})}),n.jsx(S,{size:{xs:12},justifyContent:"center",alignItems:"center",children:n.jsxs(_,{variant:"h6",color:"secondary",children:[t("Your administrator has disabled WebAuthn preventing you from registering WebAuthn Credentials including Passkeys"),"."]})}),n.jsx(S,{size:{xs:12},justifyContent:"center",alignItems:"center",children:n.jsxs(_,{variant:"body2",children:[n.jsxs($,{component:"span",children:[t("WebAuthn Credentials are widely considered the most secure means of authentication, regardless of if they're used for Multi-Factor Authentication or Passwordless Authentication"),"."]}),n.jsxs($,{component:"span",children:[t("The decision to disable WebAuthn Credentials when Multi-Factor Authentication is enabled significantly undermines security and is highly inadvisable"),"."]})]})})]})})},qa=function(e){const{t}=G("settings"),{createSuccessNotification:s,createErrorNotification:l}=Se(),u=()=>{e.handleClose()},h=async()=>{if(!e.credential)return;const f=await Ds(e.credential.id);if(f.data.status==="KO"){f.data.elevation?l(t("You must be elevated to {{action}} a {{item}}",{action:t("delete"),item:t("WebAuthn Credential")})):f.data.authentication?l(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("delete"),item:"WebAuthn Credential"})):l(t("There was a problem {{action}} the {{item}}",{action:t("deleting"),item:t("WebAuthn Credential")}));return}s(t("Successfully {{action}} the {{item}}",{action:t("deleted"),item:t("WebAuthn Credential")})),e.handleClose()},p=f=>{f?h().catch(console.error):u()};return n.jsx(jn,{open:e.open,handleClose:p,title:t("Remove {{item}}",{item:t("WebAuthn Credential")}),text:t("Are you sure you want to remove the WebAuthn Credential from your account",{description:e.credential?.description})})},Xa=function(e){const{t}=G("settings"),{createSuccessNotification:s,createErrorNotification:l}=Se(),[u,h]=r.useState(""),p=r.useRef(null),[f,o]=r.useState(!1),i=()=>{o(!1),h("")},a=()=>{u.length?(c(u).catch(console.error),e.handleClose()):o(!0),i()},d=()=>{e.handleClose(),i()},c=async m=>{if(!e.credential){l(t("An error occurred when attempting to update the WebAuthn Credential"));return}const g=await Os(e.credential.id,m);if(!g){l(t("An error occurred when attempting to update the WebAuthn Credential"));return}if(g.data.status==="KO"){g.data.elevation?l(t("You must be elevated to {{action}} a {{item}}",{action:t("update"),item:t("WebAuthn Credential")})):g.data.authentication?l(t("You must have a higher authentication level to {{action}} a {{item}}",{action:t("update"),item:t("WebAuthn Credential")})):l(t("There was a problem {{action}} the {{item}}",{action:t("updating"),item:t("WebAuthn Credential")}));return}s(t("Successfully {{action}} the {{item}}",{action:t("updated"),item:t("WebAuthn Credential")})),i()};return n.jsxs(Re,{open:e.open,onClose:d,children:[n.jsx(Te,{children:t("Edit WebAuthn Credential")}),n.jsxs(ve,{children:[n.jsx(pe,{children:t("Enter a new description for this WebAuthn Credential")}),n.jsx(Oe,{autoFocus:!0,inputRef:p,id:"webauthn-credential-description",label:t("Description"),variant:"standard",required:!0,value:u,error:f,fullWidth:!0,disabled:!1,slotProps:{htmlInput:{maxLength:30}},onChange:m=>{h(m.target.value.substring(0,30)),o(!1)},autoCapitalize:"none",autoComplete:"webauthn-name",onKeyDown:m=>{m.key==="Enter"&&(a(),m.preventDefault())}})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",onClick:d,children:t("Cancel")}),n.jsx(U,{id:"dialog-update",onClick:a,children:t("Update")})]})]})},Za=function(e){const{t}=G("settings");return n.jsxs(Re,{open:e.open,onClose:e.handleClose,"aria-labelledby":"webauthn-credential-info-dialog-title",children:[n.jsx(Te,{id:"webauthn-credential-info-dialog-title",children:t("WebAuthn Credential Information")}),n.jsx(ve,{children:e.credential?n.jsxs(r.Fragment,{children:[n.jsx(pe,{sx:{mb:3},children:t("Extended information for WebAuthn Credential",{description:e.credential.description})}),e.credential.legacy?n.jsx(pe,{sx:{mb:3},children:n.jsx(Jn,{severity:"warning",children:t("This is a legacy WebAuthn Credential if it's not operating normally you may need to delete it and register it again")})}):null,n.jsxs(S,{container:!0,spacing:2,children:[n.jsx(S,{size:{md:3},sx:{display:{xs:"none",md:"block"}},children:n.jsx(r.Fragment,{})}),n.jsx(S,{size:{xs:12},children:n.jsx(Qe,{})}),n.jsx(ue,{name:t("Description"),value:e.credential.description}),n.jsx(ue,{name:t("Relying Party ID"),value:e.credential.rpid}),n.jsx(ue,{name:t("Authenticator GUID"),value:e.credential.aaguid===void 0?t("Unknown"):e.credential.aaguid}),n.jsx(ue,{name:t("Attestation Type"),value:e.credential.attestation_type}),n.jsx(ue,{name:t("Attachment"),value:t(zs(e.credential.attachment))}),n.jsx(ue,{name:t("Discoverable"),value:e.credential.discoverable?t("Yes"):t("No")}),n.jsx(ue,{name:t("User Verified"),value:e.credential.verified?t("Yes"):t("No")}),n.jsx(ue,{name:t("Backup State"),value:e.credential.backup_eligible?e.credential.backup_state?t("Backed Up"):t("Eligible"):t("Not Eligible")}),n.jsx(ue,{name:t("Transports"),value:e.credential.transports===null||e.credential.transports.length===0?t("Unknown"):e.credential.transports.map(s=>Ls(s)).join(", ")}),n.jsx(ue,{name:t("Clone Warning"),value:e.credential.clone_warning?t("Yes"):t("No")}),n.jsx(ue,{name:t("Usage Count"),value:`${e.credential.sign_count}`}),n.jsx(ue,{name:t("Added"),value:t("{{when, datetime}}",{when:new Date(e.credential.created_at),formatParams:{when:rt}})}),n.jsx(ue,{name:t("Last Used"),value:e.credential.last_used_at?t("{{when, datetime}}",{when:new Date(e.credential.last_used_at),formatParams:{when:rt}}):t("Never")})]})]}):n.jsx(pe,{sx:{mb:3},children:t("The WebAuthn Credential information is not loaded")})}),n.jsxs(Pe,{children:[e.credential?n.jsxs(r.Fragment,{children:[" ",n.jsx(ct,{variant:"contained",tooltip:t("Click to copy the {{value}}",{value:"KID"}),value:e.credential.kid.toString(),fullWidth:!1,childrenCopied:t("Copied"),children:t("KID")}),n.jsx(ct,{variant:"contained",tooltip:t("Click to copy the {{value}}",{value:t("Public Key")}),value:e.credential.public_key.toString(),fullWidth:!1,childrenCopied:t("Copied"),children:t("Public Key")})]}):void 0,n.jsx(U,{id:"dialog-close",onClick:e.handleClose,children:t("Close")})]})]})};function ue(e){return n.jsxs(S,{size:{xs:e.xs!==void 0?e.xs:12},children:[n.jsx(_,{display:"inline",sx:{fontWeight:"bold"},children:`${e.name}: `}),n.jsx(_,{display:"inline",children:e.value})]})}const Ja=function(e){const{classes:t}=ei(),s=At(),[l,u]=$s(e.timeout);return r.useEffect(()=>{u()},[u]),n.jsx($,{className:t.icon,sx:{minHeight:101},children:n.jsx(Us,{icon:n.jsx(bs,{size:64,animated:!0,strong:!0}),children:n.jsx(Bs,{value:l,height:s.spacing(2)})})})},ei=Xe()(e=>({icon:{display:"inline-block"}})),ti=["Description","Verification"],ni=function(e){const{t}=G("settings"),{classes:s}=si(),{createSuccessNotification:l,createErrorNotification:u}=Se(),[h,p]=r.useState(De.WaitTouch),[f,o]=r.useState(0),[i,a]=r.useState(null),[d,c]=r.useState(null),[m,g]=r.useState(""),[C,v]=r.useState(!1),j=r.useRef(null),b=()=>{p(De.WaitTouch),a(null),o(0),c(null),g(""),v(!1)},x=r.useCallback(()=>{b(),e.setClosed()},[e]),y=r.useCallback(async()=>{if(!(!e.open||i===null)){c(i.timeout?i.timeout:null),o(1);try{p(De.WaitTouch);const T=await Ns(i);if(c(null),T.result===gt.Success){if(T.response==null)throw new Error("Credential Creation Request succeeded but Registration Response is empty.");const A=await Fs(T.response);switch(A.status){case gt.Success:l(t("Successfully {{action}} the {{item}}",{action:t("added"),item:t("WebAuthn Credential")}));break;case gt.Failure:u(A.message);break}return}else u(t(Ws(T.result))),p(De.Failure)}catch(T){console.error(T),u(t("Failed to register your credential, the identity verification process might have timed out"))}finally{x()}}},[e.open,i,l,t,u,x]);r.useEffect(()=>{!e.open||h!==De.Failure||f!==0||x()},[e,h,f,x]),r.useEffect(()=>{(async function(){!e.open||f!==0||i===null||await y()})()},[e.open,f,i,y]);const P=r.useCallback(()=>{e.open&&(async function(){if(m.length===0||m.length>64){v(!0),u(t("The Description must be more than 1 character and less than 64 characters"));return}const T=await _s(m);switch(T.status){case 200:T.options?a(T.options):u(t("Credential Creation Options Request succeeded but Credential Creation Options is empty"));break;case 409:v(!0),u(t("A WebAuthn Credential with that Description already exists"));break;default:u(t("Error occurred obtaining the WebAuthn Credential creation options"))}await y()})()},[u,m,y,e.open,t]),I=r.useCallback(T=>{g(T),C&&v(!1)},[C]);function k(T){switch(T){case 0:return n.jsxs($,{children:[n.jsx($,{className:s.icon,children:n.jsx(As,{})}),n.jsx(_,{className:s.instruction,children:t("Enter a description for this WebAuthn Credential")}),n.jsx(S,{container:!0,spacing:1,children:n.jsx(S,{size:{xs:12},children:n.jsx(Oe,{inputRef:j,id:"webauthn-credential-description",label:t("Description"),variant:"outlined",required:!0,value:m,error:C,disabled:!1,onChange:A=>I(A.target.value),autoCapitalize:"none",onKeyDown:A=>{A.key==="Enter"&&((async()=>P())(),A.preventDefault())}})})})]});case 1:return n.jsxs(r.Fragment,{children:[n.jsx($,{className:s.icon,children:d!==null?n.jsx(Ja,{timeout:d}):null}),n.jsx(_,{className:s.instruction,children:t("Touch the token on your security key")})]})}}const O=()=>{!e.open||f===1||x()};return n.jsxs(Re,{open:e.open,onClose:O,maxWidth:"xs",fullWidth:!0,children:[n.jsx(Te,{children:t("Register {{item}}",{item:t("WebAuthn Credential")})}),n.jsxs(ve,{children:[n.jsx(pe,{sx:{mb:3},children:t("This dialog handles registration of a {{item}}",{item:t("WebAuthn Credential")})}),n.jsxs(S,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",textAlign:"center",children:[n.jsx(S,{size:{xs:12},children:n.jsx(Nt,{activeStep:f,children:ti.map((T,A)=>{const z={},L={};return n.jsx(Ye,{...z,children:n.jsx(Be,{...L,children:t(T)})},T)})})}),n.jsx(S,{size:{xs:12},children:k(f)})]})]}),n.jsxs(Pe,{children:[n.jsx(U,{id:"dialog-cancel",color:f===1&&h!==De.Failure?"primary":"error",disabled:f===1&&h!==De.Failure,onClick:x,children:t("Cancel")}),f===0?n.jsx(U,{id:"dialog-next",color:m.length!==0?"success":"primary",disabled:f!==0,onClick:async()=>{P()},children:t("Next")}):null]})]})},si=Xe()(e=>({icon:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},instruction:{paddingBottom:e.spacing(4)}})),oi=function(e){const{t}=G("settings"),s=()=>{e.handleInformation(e.index)},l=()=>{e.handleEdit(e.index)},u=()=>{e.handleDelete(e.index)};return n.jsx(Sn,{id:`webauthn-credential-${e.index}`,icon:n.jsx(oa,{fontSize:"large",color:"warning"}),description:e.credential.description,qualifier:` (${e.credential.attestation_type.toUpperCase()})`,created_at:new Date(e.credential.created_at),problem:e.credential.legacy,last_used_at:e.credential.last_used_at?new Date(e.credential.last_used_at):void 0,tooltipInformation:t("Display extended information for this WebAuthn Credential"),tooltipInformationProblem:t("There is an issue with this Credential to find out more click to display extended information for this WebAuthn Credential"),tooltipEdit:t("Edit this {{item}}",{item:t("WebAuthn Credential")}),tooltipDelete:t("Remove this {{item}}",{item:t("WebAuthn Credential")}),handleInformation:s,handleEdit:l,handleDelete:u})},ai=function(e){return n.jsx(S,{container:!0,spacing:3,children:e.credentials.map((t,s)=>n.jsx(S,{size:{xs:12,md:6,xl:3},children:n.jsx(oi,{index:s,credential:t,handleInformation:e.handleInformation,handleEdit:e.handleEdit,handleDelete:e.handleDelete})},s))})},ii=function(e){const{t}=G("settings"),[s,l]=r.useState(),[u,h]=r.useState(!1),[p,f]=r.useState(!1),[o,i]=r.useState(!1),[a,d]=r.useState(!1),[c,m]=r.useState(!1),[g,C]=r.useState(-1),[v,j]=r.useState(!1),[b,x]=r.useState(!1),[y,P]=r.useState(-1),[I,k]=r.useState(!1),[O,T]=r.useState(!1),[A,z]=r.useState(-1),L=()=>{h(!1),f(!1),d(!1),x(!1),T(!1)},w=r.useCallback(()=>{L(),l(void 0),i(!1),j(!1),P(-1),k(!1),z(-1)},[]),M=r.useCallback(()=>{L(),i(!0)},[]),F=r.useCallback(()=>{L(),k(!0)},[]),D=r.useCallback(()=>{L(),j(!0)},[]),B=(R,Z)=>{if(!R){console.warn("Second Factor dialog close callback failed, it was likely cancelled by the user."),w();return}Z?le().catch(console.error).then(()=>{f(!0)}):f(!0)},te=()=>{h(!1)},ae=r.useCallback(R=>{if(!R){console.warn("Identity Verification dialog close callback failed, it was likely cancelled by the user."),w();return}l(void 0),a?M():O?F():b&&D()},[O,b,a,F,D,M,w]),re=()=>{f(!1)},le=async()=>{const R=await Ot();l(R)},ge=()=>{le().catch(console.error),h(!0)},ce=()=>{d(!0),ge()},V=R=>{e.credentials&&(e.credentials.length+1<R||(C(R),m(!0)))},ke=R=>{e.credentials&&(e.credentials.length+1<R||(x(!0),P(R),ge()))},me=R=>{e.credentials&&(e.credentials.length+1<R||(T(!0),z(R),ge()))};return n.jsxs(r.Fragment,{children:[n.jsx(Wt,{info:e.info,elevation:s,opening:u,handleClosed:B,handleOpened:te}),n.jsx(Ft,{elevation:s,opening:p,handleClosed:ae,handleOpened:re}),n.jsx(ni,{open:o,setClosed:()=>{w(),e.handleRefreshState()}}),n.jsx(Za,{credential:g===-1||!e.credentials?void 0:e.credentials[g],open:c,handleClose:()=>{m(!1)}}),n.jsx(Xa,{credential:y===-1||!e.credentials?void 0:e.credentials[y],open:v,handleClose:()=>{w(),e.handleRefreshState()}}),n.jsx(qa,{open:I,credential:A===-1||!e.credentials?void 0:e.credentials[A],handleClose:()=>{w(),e.handleRefreshState()}}),n.jsx(Ae,{variant:"outlined",children:n.jsxs(S,{container:!0,spacing:2,padding:2,children:[n.jsx(S,{size:{xs:12},children:n.jsx(_,{variant:"h5",children:t("WebAuthn Credentials")})}),n.jsx(S,{size:{xs:4,md:2},children:n.jsx(Ue,{title:t("Click to add a {{item}} to your account",{item:t("WebAuthn Credential")}),children:n.jsx(U,{id:"webauthn-credential-add",variant:"outlined",color:"primary",onClick:ce,disabled:a||o,endIcon:a?n.jsx(ze,{color:"inherit",size:20}):null,children:t("Add")})})}),n.jsx(S,{size:{xs:12},children:e.credentials===void 0||e.credentials.length===0?n.jsx(_,{variant:"subtitle2",children:t("No WebAuthn Credentials have been registered if you'd like to register one click add")}):n.jsx(ai,{credentials:e.credentials,handleRefreshState:e.handleRefreshState,handleInformation:V,handleEdit:ke,handleDelete:me})})]})})]})},ri=function(e){const{t}=G("settings"),[s,l]=r.useState(0),[u,h]=r.useState(0),[p,f]=r.useState(0),{createErrorNotification:o}=Se(),[i,a,,d]=fn(),[c,m,,g]=es(),[C,v,,j]=Es(),{setLocalStorageMethod:b,localStorageMethodAvailable:x}=gn(),[y,P,,I]=Pa(),[k,O]=r.useState(!1),[T,A]=r.useState(!1),z=()=>{l(B=>B+1),h(B=>B+1)},L=()=>{l(B=>B+1),f(B=>B+1)},w=i?.available_methods.has(ie.WebAuthn),M=i?.available_methods.has(ie.TOTP);r.useEffect(()=>{a(),m()},[a,m,s]),r.useEffect(()=>{x&&i?.available_methods.size===1&&b([...i.available_methods][0])},[i,x,b]),r.useEffect(()=>{c!==void 0&&(c.has_webauthn!==T&&A(c.has_webauthn),c.has_totp!==k&&O(c.has_totp))},[k,T,c]),r.useEffect(()=>{M&&v()},[M,v,k,p]),r.useEffect(()=>{w&&P()},[w,P,T,u]),r.useEffect(()=>{d&&o(t("There was an issue retrieving the {{item}}",{item:t("global configuration")}))},[d,o,t]),r.useEffect(()=>{g&&o(t("There was an issue retrieving the {{item}}",{item:t("user preferences")}))},[g,o,t]),r.useEffect(()=>{j&&o(t("There was an issue retrieving the {{item}}",{item:t("One-Time Password configuration")}))},[j,o,t]),r.useEffect(()=>{I&&o(t("There was an issue retrieving the {{item}}",{item:t("WebAuthn Credentials")}))},[I,o,t]);const F=()=>{m()},D=()=>!i||!c?!1:!(M||w);return n.jsx(r.Fragment,{children:n.jsxs(S,{container:!0,spacing:2,children:[D()?n.jsx(S,{size:{xs:12},display:"flex",justifyContent:"center",alignItems:"center",children:n.jsx(Ae,{children:n.jsx(_,{variant:"h6",sx:{p:6},"text-align":"center",children:t("There are no protected applications that require a second factor method")})})}):null,!D()&&M?n.jsx(S,{size:{xs:12},children:n.jsx(Ya,{info:c,config:C,handleRefreshState:L})}):null,!D()||w?n.jsx(S,{size:{xs:12},children:w?n.jsx(ii,{info:c,credentials:y,handleRefreshState:z}):n.jsx(Ka,{})}):null,i&&c?n.jsx(S,{size:{xs:12},children:n.jsx(Qa,{config:i,info:c,refresh:F})}):void 0]})})},Ii=function(e){const t=hn(),[s,l,,u]=ts();return r.useEffect(()=>{l()},[l]),r.useEffect(()=>{(u||s&&s.authentication_level<ns.OneFactor)&&t(Rt)},[s,u,t]),n.jsx(ha,{children:n.jsxs(ss,{children:[n.jsx(ft,{path:Rt,element:n.jsx(ja,{})}),n.jsx(ft,{path:dn,element:n.jsx(ya,{})}),n.jsx(ft,{path:un,element:n.jsx(ri,{})})]})})};export{Ii as default};
