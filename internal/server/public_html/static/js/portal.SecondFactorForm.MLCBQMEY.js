const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./portal.OneTimePasswordMethod.DqK-N9CG.js","./index.J4YSomth.js","../css/index.ChexMFeY.css","./constants.constants.BvDkw1BZ.js","./hooks.OpenIDConnect.fHo8fPKW.js","./portal.OTPDial.B6MZu1xd.js","./components.SuccessIcon.C3pLKly2.js","./components.TimerIcon.CO1b_Yfm.js","../css/TimerIcon.iKRD42Bo.css","./portal.IconWithContext.CCYYopkv.js","./portal.MethodContainer.B7LucbyW.js","./components.InformationIcon.Hu39YtA5.js","./portal.Authenticated.KMDfbGon.js","./portal.PushNotificationMethod.Df4OXaM4.js","./components.FailureIcon.C8E_4zaM.js","./components.PushNotificationIcon.C7hpP1zN.js","../css/PushNotificationIcon.BO-74eEb.css","./hooks.Mounted.CNeV72_h.js","./portal.DeviceSelectionContainer.lMQQYXqJ.js","./portal.WebAuthnMethod.BaktiDke.js","./components.WebAuthnTryIcon.D9srFnjZ.js","./hooks.Timer.Bev0y0Kd.js","./services.WebAuthn.DEcKBZA4.js","./browserSupportsWebAuthn.Bhlk1eaM.js","./portal.PasswordMethod.BvUidfbD.js","./portal.PasswordForm.izH8KWiI.js","./mui.VisibilityOff.BbFGBtcl.js","./mui.TextField.oVnBvIhZ.js","./services.Password.B3E9NQ0q.js"])))=>i.map(i=>d[i]);
import{u as C,o as v,m as _,j as t,G as d,a2 as s,B as x,T as L,k as E,ag as F,c as N,r as i,R as O,d as r,aC as p,aD as D,$ as j,a1 as b,aE as z,aF as B,_ as u,aj as W}from"./index.J4YSomth.js";import{b as $}from"./browserSupportsWebAuthn.Bhlk1eaM.js";import{L as V}from"./components.LogoutButton.DMRxt6GR.js";import{S as G}from"./components.SwitchUserButton.jGsmCeD4.js";import{B as f,k as K}from"./constants.constants.BvDkw1BZ.js";import{L as H}from"./layouts.Login.CRKTUBU4.js";import{T as U,a as q,b as J,F as Q,c as X}from"./components.TimerIcon.CO1b_Yfm.js";import{P as Y}from"./components.PushNotificationIcon.C7hpP1zN.js";import"./components.TypographyWithTooltip.DDFBjLT9.js";const Z=function(e){const{t:o}=C(),h=v(),{classes:a}=w(),c=t.jsx(U,{width:24,height:24,period:15,color:h.palette.primary.main,backgroundColor:"white"});return t.jsxs(q,{open:e.open,className:a.root,onClose:e.onClose,children:[t.jsx(J,{children:t.jsxs(d,{container:!0,justifyContent:"center",spacing:1,id:"methods-dialog",children:[e.methods.has(s.TOTP)?t.jsx(S,{id:"one-time-password-option",method:o("Time-based One-Time Password"),icon:c,onClick:()=>e.onClick(s.TOTP)}):null,e.methods.has(s.WebAuthn)&&e.webauthn?t.jsx(S,{id:"webauthn-option",method:o("Security Key - WebAuthn"),icon:t.jsx(Q,{size:32}),onClick:()=>e.onClick(s.WebAuthn)}):null,e.methods.has(s.MobilePush)?t.jsx(S,{id:"push-notification-option",method:o("Push Notification"),icon:t.jsx(Y,{width:32,height:32}),onClick:()=>e.onClick(s.MobilePush)}):null]})}),t.jsx(X,{children:t.jsx(f,{color:"primary",onClick:e.onClose,children:o("Close")})})]})};function S(e){const{classes:o}=w();return t.jsx(d,{size:{xs:12},className:"method-option",id:e.id,children:t.jsxs(f,{className:o.item,color:"primary",classes:{root:o.buttonRoot},variant:"contained",onClick:e.onClick,children:[t.jsx(x,{className:o.icon,children:e.icon}),t.jsx(x,{children:t.jsx(L,{children:e.method})})]})})}const w=_()(e=>({buttonRoot:{display:"block"},icon:{display:"inline-block",fill:"white"},item:{paddingBottom:e.spacing(4),paddingTop:e.spacing(4),width:"100%"},root:{textAlign:"center"}})),ee=i.lazy(()=>u(()=>import("./portal.OneTimePasswordMethod.DqK-N9CG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),te=i.lazy(()=>u(()=>import("./portal.PushNotificationMethod.Df4OXaM4.js"),__vite__mapDeps([13,1,2,14,6,15,16,3,17,4,18,10,11,12]),import.meta.url)),oe=i.lazy(()=>u(()=>import("./portal.WebAuthnMethod.BaktiDke.js"),__vite__mapDeps([19,1,2,20,14,6,7,3,8,21,22,23,9,17,4,10,11,12]),import.meta.url)),ne=i.lazy(()=>u(()=>import("./portal.PasswordMethod.BvUidfbD.js"),__vite__mapDeps([24,1,2,10,11,6,12,3,25,26,27,28]),import.meta.url)),ge=function(e){const{t:o}=C(),{classes:h}=se(),a=E(),c=K(),{localStorageMethodAvailable:y,setLocalStorageMethod:T}=F(),{createErrorNotification:l}=N(),[k,m]=i.useState(!1),I=$(),P=()=>{m(!0)},A=async n=>{y?T(n):await M(n),m(!1),e.onMethodChanged()},M=async n=>{try{await W(n)}catch(R){console.error(R),l(o("There was an issue updating preferred second factor method"))}},g=e.factorKnowledge&&e.configuration.available_methods.size>1;return t.jsxs(H,{id:"second-factor-stage",title:`${o("Hi")} ${e.userInfo.display_name}`,userInfo:e.userInfo,children:[g?t.jsx(Z,{open:k,methods:e.configuration.available_methods,webauthn:I,onClose:()=>m(!1),onClick:A}):null,t.jsxs(d,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[t.jsxs(d,{size:{xs:12},children:[t.jsx(V,{}),c?" | ":null,c?t.jsx(G,{}):null,g?" | ":null,g?t.jsx(f,{id:"methods-button",color:"secondary",onClick:P,children:o("Methods")}):null]}),t.jsx(x,{className:h.methodContainer,children:t.jsxs(O,{children:[t.jsx(r,{path:p,element:t.jsx(ne,{id:"password-method",authenticationLevel:e.authenticationLevel,onAuthenticationSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:D,element:t.jsx(ee,{id:"one-time-password-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_totp,onRegisterClick:()=>{a(`${j}${b}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:z,element:t.jsx(oe,{id:"webauthn-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_webauthn,onRegisterClick:()=>{a(`${j}${b}`)},onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(r,{path:B,element:t.jsx(te,{id:"push-notification-method",authenticationLevel:e.authenticationLevel,duoSelfEnrollment:e.duoSelfEnrollment,registered:e.userInfo.has_duo,onSelectionClick:e.onMethodChanged,onSignInError:n=>l(n.message),onSignInSuccess:e.onAuthenticationSuccess})})]})})]})]})},se=_()(e=>({methodContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",marginBottom:e.spacing(2),marginTop:e.spacing(2),minWidth:"300px",padding:e.spacing(4)}}));export{ge as default};
